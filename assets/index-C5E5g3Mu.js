(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();function a0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ad={exports:{}},ml={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function fb(){if(w_)return ml;w_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(a,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:r,type:a,key:d,ref:l!==void 0?l:null,props:c}}return ml.Fragment=t,ml.jsx=i,ml.jsxs=i,ml}var R_;function db(){return R_||(R_=1,Ad.exports=fb()),Ad.exports}var V=db(),wd={exports:{}},bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_;function mb(){if(C_)return bt;C_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),C=Symbol.iterator;function B(O){return O===null||typeof O!="object"?null:(O=C&&O[C]||O["@@iterator"],typeof O=="function"?O:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,J={};function lt(O,Y,it){this.props=O,this.context=Y,this.refs=J,this.updater=it||$}lt.prototype.isReactComponent={},lt.prototype.setState=function(O,Y){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Y,"setState")},lt.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function _t(){}_t.prototype=lt.prototype;function dt(O,Y,it){this.props=O,this.context=Y,this.refs=J,this.updater=it||$}var Nt=dt.prototype=new _t;Nt.constructor=dt,W(Nt,lt.prototype),Nt.isPureReactComponent=!0;var $t=Array.isArray;function gt(){}var I={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(O,Y,it){var st=it.ref;return{$$typeof:r,type:O,key:Y,ref:st!==void 0?st:null,props:it}}function M(O,Y){return R(O.type,Y,O.props)}function N(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function U(O){var Y={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(it){return Y[it]})}var w=/\/+/g;function re(O,Y){return typeof O=="object"&&O!==null&&O.key!=null?U(""+O.key):Y.toString(36)}function ye(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(gt,gt):(O.status="pending",O.then(function(Y){O.status==="pending"&&(O.status="fulfilled",O.value=Y)},function(Y){O.status==="pending"&&(O.status="rejected",O.reason=Y)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function F(O,Y,it,st,vt){var wt=typeof O;(wt==="undefined"||wt==="boolean")&&(O=null);var xt=!1;if(O===null)xt=!0;else switch(wt){case"bigint":case"string":case"number":xt=!0;break;case"object":switch(O.$$typeof){case r:case t:xt=!0;break;case T:return xt=O._init,F(xt(O._payload),Y,it,st,vt)}}if(xt)return vt=vt(O),xt=st===""?"."+re(O,0):st,$t(vt)?(it="",xt!=null&&(it=xt.replace(w,"$&/")+"/"),F(vt,Y,it,"",function(Ui){return Ui})):vt!=null&&(N(vt)&&(vt=M(vt,it+(vt.key==null||O&&O.key===vt.key?"":(""+vt.key).replace(w,"$&/")+"/")+xt)),Y.push(vt)),1;xt=0;var _e=st===""?".":st+":";if($t(O))for(var ae=0;ae<O.length;ae++)st=O[ae],wt=_e+re(st,ae),xt+=F(st,Y,it,wt,vt);else if(ae=B(O),typeof ae=="function")for(O=ae.call(O),ae=0;!(st=O.next()).done;)st=st.value,wt=_e+re(st,ae++),xt+=F(st,Y,it,wt,vt);else if(wt==="object"){if(typeof O.then=="function")return F(ye(O),Y,it,st,vt);throw Y=String(O),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return xt}function nt(O,Y,it){if(O==null)return O;var st=[],vt=0;return F(O,st,"","",function(wt){return Y.call(it,wt,vt++)}),st}function ht(O){if(O._status===-1){var Y=O._result;Y=Y(),Y.then(function(it){(O._status===0||O._status===-1)&&(O._status=1,O._result=it)},function(it){(O._status===0||O._status===-1)&&(O._status=2,O._result=it)}),O._status===-1&&(O._status=0,O._result=Y)}if(O._status===1)return O._result.default;throw O._result}var Bt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Ot={map:nt,forEach:function(O,Y,it){nt(O,function(){Y.apply(this,arguments)},it)},count:function(O){var Y=0;return nt(O,function(){Y++}),Y},toArray:function(O){return nt(O,function(Y){return Y})||[]},only:function(O){if(!N(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return bt.Activity=b,bt.Children=Ot,bt.Component=lt,bt.Fragment=i,bt.Profiler=l,bt.PureComponent=dt,bt.StrictMode=a,bt.Suspense=_,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,bt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return I.H.useMemoCache(O)}},bt.cache=function(O){return function(){return O.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(O,Y,it){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var st=W({},O.props),vt=O.key;if(Y!=null)for(wt in Y.key!==void 0&&(vt=""+Y.key),Y)!A.call(Y,wt)||wt==="key"||wt==="__self"||wt==="__source"||wt==="ref"&&Y.ref===void 0||(st[wt]=Y[wt]);var wt=arguments.length-2;if(wt===1)st.children=it;else if(1<wt){for(var xt=Array(wt),_e=0;_e<wt;_e++)xt[_e]=arguments[_e+2];st.children=xt}return R(O.type,vt,st)},bt.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},bt.createElement=function(O,Y,it){var st,vt={},wt=null;if(Y!=null)for(st in Y.key!==void 0&&(wt=""+Y.key),Y)A.call(Y,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(vt[st]=Y[st]);var xt=arguments.length-2;if(xt===1)vt.children=it;else if(1<xt){for(var _e=Array(xt),ae=0;ae<xt;ae++)_e[ae]=arguments[ae+2];vt.children=_e}if(O&&O.defaultProps)for(st in xt=O.defaultProps,xt)vt[st]===void 0&&(vt[st]=xt[st]);return R(O,wt,vt)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(O){return{$$typeof:g,render:O}},bt.isValidElement=N,bt.lazy=function(O){return{$$typeof:T,_payload:{_status:-1,_result:O},_init:ht}},bt.memo=function(O,Y){return{$$typeof:y,type:O,compare:Y===void 0?null:Y}},bt.startTransition=function(O){var Y=I.T,it={};I.T=it;try{var st=O(),vt=I.S;vt!==null&&vt(it,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(gt,Bt)}catch(wt){Bt(wt)}finally{Y!==null&&it.types!==null&&(Y.types=it.types),I.T=Y}},bt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},bt.use=function(O){return I.H.use(O)},bt.useActionState=function(O,Y,it){return I.H.useActionState(O,Y,it)},bt.useCallback=function(O,Y){return I.H.useCallback(O,Y)},bt.useContext=function(O){return I.H.useContext(O)},bt.useDebugValue=function(){},bt.useDeferredValue=function(O,Y){return I.H.useDeferredValue(O,Y)},bt.useEffect=function(O,Y){return I.H.useEffect(O,Y)},bt.useEffectEvent=function(O){return I.H.useEffectEvent(O)},bt.useId=function(){return I.H.useId()},bt.useImperativeHandle=function(O,Y,it){return I.H.useImperativeHandle(O,Y,it)},bt.useInsertionEffect=function(O,Y){return I.H.useInsertionEffect(O,Y)},bt.useLayoutEffect=function(O,Y){return I.H.useLayoutEffect(O,Y)},bt.useMemo=function(O,Y){return I.H.useMemo(O,Y)},bt.useOptimistic=function(O,Y){return I.H.useOptimistic(O,Y)},bt.useReducer=function(O,Y,it){return I.H.useReducer(O,Y,it)},bt.useRef=function(O){return I.H.useRef(O)},bt.useState=function(O){return I.H.useState(O)},bt.useSyncExternalStore=function(O,Y,it){return I.H.useSyncExternalStore(O,Y,it)},bt.useTransition=function(){return I.H.useTransition()},bt.version="19.2.0",bt}var I_;function pm(){return I_||(I_=1,wd.exports=mb()),wd.exports}var Et=pm();const gb=a0(Et);var Rd={exports:{}},gl={},Cd={exports:{}},Id={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function pb(){return D_||(D_=1,(function(r){function t(F,nt){var ht=F.length;F.push(nt);t:for(;0<ht;){var Bt=ht-1>>>1,Ot=F[Bt];if(0<l(Ot,nt))F[Bt]=nt,F[ht]=Ot,ht=Bt;else break t}}function i(F){return F.length===0?null:F[0]}function a(F){if(F.length===0)return null;var nt=F[0],ht=F.pop();if(ht!==nt){F[0]=ht;t:for(var Bt=0,Ot=F.length,O=Ot>>>1;Bt<O;){var Y=2*(Bt+1)-1,it=F[Y],st=Y+1,vt=F[st];if(0>l(it,ht))st<Ot&&0>l(vt,it)?(F[Bt]=vt,F[st]=ht,Bt=st):(F[Bt]=it,F[Y]=ht,Bt=Y);else if(st<Ot&&0>l(vt,ht))F[Bt]=vt,F[st]=ht,Bt=st;else break t}}return nt}function l(F,nt){var ht=F.sortIndex-nt.sortIndex;return ht!==0?ht:F.id-nt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var _=[],y=[],T=1,b=null,C=3,B=!1,$=!1,W=!1,J=!1,lt=typeof setTimeout=="function"?setTimeout:null,_t=typeof clearTimeout=="function"?clearTimeout:null,dt=typeof setImmediate<"u"?setImmediate:null;function Nt(F){for(var nt=i(y);nt!==null;){if(nt.callback===null)a(y);else if(nt.startTime<=F)a(y),nt.sortIndex=nt.expirationTime,t(_,nt);else break;nt=i(y)}}function $t(F){if(W=!1,Nt(F),!$)if(i(_)!==null)$=!0,gt||(gt=!0,U());else{var nt=i(y);nt!==null&&ye($t,nt.startTime-F)}}var gt=!1,I=-1,A=5,R=-1;function M(){return J?!0:!(r.unstable_now()-R<A)}function N(){if(J=!1,gt){var F=r.unstable_now();R=F;var nt=!0;try{t:{$=!1,W&&(W=!1,_t(I),I=-1),B=!0;var ht=C;try{e:{for(Nt(F),b=i(_);b!==null&&!(b.expirationTime>F&&M());){var Bt=b.callback;if(typeof Bt=="function"){b.callback=null,C=b.priorityLevel;var Ot=Bt(b.expirationTime<=F);if(F=r.unstable_now(),typeof Ot=="function"){b.callback=Ot,Nt(F),nt=!0;break e}b===i(_)&&a(_),Nt(F)}else a(_);b=i(_)}if(b!==null)nt=!0;else{var O=i(y);O!==null&&ye($t,O.startTime-F),nt=!1}}break t}finally{b=null,C=ht,B=!1}nt=void 0}}finally{nt?U():gt=!1}}}var U;if(typeof dt=="function")U=function(){dt(N)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,re=w.port2;w.port1.onmessage=N,U=function(){re.postMessage(null)}}else U=function(){lt(N,0)};function ye(F,nt){I=lt(function(){F(r.unstable_now())},nt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_next=function(F){switch(C){case 1:case 2:case 3:var nt=3;break;default:nt=C}var ht=C;C=nt;try{return F()}finally{C=ht}},r.unstable_requestPaint=function(){J=!0},r.unstable_runWithPriority=function(F,nt){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ht=C;C=F;try{return nt()}finally{C=ht}},r.unstable_scheduleCallback=function(F,nt,ht){var Bt=r.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?Bt+ht:Bt):ht=Bt,F){case 1:var Ot=-1;break;case 2:Ot=250;break;case 5:Ot=1073741823;break;case 4:Ot=1e4;break;default:Ot=5e3}return Ot=ht+Ot,F={id:T++,callback:nt,priorityLevel:F,startTime:ht,expirationTime:Ot,sortIndex:-1},ht>Bt?(F.sortIndex=ht,t(y,F),i(_)===null&&F===i(y)&&(W?(_t(I),I=-1):W=!0,ye($t,ht-Bt))):(F.sortIndex=Ot,t(_,F),$||B||($=!0,gt||(gt=!0,U()))),F},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(F){var nt=C;return function(){var ht=C;C=nt;try{return F.apply(this,arguments)}finally{C=ht}}}})(Id)),Id}var N_;function yb(){return N_||(N_=1,Cd.exports=pb()),Cd.exports}var Dd={exports:{}},Je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function _b(){if(O_)return Je;O_=1;var r=pm();function t(_){var y="https://react.dev/errors/"+_;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+_+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(_,y,T){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:_,containerInfo:y,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(_,y){if(_==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Je.createPortal=function(_,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(_,y,null,T)},Je.flushSync=function(_){var y=d.T,T=a.p;try{if(d.T=null,a.p=2,_)return _()}finally{d.T=y,a.p=T,a.d.f()}},Je.preconnect=function(_,y){typeof _=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(_,y))},Je.prefetchDNS=function(_){typeof _=="string"&&a.d.D(_)},Je.preinit=function(_,y){if(typeof _=="string"&&y&&typeof y.as=="string"){var T=y.as,b=g(T,y.crossOrigin),C=typeof y.integrity=="string"?y.integrity:void 0,B=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?a.d.S(_,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:C,fetchPriority:B}):T==="script"&&a.d.X(_,{crossOrigin:b,integrity:C,fetchPriority:B,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Je.preinitModule=function(_,y){if(typeof _=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=g(y.as,y.crossOrigin);a.d.M(_,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(_)},Je.preload=function(_,y){if(typeof _=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,b=g(T,y.crossOrigin);a.d.L(_,T,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Je.preloadModule=function(_,y){if(typeof _=="string")if(y){var T=g(y.as,y.crossOrigin);a.d.m(_,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(_)},Je.requestFormReset=function(_){a.d.r(_)},Je.unstable_batchedUpdates=function(_,y){return _(y)},Je.useFormState=function(_,y,T){return d.H.useFormState(_,y,T)},Je.useFormStatus=function(){return d.H.useHostTransitionStatus()},Je.version="19.2.0",Je}var x_;function vb(){if(x_)return Dd.exports;x_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Dd.exports=_b(),Dd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function Eb(){if(M_)return gl;M_=1;var r=yb(),t=pm(),i=vb();function a(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(c(e)!==e)throw Error(a(188))}function y(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(a(188));return n!==e?null:e}for(var s=e,o=n;;){var h=s.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){s=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===s)return _(h),e;if(f===o)return _(h),n;f=f.sibling}throw Error(a(188))}if(s.return!==o.return)s=h,o=f;else{for(var p=!1,E=h.child;E;){if(E===s){p=!0,s=h,o=f;break}if(E===o){p=!0,o=h,s=f;break}E=E.sibling}if(!p){for(E=f.child;E;){if(E===s){p=!0,s=f,o=h;break}if(E===o){p=!0,o=f,s=h;break}E=E.sibling}if(!p)throw Error(a(189))}}if(s.alternate!==o)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?e:n}function T(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=T(e),n!==null)return n;e=e.sibling}return null}var b=Object.assign,C=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),lt=Symbol.for("react.profiler"),_t=Symbol.for("react.consumer"),dt=Symbol.for("react.context"),Nt=Symbol.for("react.forward_ref"),$t=Symbol.for("react.suspense"),gt=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function U(e){return e===null||typeof e!="object"?null:(e=N&&e[N]||e["@@iterator"],typeof e=="function"?e:null)}var w=Symbol.for("react.client.reference");function re(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===w?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case lt:return"Profiler";case J:return"StrictMode";case $t:return"Suspense";case gt:return"SuspenseList";case R:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case $:return"Portal";case dt:return e.displayName||"Context";case _t:return(e._context.displayName||"Context")+".Consumer";case Nt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I:return n=e.displayName||null,n!==null?n:re(e.type)||"Memo";case A:n=e._payload,e=e._init;try{return re(e(n))}catch{}}return null}var ye=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht={pending:!1,data:null,method:null,action:null},Bt=[],Ot=-1;function O(e){return{current:e}}function Y(e){0>Ot||(e.current=Bt[Ot],Bt[Ot]=null,Ot--)}function it(e,n){Ot++,Bt[Ot]=e.current,e.current=n}var st=O(null),vt=O(null),wt=O(null),xt=O(null);function _e(e,n){switch(it(wt,n),it(vt,e),it(st,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Ky(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Ky(n),e=Xy(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Y(st),it(st,e)}function ae(){Y(st),Y(vt),Y(wt)}function Ui(e){e.memoizedState!==null&&it(xt,e);var n=st.current,s=Xy(n,e.type);n!==s&&(it(vt,e),it(st,s))}function cs(e){vt.current===e&&(Y(st),Y(vt)),xt.current===e&&(Y(xt),cl._currentValue=ht)}var hs,fs;function In(e){if(hs===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);hs=n&&n[1]||"",fs=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hs+e+fs}var dr=!1;function ki(e,n){if(!e||dr)return"";dr=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(H){var j=H}Reflect.construct(e,[],K)}else{try{K.call()}catch(H){j=H}e.call(K.prototype)}}else{try{throw Error()}catch(H){j=H}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(H){if(H&&j&&typeof H.stack=="string")return[H.stack,j.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),p=f[0],E=f[1];if(p&&E){var D=p.split(`
`),z=E.split(`
`);for(h=o=0;o<D.length&&!D[o].includes("DetermineComponentFrameRoot");)o++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(o===D.length||h===z.length)for(o=D.length-1,h=z.length-1;1<=o&&0<=h&&D[o]!==z[h];)h--;for(;1<=o&&0<=h;o--,h--)if(D[o]!==z[h]){if(o!==1||h!==1)do if(o--,h--,0>h||D[o]!==z[h]){var G=`
`+D[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=h);break}}}finally{dr=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?In(s):""}function mr(e,n){switch(e.tag){case 26:case 27:case 5:return In(e.type);case 16:return In("Lazy");case 13:return e.child!==n&&n!==null?In("Suspense Fallback"):In("Suspense");case 19:return In("SuspenseList");case 0:case 15:return ki(e.type,!1);case 11:return ki(e.type.render,!1);case 1:return ki(e.type,!0);case 31:return In("Activity");default:return""}}function et(e){try{var n="",s=null;do n+=mr(e,s),s=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var rt=Object.prototype.hasOwnProperty,Rt=r.unstable_scheduleCallback,Ut=r.unstable_cancelCallback,oe=r.unstable_shouldYield,Ze=r.unstable_requestPaint,Kt=r.unstable_now,yn=r.unstable_getCurrentPriorityLevel,fo=r.unstable_ImmediatePriority,mo=r.unstable_UserBlockingPriority,ds=r.unstable_NormalPriority,Rh=r.unstable_LowPriority,Yl=r.unstable_IdlePriority,Kl=r.log,Xl=r.unstable_setDisableYieldValue,Hn=null,qe=null;function Dn(e){if(typeof Kl=="function"&&Xl(e),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Hn,e)}catch{}}var ve=Math.clz32?Math.clz32:Zl,$l=Math.log,ta=Math.LN2;function Zl(e){return e>>>=0,e===0?32:31-($l(e)/ta|0)|0}var ii=256,gr=262144,Ae=4194304;function si(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ri(e,n,s){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=si(o):(p&=E,p!==0?h=si(p):s||(s=E&~e,s!==0&&(h=si(s))))):(E=o&~f,E!==0?h=si(E):p!==0?h=si(p):s||(s=o&~e,s!==0&&(h=si(s)))),h===0?0:n!==0&&n!==h&&(n&f)===0&&(f=h&-h,s=n&-n,f>=s||f===32&&(s&4194048)!==0)?n:h}function Fn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Ch(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jl(){var e=Ae;return Ae<<=1,(Ae&62914560)===0&&(Ae=4194304),e}function ai(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function pr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ih(e,n,s,o,h,f){var p=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var E=e.entanglements,D=e.expirationTimes,z=e.hiddenUpdates;for(s=p&~s;0<s;){var G=31-ve(s),K=1<<G;E[G]=0,D[G]=-1;var j=z[G];if(j!==null)for(z[G]=null,G=0;G<j.length;G++){var H=j[G];H!==null&&(H.lane&=-536870913)}s&=~K}o!==0&&yr(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(p&~n))}function yr(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-ve(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|s&261930}function go(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var o=31-ve(s),h=1<<o;h&n|e[o]&n&&(e[o]|=n),s&=~h}}function po(e,n){var s=n&-n;return s=(s&42)!==0?1:_r(s),(s&(e.suspendedLanes|n))!==0?0:s}function _r(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Li(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Wl(){var e=nt.p;return e!==0?e:(e=window.event,e===void 0?32:__(e.type))}function Gn(e,n){var s=nt.p;try{return nt.p=e,n()}finally{nt.p=s}}var Qn=Math.random().toString(36).slice(2),we="__reactFiber$"+Qn,Pe="__reactProps$"+Qn,oi="__reactContainer$"+Qn,ea="__reactEvents$"+Qn,Dh="__reactListeners$"+Qn,tu="__reactHandles$"+Qn,eu="__reactResources$"+Qn,li="__reactMarker$"+Qn;function na(e){delete e[we],delete e[Pe],delete e[ea],delete e[Dh],delete e[tu]}function ui(e){var n=e[we];if(n)return n;for(var s=e.parentNode;s;){if(n=s[oi]||s[we]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=n_(e);e!==null;){if(s=e[we])return s;e=n_(e)}return n}e=s,s=e.parentNode}return null}function Nn(e){if(e=e[we]||e[oi]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function _n(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(a(33))}function ci(e){var n=e[eu];return n||(n=e[eu]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Re(e){e[li]=!0}var yo=new Set,_o={};function hi(e,n){fi(e,n),fi(e+"Capture",n)}function fi(e,n){for(_o[e]=n,e=0;e<n.length;e++)yo.add(n[e])}var vo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Eo={},To={};function nu(e){return rt.call(To,e)?!0:rt.call(Eo,e)?!1:vo.test(e)?To[e]=!0:(Eo[e]=!0,!1)}function ia(e,n,s){if(nu(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function vn(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function Ce(e,n,s,o){if(o===null)e.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+o)}}function ze(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ms(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function So(e,n,s){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,f=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(p){s=""+p,f.call(this,p)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(p){s=""+p},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Zt(e){if(!e._valueTracker){var n=ms(e)?"checked":"value";e._valueTracker=So(e,n,""+e[n])}}function vr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),o="";return e&&(o=ms(e)?e.checked?"true":"false":e.value),e=o,e!==s?(n.setValue(e),!0):!1}function di(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Er=/[\n"\\]/g;function ln(e){return e.replace(Er,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function sa(e,n,s,o,h,f,p,E){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),n!=null?p==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+ze(n)):e.value!==""+ze(n)&&(e.value=""+ze(n)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),n!=null?bo(e,p,ze(n)):s!=null?bo(e,p,ze(s)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+ze(E):e.removeAttribute("name")}function iu(e,n,s,o,h,f,p,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||s!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){Zt(e);return}s=s!=null?""+ze(s):"",n=n!=null?""+ze(n):s,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),Zt(e)}function bo(e,n,s){n==="number"&&di(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function gs(e,n,s,o){if(e=e.options,n){n={};for(var h=0;h<s.length;h++)n["$"+s[h]]=!0;for(s=0;s<e.length;s++)h=n.hasOwnProperty("$"+e[s].value),e[s].selected!==h&&(e[s].selected=h),h&&o&&(e[s].defaultSelected=!0)}else{for(s=""+ze(s),n=null,h=0;h<e.length;h++){if(e[h].value===s){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function su(e,n,s){if(n!=null&&(n=""+ze(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+ze(s):""}function ps(e,n,s,o){if(n==null){if(o!=null){if(s!=null)throw Error(a(92));if(ye(o)){if(1<o.length)throw Error(a(93));o=o[0]}s=o}s==null&&(s=""),n=s}s=ze(n),e.defaultValue=s,o=e.textContent,o===s&&o!==""&&o!==null&&(e.value=o),Zt(e)}function un(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var ru=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ao(e,n,s){var o=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,s):typeof s!="number"||s===0||ru.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function wo(e,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(e=e.style,s!=null){for(var o in s)!s.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&s[h]!==o&&Ao(e,h,o)}else for(var f in n)n.hasOwnProperty(f)&&Ao(e,f,n[f])}function ra(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var au=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ys=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function aa(e){return ys.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Yn(){}var Ro=null;function On(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _s=null,mi=null;function Tr(e){var n=Nn(e);if(n&&(e=n.stateNode)){var s=e[Pe]||null;t:switch(e=n.stateNode,n.type){case"input":if(sa(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ln(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var o=s[n];if(o!==e&&o.form===e.form){var h=o[Pe]||null;if(!h)throw Error(a(90));sa(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<s.length;n++)o=s[n],o.form===e.form&&vr(o)}break t;case"textarea":su(e,s.value,s.defaultValue);break t;case"select":n=s.value,n!=null&&gs(e,!!s.multiple,n,!1)}}}var oa=!1;function vs(e,n,s){if(oa)return e(n,s);oa=!0;try{var o=e(n);return o}finally{if(oa=!1,(_s!==null||mi!==null)&&(Wu(),_s&&(n=_s,e=mi,mi=_s=null,Tr(n),e)))for(n=0;n<e.length;n++)Tr(e[n])}}function Kn(e,n){var s=e.stateNode;if(s===null)return null;var o=s[Pe]||null;if(o===null)return null;s=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sr=!1;if(xn)try{var te={};Object.defineProperty(te,"passive",{get:function(){Sr=!0}}),window.addEventListener("test",te,te),window.removeEventListener("test",te,te)}catch{Sr=!1}var gi=null,Co=null,br=null;function Io(){if(br)return br;var e,n=Co,s=n.length,o,h="value"in gi?gi.value:gi.textContent,f=h.length;for(e=0;e<s&&n[e]===h[e];e++);var p=s-e;for(o=1;o<=p&&n[s-o]===h[f-o];o++);return br=h.slice(e,1<o?1-o:void 0)}function Ar(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Pi(){return!0}function Xn(){return!1}function He(e){function n(s,o,h,f,p){this._reactName=s,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=p,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(s=e[E],this[E]=s?s(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Pi:Xn,this.isPropagationStopped=Xn,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),n}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=He(zi),Es=b({},zi,{view:0,detail:0}),Do=He(Es),Ts,la,yi,ua=b({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ss,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yi&&(yi&&e.type==="mousemove"?(Ts=e.screenX-yi.screenX,la=e.screenY-yi.screenY):la=Ts=0,yi=e),Ts)},movementY:function(e){return"movementY"in e?e.movementY:la}}),No=He(ua),wr=b({},ua,{dataTransfer:0}),ou=He(wr),lu=b({},Es,{relatedTarget:0}),Rr=He(lu),Oo=b({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),uu=He(Oo),ca=b({},zi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cu=He(ca),hu=b({},zi,{data:0}),_i=He(hu),fu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gu(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=mu[e])?!!n[e]:!1}function Ss(){return gu}var rn=b({},Es,{key:function(e){if(e.key){var n=fu[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ar(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?du[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ss,charCode:function(e){return e.type==="keypress"?Ar(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ar(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pu=He(rn),yu=b({},ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ji=He(yu),u=b({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ss}),m=He(u),v=b({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=He(v),L=b({},ua,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),q=He(L),tt=b({},zi,{newState:0,oldState:0}),Ct=He(tt),Ee=[9,13,27,32],Qt=xn&&"CompositionEvent"in window,he=null;xn&&"documentMode"in document&&(he=document.documentMode);var Mn=xn&&"TextEvent"in window&&!he,vi=xn&&(!Qt||he&&8<he&&11>=he),$n=" ",Zn=!1;function Cr(e,n){switch(e){case"keyup":return Ee.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ha(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fa=!1;function kT(e,n){switch(e){case"compositionend":return ha(n);case"keypress":return n.which!==32?null:(Zn=!0,$n);case"textInput":return e=n.data,e===$n&&Zn?null:e;default:return null}}function LT(e,n){if(fa)return e==="compositionend"||!Qt&&Cr(e,n)?(e=Io(),br=Co=gi=null,fa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return vi&&n.locale!=="ko"?null:n.data;default:return null}}var PT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rg(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!PT[e.type]:n==="textarea"}function ag(e,n,s,o){_s?mi?mi.push(o):mi=[o]:_s=o,n=ac(n,"onChange"),0<n.length&&(s=new pi("onChange","change",null,s,o),e.push({event:s,listeners:n}))}var xo=null,Mo=null;function zT(e){qy(e,0)}function _u(e){var n=_n(e);if(vr(n))return e}function og(e,n){if(e==="change")return n}var lg=!1;if(xn){var Nh;if(xn){var Oh="oninput"in document;if(!Oh){var ug=document.createElement("div");ug.setAttribute("oninput","return;"),Oh=typeof ug.oninput=="function"}Nh=Oh}else Nh=!1;lg=Nh&&(!document.documentMode||9<document.documentMode)}function cg(){xo&&(xo.detachEvent("onpropertychange",hg),Mo=xo=null)}function hg(e){if(e.propertyName==="value"&&_u(Mo)){var n=[];ag(n,Mo,e,On(e)),vs(zT,n)}}function jT(e,n,s){e==="focusin"?(cg(),xo=n,Mo=s,xo.attachEvent("onpropertychange",hg)):e==="focusout"&&cg()}function BT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _u(Mo)}function qT(e,n){if(e==="click")return _u(n)}function HT(e,n){if(e==="input"||e==="change")return _u(n)}function FT(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var En=typeof Object.is=="function"?Object.is:FT;function Vo(e,n){if(En(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),o=Object.keys(n);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var h=s[o];if(!rt.call(n,h)||!En(e[h],n[h]))return!1}return!0}function fg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dg(e,n){var s=fg(e);e=0;for(var o;s;){if(s.nodeType===3){if(o=e+s.textContent.length,e<=n&&o>=n)return{node:s,offset:n-e};e=o}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=fg(s)}}function mg(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?mg(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function gg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=di(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=di(e.document)}return n}function xh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var GT=xn&&"documentMode"in document&&11>=document.documentMode,da=null,Mh=null,Uo=null,Vh=!1;function pg(e,n,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Vh||da==null||da!==di(o)||(o=da,"selectionStart"in o&&xh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Uo&&Vo(Uo,o)||(Uo=o,o=ac(Mh,"onSelect"),0<o.length&&(n=new pi("onSelect","select",null,n,s),e.push({event:n,listeners:o}),n.target=da)))}function Ir(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var ma={animationend:Ir("Animation","AnimationEnd"),animationiteration:Ir("Animation","AnimationIteration"),animationstart:Ir("Animation","AnimationStart"),transitionrun:Ir("Transition","TransitionRun"),transitionstart:Ir("Transition","TransitionStart"),transitioncancel:Ir("Transition","TransitionCancel"),transitionend:Ir("Transition","TransitionEnd")},Uh={},yg={};xn&&(yg=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function Dr(e){if(Uh[e])return Uh[e];if(!ma[e])return e;var n=ma[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in yg)return Uh[e]=n[s];return e}var _g=Dr("animationend"),vg=Dr("animationiteration"),Eg=Dr("animationstart"),QT=Dr("transitionrun"),YT=Dr("transitionstart"),KT=Dr("transitioncancel"),Tg=Dr("transitionend"),Sg=new Map,kh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kh.push("scrollEnd");function Jn(e,n){Sg.set(e,n),hi(n,[e])}var vu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Vn=[],ga=0,Lh=0;function Eu(){for(var e=ga,n=Lh=ga=0;n<e;){var s=Vn[n];Vn[n++]=null;var o=Vn[n];Vn[n++]=null;var h=Vn[n];Vn[n++]=null;var f=Vn[n];if(Vn[n++]=null,o!==null&&h!==null){var p=o.pending;p===null?h.next=h:(h.next=p.next,p.next=h),o.pending=h}f!==0&&bg(s,h,f)}}function Tu(e,n,s,o){Vn[ga++]=e,Vn[ga++]=n,Vn[ga++]=s,Vn[ga++]=o,Lh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Ph(e,n,s,o){return Tu(e,n,s,o),Su(e)}function Nr(e,n){return Tu(e,null,null,n),Su(e)}function bg(e,n,s){e.lanes|=s;var o=e.alternate;o!==null&&(o.lanes|=s);for(var h=!1,f=e.return;f!==null;)f.childLanes|=s,o=f.alternate,o!==null&&(o.childLanes|=s),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&n!==null&&(h=31-ve(s),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=s|536870912),f):null}function Su(e){if(50<il)throw il=0,Kf=null,Error(a(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var pa={};function XT(e,n,s,o){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(e,n,s,o){return new XT(e,n,s,o)}function zh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bi(e,n){var s=e.alternate;return s===null?(s=Tn(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Ag(e,n){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function bu(e,n,s,o,h,f){var p=0;if(o=e,typeof e=="function")zh(e)&&(p=1);else if(typeof e=="string")p=tb(e,s,st.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case R:return e=Tn(31,s,n,h),e.elementType=R,e.lanes=f,e;case W:return Or(s.children,h,f,n);case J:p=8,h|=24;break;case lt:return e=Tn(12,s,n,h|2),e.elementType=lt,e.lanes=f,e;case $t:return e=Tn(13,s,n,h),e.elementType=$t,e.lanes=f,e;case gt:return e=Tn(19,s,n,h),e.elementType=gt,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dt:p=10;break t;case _t:p=9;break t;case Nt:p=11;break t;case I:p=14;break t;case A:p=16,o=null;break t}p=29,s=Error(a(130,e===null?"null":typeof e,"")),o=null}return n=Tn(p,s,n,h),n.elementType=e,n.type=o,n.lanes=f,n}function Or(e,n,s,o){return e=Tn(7,e,o,n),e.lanes=s,e}function jh(e,n,s){return e=Tn(6,e,null,n),e.lanes=s,e}function wg(e){var n=Tn(18,null,null,0);return n.stateNode=e,n}function Bh(e,n,s){return n=Tn(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Rg=new WeakMap;function Un(e,n){if(typeof e=="object"&&e!==null){var s=Rg.get(e);return s!==void 0?s:(n={value:e,source:n,stack:et(n)},Rg.set(e,n),n)}return{value:e,source:n,stack:et(n)}}var ya=[],_a=0,Au=null,ko=0,kn=[],Ln=0,bs=null,Ei=1,Ti="";function qi(e,n){ya[_a++]=ko,ya[_a++]=Au,Au=e,ko=n}function Cg(e,n,s){kn[Ln++]=Ei,kn[Ln++]=Ti,kn[Ln++]=bs,bs=e;var o=Ei;e=Ti;var h=32-ve(o)-1;o&=~(1<<h),s+=1;var f=32-ve(n)+h;if(30<f){var p=h-h%5;f=(o&(1<<p)-1).toString(32),o>>=p,h-=p,Ei=1<<32-ve(n)+h|s<<h|o,Ti=f+e}else Ei=1<<f|s<<h|o,Ti=e}function qh(e){e.return!==null&&(qi(e,1),Cg(e,1,0))}function Hh(e){for(;e===Au;)Au=ya[--_a],ya[_a]=null,ko=ya[--_a],ya[_a]=null;for(;e===bs;)bs=kn[--Ln],kn[Ln]=null,Ti=kn[--Ln],kn[Ln]=null,Ei=kn[--Ln],kn[Ln]=null}function Ig(e,n){kn[Ln++]=Ei,kn[Ln++]=Ti,kn[Ln++]=bs,Ei=n.id,Ti=n.overflow,bs=e}var Fe=null,le=null,qt=!1,As=null,Pn=!1,Fh=Error(a(519));function ws(e){var n=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Lo(Un(n,e)),Fh}function Dg(e){var n=e.stateNode,s=e.type,o=e.memoizedProps;switch(n[we]=e,n[Pe]=o,s){case"dialog":Vt("cancel",n),Vt("close",n);break;case"iframe":case"object":case"embed":Vt("load",n);break;case"video":case"audio":for(s=0;s<rl.length;s++)Vt(rl[s],n);break;case"source":Vt("error",n);break;case"img":case"image":case"link":Vt("error",n),Vt("load",n);break;case"details":Vt("toggle",n);break;case"input":Vt("invalid",n),iu(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Vt("invalid",n);break;case"textarea":Vt("invalid",n),ps(n,o.value,o.defaultValue,o.children)}s=o.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||o.suppressHydrationWarning===!0||Qy(n.textContent,s)?(o.popover!=null&&(Vt("beforetoggle",n),Vt("toggle",n)),o.onScroll!=null&&Vt("scroll",n),o.onScrollEnd!=null&&Vt("scrollend",n),o.onClick!=null&&(n.onclick=Yn),n=!0):n=!1,n||ws(e,!0)}function Ng(e){for(Fe=e.return;Fe;)switch(Fe.tag){case 5:case 31:case 13:Pn=!1;return;case 27:case 3:Pn=!0;return;default:Fe=Fe.return}}function va(e){if(e!==Fe)return!1;if(!qt)return Ng(e),qt=!0,!1;var n=e.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||ud(e.type,e.memoizedProps)),s=!s),s&&le&&ws(e),Ng(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));le=e_(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));le=e_(e)}else n===27?(n=le,zs(e.type)?(e=md,md=null,le=e):le=n):le=Fe?jn(e.stateNode.nextSibling):null;return!0}function xr(){le=Fe=null,qt=!1}function Gh(){var e=As;return e!==null&&(dn===null?dn=e:dn.push.apply(dn,e),As=null),e}function Lo(e){As===null?As=[e]:As.push(e)}var Qh=O(null),Mr=null,Hi=null;function Rs(e,n,s){it(Qh,n._currentValue),n._currentValue=s}function Fi(e){e._currentValue=Qh.current,Y(Qh)}function Yh(e,n,s){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===s)break;e=e.return}}function Kh(e,n,s,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var p=h.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=h;for(var D=0;D<n.length;D++)if(E.context===n[D]){f.lanes|=s,E=f.alternate,E!==null&&(E.lanes|=s),Yh(f.return,s,e),o||(p=null);break t}f=E.next}}else if(h.tag===18){if(p=h.return,p===null)throw Error(a(341));p.lanes|=s,f=p.alternate,f!==null&&(f.lanes|=s),Yh(p,s,e),p=null}else p=h.child;if(p!==null)p.return=h;else for(p=h;p!==null;){if(p===e){p=null;break}if(h=p.sibling,h!==null){h.return=p.return,p=h;break}p=p.return}h=p}}function Ea(e,n,s,o){e=null;for(var h=n,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var p=h.alternate;if(p===null)throw Error(a(387));if(p=p.memoizedProps,p!==null){var E=h.type;En(h.pendingProps.value,p.value)||(e!==null?e.push(E):e=[E])}}else if(h===xt.current){if(p=h.alternate,p===null)throw Error(a(387));p.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(cl):e=[cl])}h=h.return}e!==null&&Kh(n,e,s,o),n.flags|=262144}function wu(e){for(e=e.firstContext;e!==null;){if(!En(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vr(e){Mr=e,Hi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ge(e){return Og(Mr,e)}function Ru(e,n){return Mr===null&&Vr(e),Og(e,n)}function Og(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Hi===null){if(e===null)throw Error(a(308));Hi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Hi=Hi.next=n;return s}var $T=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},ZT=r.unstable_scheduleCallback,JT=r.unstable_NormalPriority,Ie={$$typeof:dt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xh(){return{controller:new $T,data:new Map,refCount:0}}function Po(e){e.refCount--,e.refCount===0&&ZT(JT,function(){e.controller.abort()})}var zo=null,$h=0,Ta=0,Sa=null;function WT(e,n){if(zo===null){var s=zo=[];$h=0,Ta=td(),Sa={status:"pending",value:void 0,then:function(o){s.push(o)}}}return $h++,n.then(xg,xg),n}function xg(){if(--$h===0&&zo!==null){Sa!==null&&(Sa.status="fulfilled");var e=zo;zo=null,Ta=0,Sa=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function tS(e,n){var s=[],o={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<s.length;h++)(0,s[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),o}var Mg=F.S;F.S=function(e,n){py=Kt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&WT(e,n),Mg!==null&&Mg(e,n)};var Ur=O(null);function Zh(){var e=Ur.current;return e!==null?e:se.pooledCache}function Cu(e,n){n===null?it(Ur,Ur.current):it(Ur,n.pool)}function Vg(){var e=Zh();return e===null?null:{parent:Ie._currentValue,pool:e}}var ba=Error(a(460)),Jh=Error(a(474)),Iu=Error(a(542)),Du={then:function(){}};function Ug(e){return e=e.status,e==="fulfilled"||e==="rejected"}function kg(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(Yn,Yn),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Pg(e),e;default:if(typeof n.status=="string")n.then(Yn,Yn);else{if(e=se,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Pg(e),e}throw Lr=n,ba}}function kr(e){try{var n=e._init;return n(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Lr=s,ba):s}}var Lr=null;function Lg(){if(Lr===null)throw Error(a(459));var e=Lr;return Lr=null,e}function Pg(e){if(e===ba||e===Iu)throw Error(a(483))}var Aa=null,jo=0;function Nu(e){var n=jo;return jo+=1,Aa===null&&(Aa=[]),kg(Aa,e,n)}function Bo(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Ou(e,n){throw n.$$typeof===C?Error(a(525)):(e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function zg(e){function n(k,x){if(e){var P=k.deletions;P===null?(k.deletions=[x],k.flags|=16):P.push(x)}}function s(k,x){if(!e)return null;for(;x!==null;)n(k,x),x=x.sibling;return null}function o(k){for(var x=new Map;k!==null;)k.key!==null?x.set(k.key,k):x.set(k.index,k),k=k.sibling;return x}function h(k,x){return k=Bi(k,x),k.index=0,k.sibling=null,k}function f(k,x,P){return k.index=P,e?(P=k.alternate,P!==null?(P=P.index,P<x?(k.flags|=67108866,x):P):(k.flags|=67108866,x)):(k.flags|=1048576,x)}function p(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function E(k,x,P,Q){return x===null||x.tag!==6?(x=jh(P,k.mode,Q),x.return=k,x):(x=h(x,P),x.return=k,x)}function D(k,x,P,Q){var ft=P.type;return ft===W?G(k,x,P.props.children,Q,P.key):x!==null&&(x.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===A&&kr(ft)===x.type)?(x=h(x,P.props),Bo(x,P),x.return=k,x):(x=bu(P.type,P.key,P.props,null,k.mode,Q),Bo(x,P),x.return=k,x)}function z(k,x,P,Q){return x===null||x.tag!==4||x.stateNode.containerInfo!==P.containerInfo||x.stateNode.implementation!==P.implementation?(x=Bh(P,k.mode,Q),x.return=k,x):(x=h(x,P.children||[]),x.return=k,x)}function G(k,x,P,Q,ft){return x===null||x.tag!==7?(x=Or(P,k.mode,Q,ft),x.return=k,x):(x=h(x,P),x.return=k,x)}function K(k,x,P){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=jh(""+x,k.mode,P),x.return=k,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case B:return P=bu(x.type,x.key,x.props,null,k.mode,P),Bo(P,x),P.return=k,P;case $:return x=Bh(x,k.mode,P),x.return=k,x;case A:return x=kr(x),K(k,x,P)}if(ye(x)||U(x))return x=Or(x,k.mode,P,null),x.return=k,x;if(typeof x.then=="function")return K(k,Nu(x),P);if(x.$$typeof===dt)return K(k,Ru(k,x),P);Ou(k,x)}return null}function j(k,x,P,Q){var ft=x!==null?x.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return ft!==null?null:E(k,x,""+P,Q);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case B:return P.key===ft?D(k,x,P,Q):null;case $:return P.key===ft?z(k,x,P,Q):null;case A:return P=kr(P),j(k,x,P,Q)}if(ye(P)||U(P))return ft!==null?null:G(k,x,P,Q,null);if(typeof P.then=="function")return j(k,x,Nu(P),Q);if(P.$$typeof===dt)return j(k,x,Ru(k,P),Q);Ou(k,P)}return null}function H(k,x,P,Q,ft){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return k=k.get(P)||null,E(x,k,""+Q,ft);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case B:return k=k.get(Q.key===null?P:Q.key)||null,D(x,k,Q,ft);case $:return k=k.get(Q.key===null?P:Q.key)||null,z(x,k,Q,ft);case A:return Q=kr(Q),H(k,x,P,Q,ft)}if(ye(Q)||U(Q))return k=k.get(P)||null,G(x,k,Q,ft,null);if(typeof Q.then=="function")return H(k,x,P,Nu(Q),ft);if(Q.$$typeof===dt)return H(k,x,P,Ru(x,Q),ft);Ou(x,Q)}return null}function ot(k,x,P,Q){for(var ft=null,Ft=null,ut=x,Dt=x=0,Lt=null;ut!==null&&Dt<P.length;Dt++){ut.index>Dt?(Lt=ut,ut=null):Lt=ut.sibling;var Gt=j(k,ut,P[Dt],Q);if(Gt===null){ut===null&&(ut=Lt);break}e&&ut&&Gt.alternate===null&&n(k,ut),x=f(Gt,x,Dt),Ft===null?ft=Gt:Ft.sibling=Gt,Ft=Gt,ut=Lt}if(Dt===P.length)return s(k,ut),qt&&qi(k,Dt),ft;if(ut===null){for(;Dt<P.length;Dt++)ut=K(k,P[Dt],Q),ut!==null&&(x=f(ut,x,Dt),Ft===null?ft=ut:Ft.sibling=ut,Ft=ut);return qt&&qi(k,Dt),ft}for(ut=o(ut);Dt<P.length;Dt++)Lt=H(ut,k,Dt,P[Dt],Q),Lt!==null&&(e&&Lt.alternate!==null&&ut.delete(Lt.key===null?Dt:Lt.key),x=f(Lt,x,Dt),Ft===null?ft=Lt:Ft.sibling=Lt,Ft=Lt);return e&&ut.forEach(function(Fs){return n(k,Fs)}),qt&&qi(k,Dt),ft}function pt(k,x,P,Q){if(P==null)throw Error(a(151));for(var ft=null,Ft=null,ut=x,Dt=x=0,Lt=null,Gt=P.next();ut!==null&&!Gt.done;Dt++,Gt=P.next()){ut.index>Dt?(Lt=ut,ut=null):Lt=ut.sibling;var Fs=j(k,ut,Gt.value,Q);if(Fs===null){ut===null&&(ut=Lt);break}e&&ut&&Fs.alternate===null&&n(k,ut),x=f(Fs,x,Dt),Ft===null?ft=Fs:Ft.sibling=Fs,Ft=Fs,ut=Lt}if(Gt.done)return s(k,ut),qt&&qi(k,Dt),ft;if(ut===null){for(;!Gt.done;Dt++,Gt=P.next())Gt=K(k,Gt.value,Q),Gt!==null&&(x=f(Gt,x,Dt),Ft===null?ft=Gt:Ft.sibling=Gt,Ft=Gt);return qt&&qi(k,Dt),ft}for(ut=o(ut);!Gt.done;Dt++,Gt=P.next())Gt=H(ut,k,Dt,Gt.value,Q),Gt!==null&&(e&&Gt.alternate!==null&&ut.delete(Gt.key===null?Dt:Gt.key),x=f(Gt,x,Dt),Ft===null?ft=Gt:Ft.sibling=Gt,Ft=Gt);return e&&ut.forEach(function(hb){return n(k,hb)}),qt&&qi(k,Dt),ft}function ie(k,x,P,Q){if(typeof P=="object"&&P!==null&&P.type===W&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case B:t:{for(var ft=P.key;x!==null;){if(x.key===ft){if(ft=P.type,ft===W){if(x.tag===7){s(k,x.sibling),Q=h(x,P.props.children),Q.return=k,k=Q;break t}}else if(x.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===A&&kr(ft)===x.type){s(k,x.sibling),Q=h(x,P.props),Bo(Q,P),Q.return=k,k=Q;break t}s(k,x);break}else n(k,x);x=x.sibling}P.type===W?(Q=Or(P.props.children,k.mode,Q,P.key),Q.return=k,k=Q):(Q=bu(P.type,P.key,P.props,null,k.mode,Q),Bo(Q,P),Q.return=k,k=Q)}return p(k);case $:t:{for(ft=P.key;x!==null;){if(x.key===ft)if(x.tag===4&&x.stateNode.containerInfo===P.containerInfo&&x.stateNode.implementation===P.implementation){s(k,x.sibling),Q=h(x,P.children||[]),Q.return=k,k=Q;break t}else{s(k,x);break}else n(k,x);x=x.sibling}Q=Bh(P,k.mode,Q),Q.return=k,k=Q}return p(k);case A:return P=kr(P),ie(k,x,P,Q)}if(ye(P))return ot(k,x,P,Q);if(U(P)){if(ft=U(P),typeof ft!="function")throw Error(a(150));return P=ft.call(P),pt(k,x,P,Q)}if(typeof P.then=="function")return ie(k,x,Nu(P),Q);if(P.$$typeof===dt)return ie(k,x,Ru(k,P),Q);Ou(k,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,x!==null&&x.tag===6?(s(k,x.sibling),Q=h(x,P),Q.return=k,k=Q):(s(k,x),Q=jh(P,k.mode,Q),Q.return=k,k=Q),p(k)):s(k,x)}return function(k,x,P,Q){try{jo=0;var ft=ie(k,x,P,Q);return Aa=null,ft}catch(ut){if(ut===ba||ut===Iu)throw ut;var Ft=Tn(29,ut,null,k.mode);return Ft.lanes=Q,Ft.return=k,Ft}finally{}}}var Pr=zg(!0),jg=zg(!1),Cs=!1;function Wh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ds(e,n,s){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Yt&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=Su(e),bg(e,null,s),n}return Tu(e,o,n,s),Su(e)}function qo(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,s|=o,n.lanes=s,go(e,s)}}function ef(e,n){var s=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var h=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var p={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};f===null?h=f=p:f=f.next=p,s=s.next}while(s!==null);f===null?h=f=n:f=f.next=n}else h=f=n;s={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var nf=!1;function Ho(){if(nf){var e=Sa;if(e!==null)throw e}}function Fo(e,n,s,o){nf=!1;var h=e.updateQueue;Cs=!1;var f=h.firstBaseUpdate,p=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var D=E,z=D.next;D.next=null,p===null?f=z:p.next=z,p=D;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==p&&(E===null?G.firstBaseUpdate=z:E.next=z,G.lastBaseUpdate=D))}if(f!==null){var K=h.baseState;p=0,G=z=D=null,E=f;do{var j=E.lane&-536870913,H=j!==E.lane;if(H?(kt&j)===j:(o&j)===j){j!==0&&j===Ta&&(nf=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var ot=e,pt=E;j=n;var ie=s;switch(pt.tag){case 1:if(ot=pt.payload,typeof ot=="function"){K=ot.call(ie,K,j);break t}K=ot;break t;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=pt.payload,j=typeof ot=="function"?ot.call(ie,K,j):ot,j==null)break t;K=b({},K,j);break t;case 2:Cs=!0}}j=E.callback,j!==null&&(e.flags|=64,H&&(e.flags|=8192),H=h.callbacks,H===null?h.callbacks=[j]:H.push(j))}else H={lane:j,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(z=G=H,D=K):G=G.next=H,p|=j;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;H=E,E=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);G===null&&(D=K),h.baseState=D,h.firstBaseUpdate=z,h.lastBaseUpdate=G,f===null&&(h.shared.lanes=0),Vs|=p,e.lanes=p,e.memoizedState=K}}function Bg(e,n){if(typeof e!="function")throw Error(a(191,e));e.call(n)}function qg(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Bg(s[e],n)}var wa=O(null),xu=O(0);function Hg(e,n){e=Wi,it(xu,e),it(wa,n),Wi=e|n.baseLanes}function sf(){it(xu,Wi),it(wa,wa.current)}function rf(){Wi=xu.current,Y(wa),Y(xu)}var Sn=O(null),zn=null;function Ns(e){var n=e.alternate;it(Te,Te.current&1),it(Sn,e),zn===null&&(n===null||wa.current!==null||n.memoizedState!==null)&&(zn=e)}function af(e){it(Te,Te.current),it(Sn,e),zn===null&&(zn=e)}function Fg(e){e.tag===22?(it(Te,Te.current),it(Sn,e),zn===null&&(zn=e)):Os()}function Os(){it(Te,Te.current),it(Sn,Sn.current)}function bn(e){Y(Sn),zn===e&&(zn=null),Y(Te)}var Te=O(0);function Mu(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||fd(s)||dd(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Gi=0,It=null,ee=null,De=null,Vu=!1,Ra=!1,zr=!1,Uu=0,Go=0,Ca=null,eS=0;function ge(){throw Error(a(321))}function of(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!En(e[s],n[s]))return!1;return!0}function lf(e,n,s,o,h,f){return Gi=f,It=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,F.H=e===null||e.memoizedState===null?Cp:bf,zr=!1,f=s(o,h),zr=!1,Ra&&(f=Qg(n,s,o,h)),Gg(e),f}function Gg(e){F.H=Ko;var n=ee!==null&&ee.next!==null;if(Gi=0,De=ee=It=null,Vu=!1,Go=0,Ca=null,n)throw Error(a(300));e===null||Ne||(e=e.dependencies,e!==null&&wu(e)&&(Ne=!0))}function Qg(e,n,s,o){It=e;var h=0;do{if(Ra&&(Ca=null),Go=0,Ra=!1,25<=h)throw Error(a(301));if(h+=1,De=ee=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}F.H=Ip,f=n(s,o)}while(Ra);return f}function nS(){var e=F.H,n=e.useState()[0];return n=typeof n.then=="function"?Qo(n):n,e=e.useState()[0],(ee!==null?ee.memoizedState:null)!==e&&(It.flags|=1024),n}function uf(){var e=Uu!==0;return Uu=0,e}function cf(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function hf(e){if(Vu){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Vu=!1}Gi=0,De=ee=It=null,Ra=!1,Go=Uu=0,Ca=null}function an(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?It.memoizedState=De=e:De=De.next=e,De}function Se(){if(ee===null){var e=It.alternate;e=e!==null?e.memoizedState:null}else e=ee.next;var n=De===null?It.memoizedState:De.next;if(n!==null)De=n,ee=e;else{if(e===null)throw It.alternate===null?Error(a(467)):Error(a(310));ee=e,e={memoizedState:ee.memoizedState,baseState:ee.baseState,baseQueue:ee.baseQueue,queue:ee.queue,next:null},De===null?It.memoizedState=De=e:De=De.next=e}return De}function ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qo(e){var n=Go;return Go+=1,Ca===null&&(Ca=[]),e=kg(Ca,e,n),n=It,(De===null?n.memoizedState:De.next)===null&&(n=n.alternate,F.H=n===null||n.memoizedState===null?Cp:bf),e}function Lu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Qo(e);if(e.$$typeof===dt)return Ge(e)}throw Error(a(438,String(e)))}function ff(e){var n=null,s=It.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var o=It.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=ku(),It.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),o=0;o<e;o++)s[o]=M;return n.index++,s}function Qi(e,n){return typeof n=="function"?n(e):n}function Pu(e){var n=Se();return df(n,ee,e)}function df(e,n,s){var o=e.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=s;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var p=h.next;h.next=f.next,f.next=p}n.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{n=h.next;var E=p=null,D=null,z=n,G=!1;do{var K=z.lane&-536870913;if(K!==z.lane?(kt&K)===K:(Gi&K)===K){var j=z.revertLane;if(j===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),K===Ta&&(G=!0);else if((Gi&j)===j){z=z.next,j===Ta&&(G=!0);continue}else K={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},D===null?(E=D=K,p=f):D=D.next=K,It.lanes|=j,Vs|=j;K=z.action,zr&&s(f,K),f=z.hasEagerState?z.eagerState:s(f,K)}else j={lane:K,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},D===null?(E=D=j,p=f):D=D.next=j,It.lanes|=K,Vs|=K;z=z.next}while(z!==null&&z!==n);if(D===null?p=f:D.next=E,!En(f,e.memoizedState)&&(Ne=!0,G&&(s=Sa,s!==null)))throw s;e.memoizedState=f,e.baseState=p,e.baseQueue=D,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function mf(e){var n=Se(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=e;var o=s.dispatch,h=s.pending,f=n.memoizedState;if(h!==null){s.pending=null;var p=h=h.next;do f=e(f,p.action),p=p.next;while(p!==h);En(f,n.memoizedState)||(Ne=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),s.lastRenderedState=f}return[f,o]}function Yg(e,n,s){var o=It,h=Se(),f=qt;if(f){if(s===void 0)throw Error(a(407));s=s()}else s=n();var p=!En((ee||h).memoizedState,s);if(p&&(h.memoizedState=s,Ne=!0),h=h.queue,yf($g.bind(null,o,h,e),[e]),h.getSnapshot!==n||p||De!==null&&De.memoizedState.tag&1){if(o.flags|=2048,Ia(9,{destroy:void 0},Xg.bind(null,o,h,s,n),null),se===null)throw Error(a(349));f||(Gi&127)!==0||Kg(o,n,s)}return s}function Kg(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=It.updateQueue,n===null?(n=ku(),It.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Xg(e,n,s,o){n.value=s,n.getSnapshot=o,Zg(n)&&Jg(e)}function $g(e,n,s){return s(function(){Zg(n)&&Jg(e)})}function Zg(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!En(e,s)}catch{return!0}}function Jg(e){var n=Nr(e,2);n!==null&&mn(n,e,2)}function gf(e){var n=an();if(typeof e=="function"){var s=e;if(e=s(),zr){Dn(!0);try{s()}finally{Dn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:e},n}function Wg(e,n,s,o){return e.baseState=s,df(e,ee,typeof o=="function"?o:Qi)}function iS(e,n,s,o,h){if(Bu(e))throw Error(a(485));if(e=n.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){f.listeners.push(p)}};F.T!==null?s(!0):f.isTransition=!1,o(f),s=n.pending,s===null?(f.next=n.pending=f,tp(n,f)):(f.next=s.next,n.pending=s.next=f)}}function tp(e,n){var s=n.action,o=n.payload,h=e.state;if(n.isTransition){var f=F.T,p={};F.T=p;try{var E=s(h,o),D=F.S;D!==null&&D(p,E),ep(e,n,E)}catch(z){pf(e,n,z)}finally{f!==null&&p.types!==null&&(f.types=p.types),F.T=f}}else try{f=s(h,o),ep(e,n,f)}catch(z){pf(e,n,z)}}function ep(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(o){np(e,n,o)},function(o){return pf(e,n,o)}):np(e,n,s)}function np(e,n,s){n.status="fulfilled",n.value=s,ip(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,tp(e,s)))}function pf(e,n,s){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=s,ip(n),n=n.next;while(n!==o)}e.action=null}function ip(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function sp(e,n){return n}function rp(e,n){if(qt){var s=se.formState;if(s!==null){t:{var o=It;if(qt){if(le){e:{for(var h=le,f=Pn;h.nodeType!==8;){if(!f){h=null;break e}if(h=jn(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){le=jn(h.nextSibling),o=h.data==="F!";break t}}ws(o)}o=!1}o&&(n=s[0])}}return s=an(),s.memoizedState=s.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sp,lastRenderedState:n},s.queue=o,s=Ap.bind(null,It,o),o.dispatch=s,o=gf(!1),f=Sf.bind(null,It,!1,o.queue),o=an(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,s=iS.bind(null,It,h,f,s),h.dispatch=s,o.memoizedState=e,[n,s,!1]}function ap(e){var n=Se();return op(n,ee,e)}function op(e,n,s){if(n=df(e,n,sp)[0],e=Pu(Qi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Qo(n)}catch(p){throw p===ba?Iu:p}else o=n;n=Se();var h=n.queue,f=h.dispatch;return s!==n.memoizedState&&(It.flags|=2048,Ia(9,{destroy:void 0},sS.bind(null,h,s),null)),[o,f,e]}function sS(e,n){e.action=n}function lp(e){var n=Se(),s=ee;if(s!==null)return op(n,s,e);Se(),n=n.memoizedState,s=Se();var o=s.queue.dispatch;return s.memoizedState=e,[n,o,!1]}function Ia(e,n,s,o){return e={tag:e,create:s,deps:o,inst:n,next:null},n=It.updateQueue,n===null&&(n=ku(),It.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(o=s.next,s.next=e,e.next=o,n.lastEffect=e),e}function up(){return Se().memoizedState}function zu(e,n,s,o){var h=an();It.flags|=e,h.memoizedState=Ia(1|n,{destroy:void 0},s,o===void 0?null:o)}function ju(e,n,s,o){var h=Se();o=o===void 0?null:o;var f=h.memoizedState.inst;ee!==null&&o!==null&&of(o,ee.memoizedState.deps)?h.memoizedState=Ia(n,f,s,o):(It.flags|=e,h.memoizedState=Ia(1|n,f,s,o))}function cp(e,n){zu(8390656,8,e,n)}function yf(e,n){ju(2048,8,e,n)}function rS(e){It.flags|=4;var n=It.updateQueue;if(n===null)n=ku(),It.updateQueue=n,n.events=[e];else{var s=n.events;s===null?n.events=[e]:s.push(e)}}function hp(e){var n=Se().memoizedState;return rS({ref:n,nextImpl:e}),function(){if((Yt&2)!==0)throw Error(a(440));return n.impl.apply(void 0,arguments)}}function fp(e,n){return ju(4,2,e,n)}function dp(e,n){return ju(4,4,e,n)}function mp(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function gp(e,n,s){s=s!=null?s.concat([e]):null,ju(4,4,mp.bind(null,n,e),s)}function _f(){}function pp(e,n){var s=Se();n=n===void 0?null:n;var o=s.memoizedState;return n!==null&&of(n,o[1])?o[0]:(s.memoizedState=[e,n],e)}function yp(e,n){var s=Se();n=n===void 0?null:n;var o=s.memoizedState;if(n!==null&&of(n,o[1]))return o[0];if(o=e(),zr){Dn(!0);try{e()}finally{Dn(!1)}}return s.memoizedState=[o,n],o}function vf(e,n,s){return s===void 0||(Gi&1073741824)!==0&&(kt&261930)===0?e.memoizedState=n:(e.memoizedState=s,e=_y(),It.lanes|=e,Vs|=e,s)}function _p(e,n,s,o){return En(s,n)?s:wa.current!==null?(e=vf(e,s,o),En(e,n)||(Ne=!0),e):(Gi&42)===0||(Gi&1073741824)!==0&&(kt&261930)===0?(Ne=!0,e.memoizedState=s):(e=_y(),It.lanes|=e,Vs|=e,n)}function vp(e,n,s,o,h){var f=nt.p;nt.p=f!==0&&8>f?f:8;var p=F.T,E={};F.T=E,Sf(e,!1,n,s);try{var D=h(),z=F.S;if(z!==null&&z(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var G=tS(D,o);Yo(e,n,G,Rn(e))}else Yo(e,n,o,Rn(e))}catch(K){Yo(e,n,{then:function(){},status:"rejected",reason:K},Rn())}finally{nt.p=f,p!==null&&E.types!==null&&(p.types=E.types),F.T=p}}function aS(){}function Ef(e,n,s,o){if(e.tag!==5)throw Error(a(476));var h=Ep(e).queue;vp(e,h,n,ht,s===null?aS:function(){return Tp(e),s(o)})}function Ep(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:ht},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Tp(e){var n=Ep(e);n.next===null&&(n=e.alternate.memoizedState),Yo(e,n.next.queue,{},Rn())}function Tf(){return Ge(cl)}function Sp(){return Se().memoizedState}function bp(){return Se().memoizedState}function oS(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=Rn();e=Is(s);var o=Ds(n,e,s);o!==null&&(mn(o,n,s),qo(o,n,s)),n={cache:Xh()},e.payload=n;return}n=n.return}}function lS(e,n,s){var o=Rn();s={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Bu(e)?wp(n,s):(s=Ph(e,n,s,o),s!==null&&(mn(s,e,o),Rp(s,n,o)))}function Ap(e,n,s){var o=Rn();Yo(e,n,s,o)}function Yo(e,n,s,o){var h={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Bu(e))wp(n,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var p=n.lastRenderedState,E=f(p,s);if(h.hasEagerState=!0,h.eagerState=E,En(E,p))return Tu(e,n,h,0),se===null&&Eu(),!1}catch{}finally{}if(s=Ph(e,n,h,o),s!==null)return mn(s,e,o),Rp(s,n,o),!0}return!1}function Sf(e,n,s,o){if(o={lane:2,revertLane:td(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Bu(e)){if(n)throw Error(a(479))}else n=Ph(e,s,o,2),n!==null&&mn(n,e,2)}function Bu(e){var n=e.alternate;return e===It||n!==null&&n===It}function wp(e,n){Ra=Vu=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function Rp(e,n,s){if((s&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,s|=o,n.lanes=s,go(e,s)}}var Ko={readContext:Ge,use:Lu,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useLayoutEffect:ge,useInsertionEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useSyncExternalStore:ge,useId:ge,useHostTransitionStatus:ge,useFormState:ge,useActionState:ge,useOptimistic:ge,useMemoCache:ge,useCacheRefresh:ge};Ko.useEffectEvent=ge;var Cp={readContext:Ge,use:Lu,useCallback:function(e,n){return an().memoizedState=[e,n===void 0?null:n],e},useContext:Ge,useEffect:cp,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,zu(4194308,4,mp.bind(null,n,e),s)},useLayoutEffect:function(e,n){return zu(4194308,4,e,n)},useInsertionEffect:function(e,n){zu(4,2,e,n)},useMemo:function(e,n){var s=an();n=n===void 0?null:n;var o=e();if(zr){Dn(!0);try{e()}finally{Dn(!1)}}return s.memoizedState=[o,n],o},useReducer:function(e,n,s){var o=an();if(s!==void 0){var h=s(n);if(zr){Dn(!0);try{s(n)}finally{Dn(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=lS.bind(null,It,e),[o.memoizedState,e]},useRef:function(e){var n=an();return e={current:e},n.memoizedState=e},useState:function(e){e=gf(e);var n=e.queue,s=Ap.bind(null,It,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:_f,useDeferredValue:function(e,n){var s=an();return vf(s,e,n)},useTransition:function(){var e=gf(!1);return e=vp.bind(null,It,e.queue,!0,!1),an().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var o=It,h=an();if(qt){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),se===null)throw Error(a(349));(kt&127)!==0||Kg(o,n,s)}h.memoizedState=s;var f={value:s,getSnapshot:n};return h.queue=f,cp($g.bind(null,o,f,e),[e]),o.flags|=2048,Ia(9,{destroy:void 0},Xg.bind(null,o,f,s,n),null),s},useId:function(){var e=an(),n=se.identifierPrefix;if(qt){var s=Ti,o=Ei;s=(o&~(1<<32-ve(o)-1)).toString(32)+s,n="_"+n+"R_"+s,s=Uu++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=eS++,n="_"+n+"r_"+s.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Tf,useFormState:rp,useActionState:rp,useOptimistic:function(e){var n=an();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=Sf.bind(null,It,!0,s),s.dispatch=n,[e,n]},useMemoCache:ff,useCacheRefresh:function(){return an().memoizedState=oS.bind(null,It)},useEffectEvent:function(e){var n=an(),s={impl:e};return n.memoizedState=s,function(){if((Yt&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}},bf={readContext:Ge,use:Lu,useCallback:pp,useContext:Ge,useEffect:yf,useImperativeHandle:gp,useInsertionEffect:fp,useLayoutEffect:dp,useMemo:yp,useReducer:Pu,useRef:up,useState:function(){return Pu(Qi)},useDebugValue:_f,useDeferredValue:function(e,n){var s=Se();return _p(s,ee.memoizedState,e,n)},useTransition:function(){var e=Pu(Qi)[0],n=Se().memoizedState;return[typeof e=="boolean"?e:Qo(e),n]},useSyncExternalStore:Yg,useId:Sp,useHostTransitionStatus:Tf,useFormState:ap,useActionState:ap,useOptimistic:function(e,n){var s=Se();return Wg(s,ee,e,n)},useMemoCache:ff,useCacheRefresh:bp};bf.useEffectEvent=hp;var Ip={readContext:Ge,use:Lu,useCallback:pp,useContext:Ge,useEffect:yf,useImperativeHandle:gp,useInsertionEffect:fp,useLayoutEffect:dp,useMemo:yp,useReducer:mf,useRef:up,useState:function(){return mf(Qi)},useDebugValue:_f,useDeferredValue:function(e,n){var s=Se();return ee===null?vf(s,e,n):_p(s,ee.memoizedState,e,n)},useTransition:function(){var e=mf(Qi)[0],n=Se().memoizedState;return[typeof e=="boolean"?e:Qo(e),n]},useSyncExternalStore:Yg,useId:Sp,useHostTransitionStatus:Tf,useFormState:lp,useActionState:lp,useOptimistic:function(e,n){var s=Se();return ee!==null?Wg(s,ee,e,n):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:ff,useCacheRefresh:bp};Ip.useEffectEvent=hp;function Af(e,n,s,o){n=e.memoizedState,s=s(o,n),s=s==null?n:b({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var wf={enqueueSetState:function(e,n,s){e=e._reactInternals;var o=Rn(),h=Is(o);h.payload=n,s!=null&&(h.callback=s),n=Ds(e,h,o),n!==null&&(mn(n,e,o),qo(n,e,o))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var o=Rn(),h=Is(o);h.tag=1,h.payload=n,s!=null&&(h.callback=s),n=Ds(e,h,o),n!==null&&(mn(n,e,o),qo(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=Rn(),o=Is(s);o.tag=2,n!=null&&(o.callback=n),n=Ds(e,o,s),n!==null&&(mn(n,e,s),qo(n,e,s))}};function Dp(e,n,s,o,h,f,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,p):n.prototype&&n.prototype.isPureReactComponent?!Vo(s,o)||!Vo(h,f):!0}function Np(e,n,s,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,o),n.state!==e&&wf.enqueueReplaceState(n,n.state,null)}function jr(e,n){var s=n;if("ref"in n){s={};for(var o in n)o!=="ref"&&(s[o]=n[o])}if(e=e.defaultProps){s===n&&(s=b({},s));for(var h in e)s[h]===void 0&&(s[h]=e[h])}return s}function Op(e){vu(e)}function xp(e){console.error(e)}function Mp(e){vu(e)}function qu(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Vp(e,n,s){try{var o=e.onCaughtError;o(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Rf(e,n,s){return s=Is(s),s.tag=3,s.payload={element:null},s.callback=function(){qu(e,n)},s}function Up(e){return e=Is(e),e.tag=3,e}function kp(e,n,s,o){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){Vp(n,s,o)}}var p=s.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Vp(n,s,o),typeof h!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function uS(e,n,s,o,h){if(s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=s.alternate,n!==null&&Ea(n,s,h,!0),s=Sn.current,s!==null){switch(s.tag){case 31:case 13:return zn===null?tc():s.alternate===null&&pe===0&&(pe=3),s.flags&=-257,s.flags|=65536,s.lanes=h,o===Du?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([o]):n.add(o),Zf(e,o,h)),!1;case 22:return s.flags|=65536,o===Du?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([o]):s.add(o)),Zf(e,o,h)),!1}throw Error(a(435,s.tag))}return Zf(e,o,h),tc(),!1}if(qt)return n=Sn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==Fh&&(e=Error(a(422),{cause:o}),Lo(Un(e,s)))):(o!==Fh&&(n=Error(a(423),{cause:o}),Lo(Un(n,s))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Un(o,s),h=Rf(e.stateNode,o,h),ef(e,h),pe!==4&&(pe=2)),!1;var f=Error(a(520),{cause:o});if(f=Un(f,s),nl===null?nl=[f]:nl.push(f),pe!==4&&(pe=2),n===null)return!0;o=Un(o,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=h&-h,s.lanes|=e,e=Rf(s.stateNode,o,e),ef(s,e),!1;case 1:if(n=s.type,f=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Us===null||!Us.has(f))))return s.flags|=65536,h&=-h,s.lanes|=h,h=Up(h),kp(h,e,s,o),ef(s,h),!1}s=s.return}while(s!==null);return!1}var Cf=Error(a(461)),Ne=!1;function Qe(e,n,s,o){n.child=e===null?jg(n,null,s,o):Pr(n,e.child,s,o)}function Lp(e,n,s,o,h){s=s.render;var f=n.ref;if("ref"in o){var p={};for(var E in o)E!=="ref"&&(p[E]=o[E])}else p=o;return Vr(n),o=lf(e,n,s,p,f,h),E=uf(),e!==null&&!Ne?(cf(e,n,h),Yi(e,n,h)):(qt&&E&&qh(n),n.flags|=1,Qe(e,n,o,h),n.child)}function Pp(e,n,s,o,h){if(e===null){var f=s.type;return typeof f=="function"&&!zh(f)&&f.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=f,zp(e,n,f,o,h)):(e=bu(s.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!Uf(e,h)){var p=f.memoizedProps;if(s=s.compare,s=s!==null?s:Vo,s(p,o)&&e.ref===n.ref)return Yi(e,n,h)}return n.flags|=1,e=Bi(f,o),e.ref=n.ref,e.return=n,n.child=e}function zp(e,n,s,o,h){if(e!==null){var f=e.memoizedProps;if(Vo(f,o)&&e.ref===n.ref)if(Ne=!1,n.pendingProps=o=f,Uf(e,h))(e.flags&131072)!==0&&(Ne=!0);else return n.lanes=e.lanes,Yi(e,n,h)}return If(e,n,s,o,h)}function jp(e,n,s,o){var h=o.children,f=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|s:s,e!==null){for(o=n.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~f}else o=0,n.child=null;return Bp(e,n,f,s,o)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Cu(n,f!==null?f.cachePool:null),f!==null?Hg(n,f):sf(),Fg(n);else return o=n.lanes=536870912,Bp(e,n,f!==null?f.baseLanes|s:s,s,o)}else f!==null?(Cu(n,f.cachePool),Hg(n,f),Os(),n.memoizedState=null):(e!==null&&Cu(n,null),sf(),Os());return Qe(e,n,h,s),n.child}function Xo(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Bp(e,n,s,o,h){var f=Zh();return f=f===null?null:{parent:Ie._currentValue,pool:f},n.memoizedState={baseLanes:s,cachePool:f},e!==null&&Cu(n,null),sf(),Fg(n),e!==null&&Ea(e,n,o,!0),n.childLanes=h,null}function Hu(e,n){return n=Gu({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function qp(e,n,s){return Pr(n,e.child,null,s),e=Hu(n,n.pendingProps),e.flags|=2,bn(n),n.memoizedState=null,e}function cS(e,n,s){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(qt){if(o.mode==="hidden")return e=Hu(n,o),n.lanes=536870912,Xo(null,e);if(af(n),(e=le)?(e=t_(e,Pn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:bs!==null?{id:Ei,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},s=wg(e),s.return=n,n.child=s,Fe=n,le=null)):e=null,e===null)throw ws(n);return n.lanes=536870912,null}return Hu(n,o)}var f=e.memoizedState;if(f!==null){var p=f.dehydrated;if(af(n),h)if(n.flags&256)n.flags&=-257,n=qp(e,n,s);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(a(558));else if(Ne||Ea(e,n,s,!1),h=(s&e.childLanes)!==0,Ne||h){if(o=se,o!==null&&(p=po(o,s),p!==0&&p!==f.retryLane))throw f.retryLane=p,Nr(e,p),mn(o,e,p),Cf;tc(),n=qp(e,n,s)}else e=f.treeContext,le=jn(p.nextSibling),Fe=n,qt=!0,As=null,Pn=!1,e!==null&&Ig(n,e),n=Hu(n,o),n.flags|=4096;return n}return e=Bi(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Fu(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(e===null||e.ref!==s)&&(n.flags|=4194816)}}function If(e,n,s,o,h){return Vr(n),s=lf(e,n,s,o,void 0,h),o=uf(),e!==null&&!Ne?(cf(e,n,h),Yi(e,n,h)):(qt&&o&&qh(n),n.flags|=1,Qe(e,n,s,h),n.child)}function Hp(e,n,s,o,h,f){return Vr(n),n.updateQueue=null,s=Qg(n,o,s,h),Gg(e),o=uf(),e!==null&&!Ne?(cf(e,n,f),Yi(e,n,f)):(qt&&o&&qh(n),n.flags|=1,Qe(e,n,s,f),n.child)}function Fp(e,n,s,o,h){if(Vr(n),n.stateNode===null){var f=pa,p=s.contextType;typeof p=="object"&&p!==null&&(f=Ge(p)),f=new s(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=wf,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},Wh(n),p=s.contextType,f.context=typeof p=="object"&&p!==null?Ge(p):pa,f.state=n.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Af(n,s,p,o),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(p=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),p!==f.state&&wf.enqueueReplaceState(f,f.state,null),Fo(n,o,f,h),Ho(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var E=n.memoizedProps,D=jr(s,E);f.props=D;var z=f.context,G=s.contextType;p=pa,typeof G=="object"&&G!==null&&(p=Ge(G));var K=s.getDerivedStateFromProps;G=typeof K=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||z!==p)&&Np(n,f,o,p),Cs=!1;var j=n.memoizedState;f.state=j,Fo(n,o,f,h),Ho(),z=n.memoizedState,E||j!==z||Cs?(typeof K=="function"&&(Af(n,s,K,o),z=n.memoizedState),(D=Cs||Dp(n,s,D,o,j,z,p))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=z),f.props=o,f.state=z,f.context=p,o=D):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,tf(e,n),p=n.memoizedProps,G=jr(s,p),f.props=G,K=n.pendingProps,j=f.context,z=s.contextType,D=pa,typeof z=="object"&&z!==null&&(D=Ge(z)),E=s.getDerivedStateFromProps,(z=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==K||j!==D)&&Np(n,f,o,D),Cs=!1,j=n.memoizedState,f.state=j,Fo(n,o,f,h),Ho();var H=n.memoizedState;p!==K||j!==H||Cs||e!==null&&e.dependencies!==null&&wu(e.dependencies)?(typeof E=="function"&&(Af(n,s,E,o),H=n.memoizedState),(G=Cs||Dp(n,s,G,o,j,H,D)||e!==null&&e.dependencies!==null&&wu(e.dependencies))?(z||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,H,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,H,D)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||p===e.memoizedProps&&j===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&j===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=H),f.props=o,f.state=H,f.context=D,o=G):(typeof f.componentDidUpdate!="function"||p===e.memoizedProps&&j===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&j===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,Fu(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,s=o&&typeof s.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=Pr(n,e.child,null,h),n.child=Pr(n,null,s,h)):Qe(e,n,s,h),n.memoizedState=f.state,e=n.child):e=Yi(e,n,h),e}function Gp(e,n,s,o){return xr(),n.flags|=256,Qe(e,n,s,o),n.child}var Df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nf(e){return{baseLanes:e,cachePool:Vg()}}function Of(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=wn),e}function Qp(e,n,s){var o=n.pendingProps,h=!1,f=(n.flags&128)!==0,p;if((p=f)||(p=e!==null&&e.memoizedState===null?!1:(Te.current&2)!==0),p&&(h=!0,n.flags&=-129),p=(n.flags&32)!==0,n.flags&=-33,e===null){if(qt){if(h?Ns(n):Os(),(e=le)?(e=t_(e,Pn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:bs!==null?{id:Ei,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},s=wg(e),s.return=n,n.child=s,Fe=n,le=null)):e=null,e===null)throw ws(n);return dd(e)?n.lanes=32:n.lanes=536870912,null}var E=o.children;return o=o.fallback,h?(Os(),h=n.mode,E=Gu({mode:"hidden",children:E},h),o=Or(o,h,s,null),E.return=n,o.return=n,E.sibling=o,n.child=E,o=n.child,o.memoizedState=Nf(s),o.childLanes=Of(e,p,s),n.memoizedState=Df,Xo(null,o)):(Ns(n),xf(n,E))}var D=e.memoizedState;if(D!==null&&(E=D.dehydrated,E!==null)){if(f)n.flags&256?(Ns(n),n.flags&=-257,n=Mf(e,n,s)):n.memoizedState!==null?(Os(),n.child=e.child,n.flags|=128,n=null):(Os(),E=o.fallback,h=n.mode,o=Gu({mode:"visible",children:o.children},h),E=Or(E,h,s,null),E.flags|=2,o.return=n,E.return=n,o.sibling=E,n.child=o,Pr(n,e.child,null,s),o=n.child,o.memoizedState=Nf(s),o.childLanes=Of(e,p,s),n.memoizedState=Df,n=Xo(null,o));else if(Ns(n),dd(E)){if(p=E.nextSibling&&E.nextSibling.dataset,p)var z=p.dgst;p=z,o=Error(a(419)),o.stack="",o.digest=p,Lo({value:o,source:null,stack:null}),n=Mf(e,n,s)}else if(Ne||Ea(e,n,s,!1),p=(s&e.childLanes)!==0,Ne||p){if(p=se,p!==null&&(o=po(p,s),o!==0&&o!==D.retryLane))throw D.retryLane=o,Nr(e,o),mn(p,e,o),Cf;fd(E)||tc(),n=Mf(e,n,s)}else fd(E)?(n.flags|=192,n.child=e.child,n=null):(e=D.treeContext,le=jn(E.nextSibling),Fe=n,qt=!0,As=null,Pn=!1,e!==null&&Ig(n,e),n=xf(n,o.children),n.flags|=4096);return n}return h?(Os(),E=o.fallback,h=n.mode,D=e.child,z=D.sibling,o=Bi(D,{mode:"hidden",children:o.children}),o.subtreeFlags=D.subtreeFlags&65011712,z!==null?E=Bi(z,E):(E=Or(E,h,s,null),E.flags|=2),E.return=n,o.return=n,o.sibling=E,n.child=o,Xo(null,o),o=n.child,E=e.child.memoizedState,E===null?E=Nf(s):(h=E.cachePool,h!==null?(D=Ie._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=Vg(),E={baseLanes:E.baseLanes|s,cachePool:h}),o.memoizedState=E,o.childLanes=Of(e,p,s),n.memoizedState=Df,Xo(e.child,o)):(Ns(n),s=e.child,e=s.sibling,s=Bi(s,{mode:"visible",children:o.children}),s.return=n,s.sibling=null,e!==null&&(p=n.deletions,p===null?(n.deletions=[e],n.flags|=16):p.push(e)),n.child=s,n.memoizedState=null,s)}function xf(e,n){return n=Gu({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Gu(e,n){return e=Tn(22,e,null,n),e.lanes=0,e}function Mf(e,n,s){return Pr(n,e.child,null,s),e=xf(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Yp(e,n,s){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Yh(e.return,n,s)}function Vf(e,n,s,o,h,f){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:h,treeForkCount:f}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=s,p.tailMode=h,p.treeForkCount=f)}function Kp(e,n,s){var o=n.pendingProps,h=o.revealOrder,f=o.tail;o=o.children;var p=Te.current,E=(p&2)!==0;if(E?(p=p&1|2,n.flags|=128):p&=1,it(Te,p),Qe(e,n,o,s),o=qt?ko:0,!E&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yp(e,s,n);else if(e.tag===19)Yp(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(s=n.child,h=null;s!==null;)e=s.alternate,e!==null&&Mu(e)===null&&(h=s),s=s.sibling;s=h,s===null?(h=n.child,n.child=null):(h=s.sibling,s.sibling=null),Vf(n,!1,h,s,f,o);break;case"backwards":case"unstable_legacy-backwards":for(s=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&Mu(e)===null){n.child=h;break}e=h.sibling,h.sibling=s,s=h,h=e}Vf(n,!0,s,null,f,o);break;case"together":Vf(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Yi(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),Vs|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(Ea(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,s=Bi(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Bi(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Uf(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&wu(e)))}function hS(e,n,s){switch(n.tag){case 3:_e(n,n.stateNode.containerInfo),Rs(n,Ie,e.memoizedState.cache),xr();break;case 27:case 5:Ui(n);break;case 4:_e(n,n.stateNode.containerInfo);break;case 10:Rs(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,af(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ns(n),n.flags|=128,null):(s&n.child.childLanes)!==0?Qp(e,n,s):(Ns(n),e=Yi(e,n,s),e!==null?e.sibling:null);Ns(n);break;case 19:var h=(e.flags&128)!==0;if(o=(s&n.childLanes)!==0,o||(Ea(e,n,s,!1),o=(s&n.childLanes)!==0),h){if(o)return Kp(e,n,s);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),it(Te,Te.current),o)break;return null;case 22:return n.lanes=0,jp(e,n,s,n.pendingProps);case 24:Rs(n,Ie,e.memoizedState.cache)}return Yi(e,n,s)}function Xp(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)Ne=!0;else{if(!Uf(e,s)&&(n.flags&128)===0)return Ne=!1,hS(e,n,s);Ne=(e.flags&131072)!==0}else Ne=!1,qt&&(n.flags&1048576)!==0&&Cg(n,ko,n.index);switch(n.lanes=0,n.tag){case 16:t:{var o=n.pendingProps;if(e=kr(n.elementType),n.type=e,typeof e=="function")zh(e)?(o=jr(e,o),n.tag=1,n=Fp(null,n,e,o,s)):(n.tag=0,n=If(null,n,e,o,s));else{if(e!=null){var h=e.$$typeof;if(h===Nt){n.tag=11,n=Lp(null,n,e,o,s);break t}else if(h===I){n.tag=14,n=Pp(null,n,e,o,s);break t}}throw n=re(e)||e,Error(a(306,n,""))}}return n;case 0:return If(e,n,n.type,n.pendingProps,s);case 1:return o=n.type,h=jr(o,n.pendingProps),Fp(e,n,o,h,s);case 3:t:{if(_e(n,n.stateNode.containerInfo),e===null)throw Error(a(387));o=n.pendingProps;var f=n.memoizedState;h=f.element,tf(e,n),Fo(n,o,null,s);var p=n.memoizedState;if(o=p.cache,Rs(n,Ie,o),o!==f.cache&&Kh(n,[Ie],s,!0),Ho(),o=p.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:p.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Gp(e,n,o,s);break t}else if(o!==h){h=Un(Error(a(424)),n),Lo(h),n=Gp(e,n,o,s);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(le=jn(e.firstChild),Fe=n,qt=!0,As=null,Pn=!0,s=jg(n,null,o,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(xr(),o===h){n=Yi(e,n,s);break t}Qe(e,n,o,s)}n=n.child}return n;case 26:return Fu(e,n),e===null?(s=a_(n.type,null,n.pendingProps,null))?n.memoizedState=s:qt||(s=n.type,e=n.pendingProps,o=oc(wt.current).createElement(s),o[we]=n,o[Pe]=e,Ye(o,s,e),Re(o),n.stateNode=o):n.memoizedState=a_(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Ui(n),e===null&&qt&&(o=n.stateNode=i_(n.type,n.pendingProps,wt.current),Fe=n,Pn=!0,h=le,zs(n.type)?(md=h,le=jn(o.firstChild)):le=h),Qe(e,n,n.pendingProps.children,s),Fu(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&qt&&((h=o=le)&&(o=BS(o,n.type,n.pendingProps,Pn),o!==null?(n.stateNode=o,Fe=n,le=jn(o.firstChild),Pn=!1,h=!0):h=!1),h||ws(n)),Ui(n),h=n.type,f=n.pendingProps,p=e!==null?e.memoizedProps:null,o=f.children,ud(h,f)?o=null:p!==null&&ud(h,p)&&(n.flags|=32),n.memoizedState!==null&&(h=lf(e,n,nS,null,null,s),cl._currentValue=h),Fu(e,n),Qe(e,n,o,s),n.child;case 6:return e===null&&qt&&((e=s=le)&&(s=qS(s,n.pendingProps,Pn),s!==null?(n.stateNode=s,Fe=n,le=null,e=!0):e=!1),e||ws(n)),null;case 13:return Qp(e,n,s);case 4:return _e(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Pr(n,null,o,s):Qe(e,n,o,s),n.child;case 11:return Lp(e,n,n.type,n.pendingProps,s);case 7:return Qe(e,n,n.pendingProps,s),n.child;case 8:return Qe(e,n,n.pendingProps.children,s),n.child;case 12:return Qe(e,n,n.pendingProps.children,s),n.child;case 10:return o=n.pendingProps,Rs(n,n.type,o.value),Qe(e,n,o.children,s),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,Vr(n),h=Ge(h),o=o(h),n.flags|=1,Qe(e,n,o,s),n.child;case 14:return Pp(e,n,n.type,n.pendingProps,s);case 15:return zp(e,n,n.type,n.pendingProps,s);case 19:return Kp(e,n,s);case 31:return cS(e,n,s);case 22:return jp(e,n,s,n.pendingProps);case 24:return Vr(n),o=Ge(Ie),e===null?(h=Zh(),h===null&&(h=se,f=Xh(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=s),h=f),n.memoizedState={parent:o,cache:h},Wh(n),Rs(n,Ie,h)):((e.lanes&s)!==0&&(tf(e,n),Fo(n,null,null,s),Ho()),h=e.memoizedState,f=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Rs(n,Ie,o)):(o=f.cache,Rs(n,Ie,o),o!==h.cache&&Kh(n,[Ie],s,!0))),Qe(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Ki(e){e.flags|=4}function kf(e,n,s,o,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(Sy())e.flags|=8192;else throw Lr=Du,Jh}else e.flags&=-16777217}function $p(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!h_(n))if(Sy())e.flags|=8192;else throw Lr=Du,Jh}function Qu(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Jl():536870912,e.lanes|=n,xa|=n)}function $o(e,n){if(!qt)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ue(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,o=0;if(n)for(var h=e.child;h!==null;)s|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)s|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=s,n}function fS(e,n,s){var o=n.pendingProps;switch(Hh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ue(n),null;case 1:return ue(n),null;case 3:return s=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Fi(Ie),ae(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(va(n)?Ki(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Gh())),ue(n),null;case 26:var h=n.type,f=n.memoizedState;return e===null?(Ki(n),f!==null?(ue(n),$p(n,f)):(ue(n),kf(n,h,null,o,s))):f?f!==e.memoizedState?(Ki(n),ue(n),$p(n,f)):(ue(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&Ki(n),ue(n),kf(n,h,e,o,s)),null;case 27:if(cs(n),s=wt.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Ki(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return ue(n),null}e=st.current,va(n)?Dg(n):(e=i_(h,o,s),n.stateNode=e,Ki(n))}return ue(n),null;case 5:if(cs(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Ki(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return ue(n),null}if(f=st.current,va(n))Dg(n);else{var p=oc(wt.current);switch(f){case 1:f=p.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=p.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=p.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?p.createElement("select",{is:o.is}):p.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?p.createElement(h,{is:o.is}):p.createElement(h)}}f[we]=n,f[Pe]=o;t:for(p=n.child;p!==null;){if(p.tag===5||p.tag===6)f.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break t;for(;p.sibling===null;){if(p.return===null||p.return===n)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}n.stateNode=f;t:switch(Ye(f,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&Ki(n)}}return ue(n),kf(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,s),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Ki(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(a(166));if(e=wt.current,va(n)){if(e=n.stateNode,s=n.memoizedProps,o=null,h=Fe,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[we]=n,e=!!(e.nodeValue===s||o!==null&&o.suppressHydrationWarning===!0||Qy(e.nodeValue,s)),e||ws(n,!0)}else e=oc(e).createTextNode(o),e[we]=n,n.stateNode=e}return ue(n),null;case 31:if(s=n.memoizedState,e===null||e.memoizedState!==null){if(o=va(n),s!==null){if(e===null){if(!o)throw Error(a(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[we]=n}else xr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ue(n),e=!1}else s=Gh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return n.flags&256?(bn(n),n):(bn(n),null);if((n.flags&128)!==0)throw Error(a(558))}return ue(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=va(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(a(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[we]=n}else xr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ue(n),h=!1}else h=Gh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(bn(n),n):(bn(n),null)}return bn(n),(n.flags&128)!==0?(n.lanes=s,n):(s=o!==null,e=e!==null&&e.memoizedState!==null,s&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)),s!==e&&s&&(n.child.flags|=8192),Qu(n,n.updateQueue),ue(n),null);case 4:return ae(),e===null&&sd(n.stateNode.containerInfo),ue(n),null;case 10:return Fi(n.type),ue(n),null;case 19:if(Y(Te),o=n.memoizedState,o===null)return ue(n),null;if(h=(n.flags&128)!==0,f=o.rendering,f===null)if(h)$o(o,!1);else{if(pe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=Mu(e),f!==null){for(n.flags|=128,$o(o,!1),e=f.updateQueue,n.updateQueue=e,Qu(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)Ag(s,e),s=s.sibling;return it(Te,Te.current&1|2),qt&&qi(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&Kt()>Zu&&(n.flags|=128,h=!0,$o(o,!1),n.lanes=4194304)}else{if(!h)if(e=Mu(f),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,Qu(n,e),$o(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!qt)return ue(n),null}else 2*Kt()-o.renderingStartTime>Zu&&s!==536870912&&(n.flags|=128,h=!0,$o(o,!1),n.lanes=4194304);o.isBackwards?(f.sibling=n.child,n.child=f):(e=o.last,e!==null?e.sibling=f:n.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Kt(),e.sibling=null,s=Te.current,it(Te,h?s&1|2:s&1),qt&&qi(n,o.treeForkCount),e):(ue(n),null);case 22:case 23:return bn(n),rf(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(s&536870912)!==0&&(n.flags&128)===0&&(ue(n),n.subtreeFlags&6&&(n.flags|=8192)):ue(n),s=n.updateQueue,s!==null&&Qu(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==s&&(n.flags|=2048),e!==null&&Y(Ur),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Fi(Ie),ue(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function dS(e,n){switch(Hh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Fi(Ie),ae(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return cs(n),null;case 31:if(n.memoizedState!==null){if(bn(n),n.alternate===null)throw Error(a(340));xr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(bn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));xr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Y(Te),null;case 4:return ae(),null;case 10:return Fi(n.type),null;case 22:case 23:return bn(n),rf(),e!==null&&Y(Ur),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Fi(Ie),null;case 25:return null;default:return null}}function Zp(e,n){switch(Hh(n),n.tag){case 3:Fi(Ie),ae();break;case 26:case 27:case 5:cs(n);break;case 4:ae();break;case 31:n.memoizedState!==null&&bn(n);break;case 13:bn(n);break;case 19:Y(Te);break;case 10:Fi(n.type);break;case 22:case 23:bn(n),rf(),e!==null&&Y(Ur);break;case 24:Fi(Ie)}}function Zo(e,n){try{var s=n.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var h=o.next;s=h;do{if((s.tag&e)===e){o=void 0;var f=s.create,p=s.inst;o=f(),p.destroy=o}s=s.next}while(s!==h)}}catch(E){Wt(n,n.return,E)}}function xs(e,n,s){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var p=o.inst,E=p.destroy;if(E!==void 0){p.destroy=void 0,h=n;var D=s,z=E;try{z()}catch(G){Wt(h,D,G)}}}o=o.next}while(o!==f)}}catch(G){Wt(n,n.return,G)}}function Jp(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{qg(n,s)}catch(o){Wt(e,e.return,o)}}}function Wp(e,n,s){s.props=jr(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(o){Wt(e,n,o)}}function Jo(e,n){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof s=="function"?e.refCleanup=s(o):s.current=o}}catch(h){Wt(e,n,h)}}function Si(e,n){var s=e.ref,o=e.refCleanup;if(s!==null)if(typeof o=="function")try{o()}catch(h){Wt(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){Wt(e,n,h)}else s.current=null}function ty(e){var n=e.type,s=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break t;case"img":s.src?o.src=s.src:s.srcSet&&(o.srcset=s.srcSet)}}catch(h){Wt(e,e.return,h)}}function Lf(e,n,s){try{var o=e.stateNode;US(o,e.type,s,n),o[Pe]=n}catch(h){Wt(e,e.return,h)}}function ey(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&zs(e.type)||e.tag===4}function Pf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||ey(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&zs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zf(e,n,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(e),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Yn));else if(o!==4&&(o===27&&zs(e.type)&&(s=e.stateNode,n=null),e=e.child,e!==null))for(zf(e,n,s),e=e.sibling;e!==null;)zf(e,n,s),e=e.sibling}function Yu(e,n,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(o!==4&&(o===27&&zs(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Yu(e,n,s),e=e.sibling;e!==null;)Yu(e,n,s),e=e.sibling}function ny(e){var n=e.stateNode,s=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);Ye(n,o,s),n[we]=e,n[Pe]=s}catch(f){Wt(e,e.return,f)}}var Xi=!1,Oe=!1,jf=!1,iy=typeof WeakSet=="function"?WeakSet:Set,je=null;function mS(e,n){if(e=e.containerInfo,od=mc,e=gg(e),xh(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else t:{s=(s=e.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break t}var p=0,E=-1,D=-1,z=0,G=0,K=e,j=null;e:for(;;){for(var H;K!==s||h!==0&&K.nodeType!==3||(E=p+h),K!==f||o!==0&&K.nodeType!==3||(D=p+o),K.nodeType===3&&(p+=K.nodeValue.length),(H=K.firstChild)!==null;)j=K,K=H;for(;;){if(K===e)break e;if(j===s&&++z===h&&(E=p),j===f&&++G===o&&(D=p),(H=K.nextSibling)!==null)break;K=j,j=K.parentNode}K=H}s=E===-1||D===-1?null:{start:E,end:D}}else s=null}s=s||{start:0,end:0}}else s=null;for(ld={focusedElem:e,selectionRange:s},mc=!1,je=n;je!==null;)if(n=je,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,je=e;else for(;je!==null;){switch(n=je,f=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)h=e[s],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,s=n,h=f.memoizedProps,f=f.memoizedState,o=s.stateNode;try{var ot=jr(s.type,h);e=o.getSnapshotBeforeUpdate(ot,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(pt){Wt(s,s.return,pt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)hd(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":hd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=n.sibling,e!==null){e.return=n.return,je=e;break}je=n.return}}function sy(e,n,s){var o=s.flags;switch(s.tag){case 0:case 11:case 15:Zi(e,s),o&4&&Zo(5,s);break;case 1:if(Zi(e,s),o&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(p){Wt(s,s.return,p)}else{var h=jr(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(p){Wt(s,s.return,p)}}o&64&&Jp(s),o&512&&Jo(s,s.return);break;case 3:if(Zi(e,s),o&64&&(e=s.updateQueue,e!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{qg(e,n)}catch(p){Wt(s,s.return,p)}}break;case 27:n===null&&o&4&&ny(s);case 26:case 5:Zi(e,s),n===null&&o&4&&ty(s),o&512&&Jo(s,s.return);break;case 12:Zi(e,s);break;case 31:Zi(e,s),o&4&&oy(e,s);break;case 13:Zi(e,s),o&4&&ly(e,s),o&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=bS.bind(null,s),HS(e,s))));break;case 22:if(o=s.memoizedState!==null||Xi,!o){n=n!==null&&n.memoizedState!==null||Oe,h=Xi;var f=Oe;Xi=o,(Oe=n)&&!f?Ji(e,s,(s.subtreeFlags&8772)!==0):Zi(e,s),Xi=h,Oe=f}break;case 30:break;default:Zi(e,s)}}function ry(e){var n=e.alternate;n!==null&&(e.alternate=null,ry(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&na(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var fe=null,cn=!1;function $i(e,n,s){for(s=s.child;s!==null;)ay(e,n,s),s=s.sibling}function ay(e,n,s){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Hn,s)}catch{}switch(s.tag){case 26:Oe||Si(s,n),$i(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Oe||Si(s,n);var o=fe,h=cn;zs(s.type)&&(fe=s.stateNode,cn=!1),$i(e,n,s),ol(s.stateNode),fe=o,cn=h;break;case 5:Oe||Si(s,n);case 6:if(o=fe,h=cn,fe=null,$i(e,n,s),fe=o,cn=h,fe!==null)if(cn)try{(fe.nodeType===9?fe.body:fe.nodeName==="HTML"?fe.ownerDocument.body:fe).removeChild(s.stateNode)}catch(f){Wt(s,n,f)}else try{fe.removeChild(s.stateNode)}catch(f){Wt(s,n,f)}break;case 18:fe!==null&&(cn?(e=fe,Jy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),ja(e)):Jy(fe,s.stateNode));break;case 4:o=fe,h=cn,fe=s.stateNode.containerInfo,cn=!0,$i(e,n,s),fe=o,cn=h;break;case 0:case 11:case 14:case 15:xs(2,s,n),Oe||xs(4,s,n),$i(e,n,s);break;case 1:Oe||(Si(s,n),o=s.stateNode,typeof o.componentWillUnmount=="function"&&Wp(s,n,o)),$i(e,n,s);break;case 21:$i(e,n,s);break;case 22:Oe=(o=Oe)||s.memoizedState!==null,$i(e,n,s),Oe=o;break;default:$i(e,n,s)}}function oy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ja(e)}catch(s){Wt(n,n.return,s)}}}function ly(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ja(e)}catch(s){Wt(n,n.return,s)}}function gS(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new iy),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new iy),n;default:throw Error(a(435,e.tag))}}function Ku(e,n){var s=gS(e);n.forEach(function(o){if(!s.has(o)){s.add(o);var h=AS.bind(null,e,o);o.then(h,h)}})}function hn(e,n){var s=n.deletions;if(s!==null)for(var o=0;o<s.length;o++){var h=s[o],f=e,p=n,E=p;t:for(;E!==null;){switch(E.tag){case 27:if(zs(E.type)){fe=E.stateNode,cn=!1;break t}break;case 5:fe=E.stateNode,cn=!1;break t;case 3:case 4:fe=E.stateNode.containerInfo,cn=!0;break t}E=E.return}if(fe===null)throw Error(a(160));ay(f,p,h),fe=null,cn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)uy(n,e),n=n.sibling}var Wn=null;function uy(e,n){var s=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hn(n,e),fn(e),o&4&&(xs(3,e,e.return),Zo(3,e),xs(5,e,e.return));break;case 1:hn(n,e),fn(e),o&512&&(Oe||s===null||Si(s,s.return)),o&64&&Xi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?o:s.concat(o))));break;case 26:var h=Wn;if(hn(n,e),fn(e),o&512&&(Oe||s===null||Si(s,s.return)),o&4){var f=s!==null?s.memoizedState:null;if(o=e.memoizedState,s===null)if(o===null)if(e.stateNode===null){t:{o=e.type,s=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[li]||f[we]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Ye(f,o,s),f[we]=e,Re(f),o=f;break t;case"link":var p=u_("link","href",h).get(o+(s.href||""));if(p){for(var E=0;E<p.length;E++)if(f=p[E],f.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&f.getAttribute("rel")===(s.rel==null?null:s.rel)&&f.getAttribute("title")===(s.title==null?null:s.title)&&f.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){p.splice(E,1);break e}}f=h.createElement(o),Ye(f,o,s),h.head.appendChild(f);break;case"meta":if(p=u_("meta","content",h).get(o+(s.content||""))){for(E=0;E<p.length;E++)if(f=p[E],f.getAttribute("content")===(s.content==null?null:""+s.content)&&f.getAttribute("name")===(s.name==null?null:s.name)&&f.getAttribute("property")===(s.property==null?null:s.property)&&f.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&f.getAttribute("charset")===(s.charSet==null?null:s.charSet)){p.splice(E,1);break e}}f=h.createElement(o),Ye(f,o,s),h.head.appendChild(f);break;default:throw Error(a(468,o))}f[we]=e,Re(f),o=f}e.stateNode=o}else c_(h,e.type,e.stateNode);else e.stateNode=l_(h,o,e.memoizedProps);else f!==o?(f===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):f.count--,o===null?c_(h,e.type,e.stateNode):l_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Lf(e,e.memoizedProps,s.memoizedProps)}break;case 27:hn(n,e),fn(e),o&512&&(Oe||s===null||Si(s,s.return)),s!==null&&o&4&&Lf(e,e.memoizedProps,s.memoizedProps);break;case 5:if(hn(n,e),fn(e),o&512&&(Oe||s===null||Si(s,s.return)),e.flags&32){h=e.stateNode;try{un(h,"")}catch(ot){Wt(e,e.return,ot)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Lf(e,h,s!==null?s.memoizedProps:h)),o&1024&&(jf=!0);break;case 6:if(hn(n,e),fn(e),o&4){if(e.stateNode===null)throw Error(a(162));o=e.memoizedProps,s=e.stateNode;try{s.nodeValue=o}catch(ot){Wt(e,e.return,ot)}}break;case 3:if(cc=null,h=Wn,Wn=lc(n.containerInfo),hn(n,e),Wn=h,fn(e),o&4&&s!==null&&s.memoizedState.isDehydrated)try{ja(n.containerInfo)}catch(ot){Wt(e,e.return,ot)}jf&&(jf=!1,cy(e));break;case 4:o=Wn,Wn=lc(e.stateNode.containerInfo),hn(n,e),fn(e),Wn=o;break;case 12:hn(n,e),fn(e);break;case 31:hn(n,e),fn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ku(e,o)));break;case 13:hn(n,e),fn(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&($u=Kt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ku(e,o)));break;case 22:h=e.memoizedState!==null;var D=s!==null&&s.memoizedState!==null,z=Xi,G=Oe;if(Xi=z||h,Oe=G||D,hn(n,e),Oe=G,Xi=z,fn(e),o&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(s===null||D||Xi||Oe||Br(e)),s=null,n=e;;){if(n.tag===5||n.tag===26){if(s===null){D=s=n;try{if(f=D.stateNode,h)p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{E=D.stateNode;var K=D.memoizedProps.style,j=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(ot){Wt(D,D.return,ot)}}}else if(n.tag===6){if(s===null){D=n;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(ot){Wt(D,D.return,ot)}}}else if(n.tag===18){if(s===null){D=n;try{var H=D.stateNode;h?Wy(H,!0):Wy(D.stateNode,!1)}catch(ot){Wt(D,D.return,ot)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(s=o.retryQueue,s!==null&&(o.retryQueue=null,Ku(e,s))));break;case 19:hn(n,e),fn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ku(e,o)));break;case 30:break;case 21:break;default:hn(n,e),fn(e)}}function fn(e){var n=e.flags;if(n&2){try{for(var s,o=e.return;o!==null;){if(ey(o)){s=o;break}o=o.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var h=s.stateNode,f=Pf(e);Yu(e,f,h);break;case 5:var p=s.stateNode;s.flags&32&&(un(p,""),s.flags&=-33);var E=Pf(e);Yu(e,E,p);break;case 3:case 4:var D=s.stateNode.containerInfo,z=Pf(e);zf(e,z,D);break;default:throw Error(a(161))}}catch(G){Wt(e,e.return,G)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function cy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;cy(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Zi(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)sy(e,n.alternate,n),n=n.sibling}function Br(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:xs(4,n,n.return),Br(n);break;case 1:Si(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&Wp(n,n.return,s),Br(n);break;case 27:ol(n.stateNode);case 26:case 5:Si(n,n.return),Br(n);break;case 22:n.memoizedState===null&&Br(n);break;case 30:Br(n);break;default:Br(n)}e=e.sibling}}function Ji(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,f=n,p=f.flags;switch(f.tag){case 0:case 11:case 15:Ji(h,f,s),Zo(4,f);break;case 1:if(Ji(h,f,s),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){Wt(o,o.return,z)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)Bg(D[h],E)}catch(z){Wt(o,o.return,z)}}s&&p&64&&Jp(f),Jo(f,f.return);break;case 27:ny(f);case 26:case 5:Ji(h,f,s),s&&o===null&&p&4&&ty(f),Jo(f,f.return);break;case 12:Ji(h,f,s);break;case 31:Ji(h,f,s),s&&p&4&&oy(h,f);break;case 13:Ji(h,f,s),s&&p&4&&ly(h,f);break;case 22:f.memoizedState===null&&Ji(h,f,s),Jo(f,f.return);break;case 30:break;default:Ji(h,f,s)}n=n.sibling}}function Bf(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Po(s))}function qf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Po(e))}function ti(e,n,s,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)hy(e,n,s,o),n=n.sibling}function hy(e,n,s,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:ti(e,n,s,o),h&2048&&Zo(9,n);break;case 1:ti(e,n,s,o);break;case 3:ti(e,n,s,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Po(e)));break;case 12:if(h&2048){ti(e,n,s,o),e=n.stateNode;try{var f=n.memoizedProps,p=f.id,E=f.onPostCommit;typeof E=="function"&&E(p,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){Wt(n,n.return,D)}}else ti(e,n,s,o);break;case 31:ti(e,n,s,o);break;case 13:ti(e,n,s,o);break;case 23:break;case 22:f=n.stateNode,p=n.alternate,n.memoizedState!==null?f._visibility&2?ti(e,n,s,o):Wo(e,n):f._visibility&2?ti(e,n,s,o):(f._visibility|=2,Da(e,n,s,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&Bf(p,n);break;case 24:ti(e,n,s,o),h&2048&&qf(n.alternate,n);break;default:ti(e,n,s,o)}}function Da(e,n,s,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=e,p=n,E=s,D=o,z=p.flags;switch(p.tag){case 0:case 11:case 15:Da(f,p,E,D,h),Zo(8,p);break;case 23:break;case 22:var G=p.stateNode;p.memoizedState!==null?G._visibility&2?Da(f,p,E,D,h):Wo(f,p):(G._visibility|=2,Da(f,p,E,D,h)),h&&z&2048&&Bf(p.alternate,p);break;case 24:Da(f,p,E,D,h),h&&z&2048&&qf(p.alternate,p);break;default:Da(f,p,E,D,h)}n=n.sibling}}function Wo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,o=n,h=o.flags;switch(o.tag){case 22:Wo(s,o),h&2048&&Bf(o.alternate,o);break;case 24:Wo(s,o),h&2048&&qf(o.alternate,o);break;default:Wo(s,o)}n=n.sibling}}var tl=8192;function Na(e,n,s){if(e.subtreeFlags&tl)for(e=e.child;e!==null;)fy(e,n,s),e=e.sibling}function fy(e,n,s){switch(e.tag){case 26:Na(e,n,s),e.flags&tl&&e.memoizedState!==null&&eb(s,Wn,e.memoizedState,e.memoizedProps);break;case 5:Na(e,n,s);break;case 3:case 4:var o=Wn;Wn=lc(e.stateNode.containerInfo),Na(e,n,s),Wn=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=tl,tl=16777216,Na(e,n,s),tl=o):Na(e,n,s));break;default:Na(e,n,s)}}function dy(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function el(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];je=o,gy(o,e)}dy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)my(e),e=e.sibling}function my(e){switch(e.tag){case 0:case 11:case 15:el(e),e.flags&2048&&xs(9,e,e.return);break;case 3:el(e);break;case 12:el(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Xu(e)):el(e);break;default:el(e)}}function Xu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];je=o,gy(o,e)}dy(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:xs(8,n,n.return),Xu(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,Xu(n));break;default:Xu(n)}e=e.sibling}}function gy(e,n){for(;je!==null;){var s=je;switch(s.tag){case 0:case 11:case 15:xs(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var o=s.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Po(s.memoizedState.cache)}if(o=s.child,o!==null)o.return=s,je=o;else t:for(s=e;je!==null;){o=je;var h=o.sibling,f=o.return;if(ry(o),o===s){je=null;break t}if(h!==null){h.return=f,je=h;break t}je=f}}}var pS={getCacheForType:function(e){var n=Ge(Ie),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s},cacheSignal:function(){return Ge(Ie).controller.signal}},yS=typeof WeakMap=="function"?WeakMap:Map,Yt=0,se=null,Mt=null,kt=0,Jt=0,An=null,Ms=!1,Oa=!1,Hf=!1,Wi=0,pe=0,Vs=0,qr=0,Ff=0,wn=0,xa=0,nl=null,dn=null,Gf=!1,$u=0,py=0,Zu=1/0,Ju=null,Us=null,Ue=0,ks=null,Ma=null,ts=0,Qf=0,Yf=null,yy=null,il=0,Kf=null;function Rn(){return(Yt&2)!==0&&kt!==0?kt&-kt:F.T!==null?td():Wl()}function _y(){if(wn===0)if((kt&536870912)===0||qt){var e=gr;gr<<=1,(gr&3932160)===0&&(gr=262144),wn=e}else wn=536870912;return e=Sn.current,e!==null&&(e.flags|=32),wn}function mn(e,n,s){(e===se&&(Jt===2||Jt===9)||e.cancelPendingCommit!==null)&&(Va(e,0),Ls(e,kt,wn,!1)),pr(e,s),((Yt&2)===0||e!==se)&&(e===se&&((Yt&2)===0&&(qr|=s),pe===4&&Ls(e,kt,wn,!1)),bi(e))}function vy(e,n,s){if((Yt&6)!==0)throw Error(a(327));var o=!s&&(n&127)===0&&(n&e.expiredLanes)===0||Fn(e,n),h=o?ES(e,n):$f(e,n,!0),f=o;do{if(h===0){Oa&&!o&&Ls(e,n,0,!1);break}else{if(s=e.current.alternate,f&&!_S(s)){h=$f(e,n,!1),f=!1;continue}if(h===2){if(f=n,e.errorRecoveryDisabledLanes&f)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){n=p;t:{var E=e;h=nl;var D=E.current.memoizedState.isDehydrated;if(D&&(Va(E,p).flags|=256),p=$f(E,p,!1),p!==2){if(Hf&&!D){E.errorRecoveryDisabledLanes|=f,qr|=f,h=4;break t}f=dn,dn=h,f!==null&&(dn===null?dn=f:dn.push.apply(dn,f))}h=p}if(f=!1,h!==2)continue}}if(h===1){Va(e,0),Ls(e,n,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Ls(o,n,wn,!Ms);break t;case 2:dn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(h=$u+300-Kt(),10<h)){if(Ls(o,n,wn,!Ms),ri(o,0,!0)!==0)break t;ts=n,o.timeoutHandle=$y(Ey.bind(null,o,s,dn,Ju,Gf,n,wn,qr,xa,Ms,f,"Throttled",-0,0),h);break t}Ey(o,s,dn,Ju,Gf,n,wn,qr,xa,Ms,f,null,-0,0)}}break}while(!0);bi(e)}function Ey(e,n,s,o,h,f,p,E,D,z,G,K,j,H){if(e.timeoutHandle=-1,K=n.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yn},fy(n,f,K);var ot=(f&62914560)===f?$u-Kt():(f&4194048)===f?py-Kt():0;if(ot=nb(K,ot),ot!==null){ts=f,e.cancelPendingCommit=ot(Iy.bind(null,e,n,f,s,o,h,p,E,D,G,K,null,j,H)),Ls(e,f,p,!z);return}}Iy(e,n,f,s,o,h,p,E,D)}function _S(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var o=0;o<s.length;o++){var h=s[o],f=h.getSnapshot;h=h.value;try{if(!En(f(),h))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ls(e,n,s,o){n&=~Ff,n&=~qr,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var f=31-ve(h),p=1<<f;o[f]=-1,h&=~p}s!==0&&yr(e,s,n)}function Wu(){return(Yt&6)===0?(sl(0),!1):!0}function Xf(){if(Mt!==null){if(Jt===0)var e=Mt.return;else e=Mt,Hi=Mr=null,hf(e),Aa=null,jo=0,e=Mt;for(;e!==null;)Zp(e.alternate,e),e=e.return;Mt=null}}function Va(e,n){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,PS(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),ts=0,Xf(),se=e,Mt=s=Bi(e.current,null),kt=n,Jt=0,An=null,Ms=!1,Oa=Fn(e,n),Hf=!1,xa=wn=Ff=qr=Vs=pe=0,dn=nl=null,Gf=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-ve(o),f=1<<h;n|=e[h],o&=~f}return Wi=n,Eu(),s}function Ty(e,n){It=null,F.H=Ko,n===ba||n===Iu?(n=Lg(),Jt=3):n===Jh?(n=Lg(),Jt=4):Jt=n===Cf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,An=n,Mt===null&&(pe=1,qu(e,Un(n,e.current)))}function Sy(){var e=Sn.current;return e===null?!0:(kt&4194048)===kt?zn===null:(kt&62914560)===kt||(kt&536870912)!==0?e===zn:!1}function by(){var e=F.H;return F.H=Ko,e===null?Ko:e}function Ay(){var e=F.A;return F.A=pS,e}function tc(){pe=4,Ms||(kt&4194048)!==kt&&Sn.current!==null||(Oa=!0),(Vs&134217727)===0&&(qr&134217727)===0||se===null||Ls(se,kt,wn,!1)}function $f(e,n,s){var o=Yt;Yt|=2;var h=by(),f=Ay();(se!==e||kt!==n)&&(Ju=null,Va(e,n)),n=!1;var p=pe;t:do try{if(Jt!==0&&Mt!==null){var E=Mt,D=An;switch(Jt){case 8:Xf(),p=6;break t;case 3:case 2:case 9:case 6:Sn.current===null&&(n=!0);var z=Jt;if(Jt=0,An=null,Ua(e,E,D,z),s&&Oa){p=0;break t}break;default:z=Jt,Jt=0,An=null,Ua(e,E,D,z)}}vS(),p=pe;break}catch(G){Ty(e,G)}while(!0);return n&&e.shellSuspendCounter++,Hi=Mr=null,Yt=o,F.H=h,F.A=f,Mt===null&&(se=null,kt=0,Eu()),p}function vS(){for(;Mt!==null;)wy(Mt)}function ES(e,n){var s=Yt;Yt|=2;var o=by(),h=Ay();se!==e||kt!==n?(Ju=null,Zu=Kt()+500,Va(e,n)):Oa=Fn(e,n);t:do try{if(Jt!==0&&Mt!==null){n=Mt;var f=An;e:switch(Jt){case 1:Jt=0,An=null,Ua(e,n,f,1);break;case 2:case 9:if(Ug(f)){Jt=0,An=null,Ry(n);break}n=function(){Jt!==2&&Jt!==9||se!==e||(Jt=7),bi(e)},f.then(n,n);break t;case 3:Jt=7;break t;case 4:Jt=5;break t;case 7:Ug(f)?(Jt=0,An=null,Ry(n)):(Jt=0,An=null,Ua(e,n,f,7));break;case 5:var p=null;switch(Mt.tag){case 26:p=Mt.memoizedState;case 5:case 27:var E=Mt;if(p?h_(p):E.stateNode.complete){Jt=0,An=null;var D=E.sibling;if(D!==null)Mt=D;else{var z=E.return;z!==null?(Mt=z,ec(z)):Mt=null}break e}}Jt=0,An=null,Ua(e,n,f,5);break;case 6:Jt=0,An=null,Ua(e,n,f,6);break;case 8:Xf(),pe=6;break t;default:throw Error(a(462))}}TS();break}catch(G){Ty(e,G)}while(!0);return Hi=Mr=null,F.H=o,F.A=h,Yt=s,Mt!==null?0:(se=null,kt=0,Eu(),pe)}function TS(){for(;Mt!==null&&!oe();)wy(Mt)}function wy(e){var n=Xp(e.alternate,e,Wi);e.memoizedProps=e.pendingProps,n===null?ec(e):Mt=n}function Ry(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=Hp(s,n,n.pendingProps,n.type,void 0,kt);break;case 11:n=Hp(s,n,n.pendingProps,n.type.render,n.ref,kt);break;case 5:hf(n);default:Zp(s,n),n=Mt=Ag(n,Wi),n=Xp(s,n,Wi)}e.memoizedProps=e.pendingProps,n===null?ec(e):Mt=n}function Ua(e,n,s,o){Hi=Mr=null,hf(n),Aa=null,jo=0;var h=n.return;try{if(uS(e,h,n,s,kt)){pe=1,qu(e,Un(s,e.current)),Mt=null;return}}catch(f){if(h!==null)throw Mt=h,f;pe=1,qu(e,Un(s,e.current)),Mt=null;return}n.flags&32768?(qt||o===1?e=!0:Oa||(kt&536870912)!==0?e=!1:(Ms=e=!0,(o===2||o===9||o===3||o===6)&&(o=Sn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Cy(n,e)):ec(n)}function ec(e){var n=e;do{if((n.flags&32768)!==0){Cy(n,Ms);return}e=n.return;var s=fS(n.alternate,n,Wi);if(s!==null){Mt=s;return}if(n=n.sibling,n!==null){Mt=n;return}Mt=n=e}while(n!==null);pe===0&&(pe=5)}function Cy(e,n){do{var s=dS(e.alternate,e);if(s!==null){s.flags&=32767,Mt=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){Mt=e;return}Mt=e=s}while(e!==null);pe=6,Mt=null}function Iy(e,n,s,o,h,f,p,E,D){e.cancelPendingCommit=null;do nc();while(Ue!==0);if((Yt&6)!==0)throw Error(a(327));if(n!==null){if(n===e.current)throw Error(a(177));if(f=n.lanes|n.childLanes,f|=Lh,Ih(e,s,f,p,E,D),e===se&&(Mt=se=null,kt=0),Ma=n,ks=e,ts=s,Qf=f,Yf=h,yy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,wS(ds,function(){return My(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=F.T,F.T=null,h=nt.p,nt.p=2,p=Yt,Yt|=4;try{mS(e,n,s)}finally{Yt=p,nt.p=h,F.T=o}}Ue=1,Dy(),Ny(),Oy()}}function Dy(){if(Ue===1){Ue=0;var e=ks,n=Ma,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=F.T,F.T=null;var o=nt.p;nt.p=2;var h=Yt;Yt|=4;try{uy(n,e);var f=ld,p=gg(e.containerInfo),E=f.focusedElem,D=f.selectionRange;if(p!==E&&E&&E.ownerDocument&&mg(E.ownerDocument.documentElement,E)){if(D!==null&&xh(E)){var z=D.start,G=D.end;if(G===void 0&&(G=z),"selectionStart"in E)E.selectionStart=z,E.selectionEnd=Math.min(G,E.value.length);else{var K=E.ownerDocument||document,j=K&&K.defaultView||window;if(j.getSelection){var H=j.getSelection(),ot=E.textContent.length,pt=Math.min(D.start,ot),ie=D.end===void 0?pt:Math.min(D.end,ot);!H.extend&&pt>ie&&(p=ie,ie=pt,pt=p);var k=dg(E,pt),x=dg(E,ie);if(k&&x&&(H.rangeCount!==1||H.anchorNode!==k.node||H.anchorOffset!==k.offset||H.focusNode!==x.node||H.focusOffset!==x.offset)){var P=K.createRange();P.setStart(k.node,k.offset),H.removeAllRanges(),pt>ie?(H.addRange(P),H.extend(x.node,x.offset)):(P.setEnd(x.node,x.offset),H.addRange(P))}}}}for(K=[],H=E;H=H.parentNode;)H.nodeType===1&&K.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var Q=K[E];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}mc=!!od,ld=od=null}finally{Yt=h,nt.p=o,F.T=s}}e.current=n,Ue=2}}function Ny(){if(Ue===2){Ue=0;var e=ks,n=Ma,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=F.T,F.T=null;var o=nt.p;nt.p=2;var h=Yt;Yt|=4;try{sy(e,n.alternate,n)}finally{Yt=h,nt.p=o,F.T=s}}Ue=3}}function Oy(){if(Ue===4||Ue===3){Ue=0,Ze();var e=ks,n=Ma,s=ts,o=yy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ue=5:(Ue=0,Ma=ks=null,xy(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Us=null),Li(s),n=n.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Hn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=F.T,h=nt.p,nt.p=2,F.T=null;try{for(var f=e.onRecoverableError,p=0;p<o.length;p++){var E=o[p];f(E.value,{componentStack:E.stack})}}finally{F.T=n,nt.p=h}}(ts&3)!==0&&nc(),bi(e),h=e.pendingLanes,(s&261930)!==0&&(h&42)!==0?e===Kf?il++:(il=0,Kf=e):il=0,sl(0)}}function xy(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Po(n)))}function nc(){return Dy(),Ny(),Oy(),My()}function My(){if(Ue!==5)return!1;var e=ks,n=Qf;Qf=0;var s=Li(ts),o=F.T,h=nt.p;try{nt.p=32>s?32:s,F.T=null,s=Yf,Yf=null;var f=ks,p=ts;if(Ue=0,Ma=ks=null,ts=0,(Yt&6)!==0)throw Error(a(331));var E=Yt;if(Yt|=4,my(f.current),hy(f,f.current,p,s),Yt=E,sl(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Hn,f)}catch{}return!0}finally{nt.p=h,F.T=o,xy(e,n)}}function Vy(e,n,s){n=Un(s,n),n=Rf(e.stateNode,n,2),e=Ds(e,n,2),e!==null&&(pr(e,2),bi(e))}function Wt(e,n,s){if(e.tag===3)Vy(e,e,s);else for(;n!==null;){if(n.tag===3){Vy(n,e,s);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Us===null||!Us.has(o))){e=Un(s,e),s=Up(2),o=Ds(n,s,2),o!==null&&(kp(s,o,n,e),pr(o,2),bi(o));break}}n=n.return}}function Zf(e,n,s){var o=e.pingCache;if(o===null){o=e.pingCache=new yS;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(s)||(Hf=!0,h.add(s),e=SS.bind(null,e,n,s),n.then(e,e))}function SS(e,n,s){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,se===e&&(kt&s)===s&&(pe===4||pe===3&&(kt&62914560)===kt&&300>Kt()-$u?(Yt&2)===0&&Va(e,0):Ff|=s,xa===kt&&(xa=0)),bi(e)}function Uy(e,n){n===0&&(n=Jl()),e=Nr(e,n),e!==null&&(pr(e,n),bi(e))}function bS(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Uy(e,s)}function AS(e,n){var s=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(s=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(n),Uy(e,s)}function wS(e,n){return Rt(e,n)}var ic=null,ka=null,Jf=!1,sc=!1,Wf=!1,Ps=0;function bi(e){e!==ka&&e.next===null&&(ka===null?ic=ka=e:ka=ka.next=e),sc=!0,Jf||(Jf=!0,CS())}function sl(e,n){if(!Wf&&sc){Wf=!0;do for(var s=!1,o=ic;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var p=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-ve(42|e)+1)-1,f&=h&~(p&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(s=!0,zy(o,f))}else f=kt,f=ri(o,o===se?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Fn(o,f)||(s=!0,zy(o,f));o=o.next}while(s);Wf=!1}}function RS(){ky()}function ky(){sc=Jf=!1;var e=0;Ps!==0&&LS()&&(e=Ps);for(var n=Kt(),s=null,o=ic;o!==null;){var h=o.next,f=Ly(o,n);f===0?(o.next=null,s===null?ic=h:s.next=h,h===null&&(ka=s)):(s=o,(e!==0||(f&3)!==0)&&(sc=!0)),o=h}Ue!==0&&Ue!==5||sl(e),Ps!==0&&(Ps=0)}function Ly(e,n){for(var s=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var p=31-ve(f),E=1<<p,D=h[p];D===-1?((E&s)===0||(E&o)!==0)&&(h[p]=Ch(E,n)):D<=n&&(e.expiredLanes|=E),f&=~E}if(n=se,s=kt,s=ri(e,e===n?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,s===0||e===n&&(Jt===2||Jt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Ut(o),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Fn(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(o!==null&&Ut(o),Li(s)){case 2:case 8:s=mo;break;case 32:s=ds;break;case 268435456:s=Yl;break;default:s=ds}return o=Py.bind(null,e),s=Rt(s,o),e.callbackPriority=n,e.callbackNode=s,n}return o!==null&&o!==null&&Ut(o),e.callbackPriority=2,e.callbackNode=null,2}function Py(e,n){if(Ue!==0&&Ue!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(nc()&&e.callbackNode!==s)return null;var o=kt;return o=ri(e,e===se?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(vy(e,o,n),Ly(e,Kt()),e.callbackNode!=null&&e.callbackNode===s?Py.bind(null,e):null)}function zy(e,n){if(nc())return null;vy(e,n,!0)}function CS(){zS(function(){(Yt&6)!==0?Rt(fo,RS):ky()})}function td(){if(Ps===0){var e=Ta;e===0&&(e=ii,ii<<=1,(ii&261888)===0&&(ii=256)),Ps=e}return Ps}function jy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:aa(""+e)}function By(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function IS(e,n,s,o,h){if(n==="submit"&&s&&s.stateNode===h){var f=jy((h[Pe]||null).action),p=o.submitter;p&&(n=(n=p[Pe]||null)?jy(n.formAction):p.getAttribute("formAction"),n!==null&&(f=n,p=null));var E=new pi("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ps!==0){var D=p?By(h,p):new FormData(h);Ef(s,{pending:!0,data:D,method:h.method,action:f},null,D)}}else typeof f=="function"&&(E.preventDefault(),D=p?By(h,p):new FormData(h),Ef(s,{pending:!0,data:D,method:h.method,action:f},f,D))},currentTarget:h}]})}}for(var ed=0;ed<kh.length;ed++){var nd=kh[ed],DS=nd.toLowerCase(),NS=nd[0].toUpperCase()+nd.slice(1);Jn(DS,"on"+NS)}Jn(_g,"onAnimationEnd"),Jn(vg,"onAnimationIteration"),Jn(Eg,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(QT,"onTransitionRun"),Jn(YT,"onTransitionStart"),Jn(KT,"onTransitionCancel"),Jn(Tg,"onTransitionEnd"),fi("onMouseEnter",["mouseout","mouseover"]),fi("onMouseLeave",["mouseout","mouseover"]),fi("onPointerEnter",["pointerout","pointerover"]),fi("onPointerLeave",["pointerout","pointerover"]),hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rl));function qy(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var o=e[s],h=o.event;o=o.listeners;t:{var f=void 0;if(n)for(var p=o.length-1;0<=p;p--){var E=o[p],D=E.instance,z=E.currentTarget;if(E=E.listener,D!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=z;try{f(h)}catch(G){vu(G)}h.currentTarget=null,f=D}else for(p=0;p<o.length;p++){if(E=o[p],D=E.instance,z=E.currentTarget,E=E.listener,D!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=z;try{f(h)}catch(G){vu(G)}h.currentTarget=null,f=D}}}}function Vt(e,n){var s=n[ea];s===void 0&&(s=n[ea]=new Set);var o=e+"__bubble";s.has(o)||(Hy(n,e,2,!1),s.add(o))}function id(e,n,s){var o=0;n&&(o|=4),Hy(s,e,o,n)}var rc="_reactListening"+Math.random().toString(36).slice(2);function sd(e){if(!e[rc]){e[rc]=!0,yo.forEach(function(s){s!=="selectionchange"&&(OS.has(s)||id(s,!1,e),id(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[rc]||(n[rc]=!0,id("selectionchange",!1,n))}}function Hy(e,n,s,o){switch(__(n)){case 2:var h=rb;break;case 8:h=ab;break;default:h=vd}s=h.bind(null,n,s,e),h=void 0,!Sr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,s,{capture:!0,passive:h}):e.addEventListener(n,s,!0):h!==void 0?e.addEventListener(n,s,{passive:h}):e.addEventListener(n,s,!1)}function rd(e,n,s,o,h){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var p=o.tag;if(p===3||p===4){var E=o.stateNode.containerInfo;if(E===h)break;if(p===4)for(p=o.return;p!==null;){var D=p.tag;if((D===3||D===4)&&p.stateNode.containerInfo===h)return;p=p.return}for(;E!==null;){if(p=ui(E),p===null)return;if(D=p.tag,D===5||D===6||D===26||D===27){o=f=p;continue t}E=E.parentNode}}o=o.return}vs(function(){var z=f,G=On(s),K=[];t:{var j=Sg.get(e);if(j!==void 0){var H=pi,ot=e;switch(e){case"keypress":if(Ar(s)===0)break t;case"keydown":case"keyup":H=pu;break;case"focusin":ot="focus",H=Rr;break;case"focusout":ot="blur",H=Rr;break;case"beforeblur":case"afterblur":H=Rr;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=No;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=ou;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=m;break;case _g:case vg:case Eg:H=uu;break;case Tg:H=S;break;case"scroll":case"scrollend":H=Do;break;case"wheel":H=q;break;case"copy":case"cut":case"paste":H=cu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=ji;break;case"toggle":case"beforetoggle":H=Ct}var pt=(n&4)!==0,ie=!pt&&(e==="scroll"||e==="scrollend"),k=pt?j!==null?j+"Capture":null:j;pt=[];for(var x=z,P;x!==null;){var Q=x;if(P=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||P===null||k===null||(Q=Kn(x,k),Q!=null&&pt.push(al(x,Q,P))),ie)break;x=x.return}0<pt.length&&(j=new H(j,ot,null,s,G),K.push({event:j,listeners:pt}))}}if((n&7)===0){t:{if(j=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",j&&s!==Ro&&(ot=s.relatedTarget||s.fromElement)&&(ui(ot)||ot[oi]))break t;if((H||j)&&(j=G.window===G?G:(j=G.ownerDocument)?j.defaultView||j.parentWindow:window,H?(ot=s.relatedTarget||s.toElement,H=z,ot=ot?ui(ot):null,ot!==null&&(ie=c(ot),pt=ot.tag,ot!==ie||pt!==5&&pt!==27&&pt!==6)&&(ot=null)):(H=null,ot=z),H!==ot)){if(pt=No,Q="onMouseLeave",k="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(pt=ji,Q="onPointerLeave",k="onPointerEnter",x="pointer"),ie=H==null?j:_n(H),P=ot==null?j:_n(ot),j=new pt(Q,x+"leave",H,s,G),j.target=ie,j.relatedTarget=P,Q=null,ui(G)===z&&(pt=new pt(k,x+"enter",ot,s,G),pt.target=P,pt.relatedTarget=ie,Q=pt),ie=Q,H&&ot)e:{for(pt=xS,k=H,x=ot,P=0,Q=k;Q;Q=pt(Q))P++;Q=0;for(var ft=x;ft;ft=pt(ft))Q++;for(;0<P-Q;)k=pt(k),P--;for(;0<Q-P;)x=pt(x),Q--;for(;P--;){if(k===x||x!==null&&k===x.alternate){pt=k;break e}k=pt(k),x=pt(x)}pt=null}else pt=null;H!==null&&Fy(K,j,H,pt,!1),ot!==null&&ie!==null&&Fy(K,ie,ot,pt,!0)}}t:{if(j=z?_n(z):window,H=j.nodeName&&j.nodeName.toLowerCase(),H==="select"||H==="input"&&j.type==="file")var Ft=og;else if(rg(j))if(lg)Ft=HT;else{Ft=BT;var ut=jT}else H=j.nodeName,!H||H.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?z&&ra(z.elementType)&&(Ft=og):Ft=qT;if(Ft&&(Ft=Ft(e,z))){ag(K,Ft,s,G);break t}ut&&ut(e,j,z),e==="focusout"&&z&&j.type==="number"&&z.memoizedProps.value!=null&&bo(j,"number",j.value)}switch(ut=z?_n(z):window,e){case"focusin":(rg(ut)||ut.contentEditable==="true")&&(da=ut,Mh=z,Uo=null);break;case"focusout":Uo=Mh=da=null;break;case"mousedown":Vh=!0;break;case"contextmenu":case"mouseup":case"dragend":Vh=!1,pg(K,s,G);break;case"selectionchange":if(GT)break;case"keydown":case"keyup":pg(K,s,G)}var Dt;if(Qt)t:{switch(e){case"compositionstart":var Lt="onCompositionStart";break t;case"compositionend":Lt="onCompositionEnd";break t;case"compositionupdate":Lt="onCompositionUpdate";break t}Lt=void 0}else fa?Cr(e,s)&&(Lt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Lt="onCompositionStart");Lt&&(vi&&s.locale!=="ko"&&(fa||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&fa&&(Dt=Io()):(gi=G,Co="value"in gi?gi.value:gi.textContent,fa=!0)),ut=ac(z,Lt),0<ut.length&&(Lt=new _i(Lt,e,null,s,G),K.push({event:Lt,listeners:ut}),Dt?Lt.data=Dt:(Dt=ha(s),Dt!==null&&(Lt.data=Dt)))),(Dt=Mn?kT(e,s):LT(e,s))&&(Lt=ac(z,"onBeforeInput"),0<Lt.length&&(ut=new _i("onBeforeInput","beforeinput",null,s,G),K.push({event:ut,listeners:Lt}),ut.data=Dt)),IS(K,e,z,s,G)}qy(K,n)})}function al(e,n,s){return{instance:e,listener:n,currentTarget:s}}function ac(e,n){for(var s=n+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Kn(e,s),h!=null&&o.unshift(al(e,h,f)),h=Kn(e,n),h!=null&&o.push(al(e,h,f))),e.tag===3)return o;e=e.return}return[]}function xS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Fy(e,n,s,o,h){for(var f=n._reactName,p=[];s!==null&&s!==o;){var E=s,D=E.alternate,z=E.stateNode;if(E=E.tag,D!==null&&D===o)break;E!==5&&E!==26&&E!==27||z===null||(D=z,h?(z=Kn(s,f),z!=null&&p.unshift(al(s,z,D))):h||(z=Kn(s,f),z!=null&&p.push(al(s,z,D)))),s=s.return}p.length!==0&&e.push({event:n,listeners:p})}var MS=/\r\n?/g,VS=/\u0000|\uFFFD/g;function Gy(e){return(typeof e=="string"?e:""+e).replace(MS,`
`).replace(VS,"")}function Qy(e,n){return n=Gy(n),Gy(e)===n}function ne(e,n,s,o,h,f){switch(s){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||un(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&un(e,""+o);break;case"className":vn(e,"class",o);break;case"tabIndex":vn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":vn(e,s,o);break;case"style":wo(e,o,f);break;case"data":if(n!=="object"){vn(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(s);break}o=aa(""+o),e.setAttribute(s,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(s==="formAction"?(n!=="input"&&ne(e,n,"name",h.name,h,null),ne(e,n,"formEncType",h.formEncType,h,null),ne(e,n,"formMethod",h.formMethod,h,null),ne(e,n,"formTarget",h.formTarget,h,null)):(ne(e,n,"encType",h.encType,h,null),ne(e,n,"method",h.method,h,null),ne(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(s);break}o=aa(""+o),e.setAttribute(s,o);break;case"onClick":o!=null&&(e.onclick=Yn);break;case"onScroll":o!=null&&Vt("scroll",e);break;case"onScrollEnd":o!=null&&Vt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(h.children!=null)throw Error(a(60));e.innerHTML=s}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}s=aa(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,""+o):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":o===!0?e.setAttribute(s,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,o):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(s,o):e.removeAttribute(s);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(s):e.setAttribute(s,o);break;case"popover":Vt("beforetoggle",e),Vt("toggle",e),ia(e,"popover",o);break;case"xlinkActuate":Ce(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ce(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ce(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ce(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ce(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ce(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ce(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ce(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ce(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ia(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=au.get(s)||s,ia(e,s,o))}}function ad(e,n,s,o,h,f){switch(s){case"style":wo(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(h.children!=null)throw Error(a(60));e.innerHTML=s}}break;case"children":typeof o=="string"?un(e,o):(typeof o=="number"||typeof o=="bigint")&&un(e,""+o);break;case"onScroll":o!=null&&Vt("scroll",e);break;case"onScrollEnd":o!=null&&Vt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Yn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_o.hasOwnProperty(s))t:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),n=s.slice(2,h?s.length-7:void 0),f=e[Pe]||null,f=f!=null?f[s]:null,typeof f=="function"&&e.removeEventListener(n,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,o,h);break t}s in e?e[s]=o:o===!0?e.setAttribute(s,""):ia(e,s,o)}}}function Ye(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",e),Vt("load",e);var o=!1,h=!1,f;for(f in s)if(s.hasOwnProperty(f)){var p=s[f];if(p!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ne(e,n,f,p,s,null)}}h&&ne(e,n,"srcSet",s.srcSet,s,null),o&&ne(e,n,"src",s.src,s,null);return;case"input":Vt("invalid",e);var E=f=p=h=null,D=null,z=null;for(o in s)if(s.hasOwnProperty(o)){var G=s[o];if(G!=null)switch(o){case"name":h=G;break;case"type":p=G;break;case"checked":D=G;break;case"defaultChecked":z=G;break;case"value":f=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(a(137,n));break;default:ne(e,n,o,G,s,null)}}iu(e,f,E,D,z,p,h,!1);return;case"select":Vt("invalid",e),o=p=f=null;for(h in s)if(s.hasOwnProperty(h)&&(E=s[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":p=E;break;case"multiple":o=E;default:ne(e,n,h,E,s,null)}n=f,s=p,e.multiple=!!o,n!=null?gs(e,!!o,n,!1):s!=null&&gs(e,!!o,s,!0);return;case"textarea":Vt("invalid",e),f=h=o=null;for(p in s)if(s.hasOwnProperty(p)&&(E=s[p],E!=null))switch(p){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:ne(e,n,p,E,s,null)}ps(e,o,h,f);return;case"option":for(D in s)if(s.hasOwnProperty(D)&&(o=s[D],o!=null))switch(D){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:ne(e,n,D,o,s,null)}return;case"dialog":Vt("beforetoggle",e),Vt("toggle",e),Vt("cancel",e),Vt("close",e);break;case"iframe":case"object":Vt("load",e);break;case"video":case"audio":for(o=0;o<rl.length;o++)Vt(rl[o],e);break;case"image":Vt("error",e),Vt("load",e);break;case"details":Vt("toggle",e);break;case"embed":case"source":case"link":Vt("error",e),Vt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in s)if(s.hasOwnProperty(z)&&(o=s[z],o!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ne(e,n,z,o,s,null)}return;default:if(ra(n)){for(G in s)s.hasOwnProperty(G)&&(o=s[G],o!==void 0&&ad(e,n,G,o,s,void 0));return}}for(E in s)s.hasOwnProperty(E)&&(o=s[E],o!=null&&ne(e,n,E,o,s,null))}function US(e,n,s,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,p=null,E=null,D=null,z=null,G=null;for(H in s){var K=s[H];if(s.hasOwnProperty(H)&&K!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":D=K;default:o.hasOwnProperty(H)||ne(e,n,H,null,o,K)}}for(var j in o){var H=o[j];if(K=s[j],o.hasOwnProperty(j)&&(H!=null||K!=null))switch(j){case"type":f=H;break;case"name":h=H;break;case"checked":z=H;break;case"defaultChecked":G=H;break;case"value":p=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(a(137,n));break;default:H!==K&&ne(e,n,j,H,o,K)}}sa(e,p,E,D,z,G,f,h);return;case"select":H=p=E=j=null;for(f in s)if(D=s[f],s.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":H=D;default:o.hasOwnProperty(f)||ne(e,n,f,null,o,D)}for(h in o)if(f=o[h],D=s[h],o.hasOwnProperty(h)&&(f!=null||D!=null))switch(h){case"value":j=f;break;case"defaultValue":E=f;break;case"multiple":p=f;default:f!==D&&ne(e,n,h,f,o,D)}n=E,s=p,o=H,j!=null?gs(e,!!s,j,!1):!!o!=!!s&&(n!=null?gs(e,!!s,n,!0):gs(e,!!s,s?[]:"",!1));return;case"textarea":H=j=null;for(E in s)if(h=s[E],s.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ne(e,n,E,null,o,h)}for(p in o)if(h=o[p],f=s[p],o.hasOwnProperty(p)&&(h!=null||f!=null))switch(p){case"value":j=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==f&&ne(e,n,p,h,o,f)}su(e,j,H);return;case"option":for(var ot in s)if(j=s[ot],s.hasOwnProperty(ot)&&j!=null&&!o.hasOwnProperty(ot))switch(ot){case"selected":e.selected=!1;break;default:ne(e,n,ot,null,o,j)}for(D in o)if(j=o[D],H=s[D],o.hasOwnProperty(D)&&j!==H&&(j!=null||H!=null))switch(D){case"selected":e.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:ne(e,n,D,j,o,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in s)j=s[pt],s.hasOwnProperty(pt)&&j!=null&&!o.hasOwnProperty(pt)&&ne(e,n,pt,null,o,j);for(z in o)if(j=o[z],H=s[z],o.hasOwnProperty(z)&&j!==H&&(j!=null||H!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(a(137,n));break;default:ne(e,n,z,j,o,H)}return;default:if(ra(n)){for(var ie in s)j=s[ie],s.hasOwnProperty(ie)&&j!==void 0&&!o.hasOwnProperty(ie)&&ad(e,n,ie,void 0,o,j);for(G in o)j=o[G],H=s[G],!o.hasOwnProperty(G)||j===H||j===void 0&&H===void 0||ad(e,n,G,j,o,H);return}}for(var k in s)j=s[k],s.hasOwnProperty(k)&&j!=null&&!o.hasOwnProperty(k)&&ne(e,n,k,null,o,j);for(K in o)j=o[K],H=s[K],!o.hasOwnProperty(K)||j===H||j==null&&H==null||ne(e,n,K,j,o,H)}function Yy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,s=performance.getEntriesByType("resource"),o=0;o<s.length;o++){var h=s[o],f=h.transferSize,p=h.initiatorType,E=h.duration;if(f&&E&&Yy(p)){for(p=0,E=h.responseEnd,o+=1;o<s.length;o++){var D=s[o],z=D.startTime;if(z>E)break;var G=D.transferSize,K=D.initiatorType;G&&Yy(K)&&(D=D.responseEnd,p+=G*(D<E?1:(E-z)/(D-z)))}if(--o,n+=8*(f+p)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var od=null,ld=null;function oc(e){return e.nodeType===9?e:e.ownerDocument}function Ky(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xy(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function ud(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var cd=null;function LS(){var e=window.event;return e&&e.type==="popstate"?e===cd?!1:(cd=e,!0):(cd=null,!1)}var $y=typeof setTimeout=="function"?setTimeout:void 0,PS=typeof clearTimeout=="function"?clearTimeout:void 0,Zy=typeof Promise=="function"?Promise:void 0,zS=typeof queueMicrotask=="function"?queueMicrotask:typeof Zy<"u"?function(e){return Zy.resolve(null).then(e).catch(jS)}:$y;function jS(e){setTimeout(function(){throw e})}function zs(e){return e==="head"}function Jy(e,n){var s=n,o=0;do{var h=s.nextSibling;if(e.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"||s==="/&"){if(o===0){e.removeChild(h),ja(n);return}o--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")o++;else if(s==="html")ol(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,ol(s);for(var f=s.firstChild;f;){var p=f.nextSibling,E=f.nodeName;f[li]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&f.rel.toLowerCase()==="stylesheet"||s.removeChild(f),f=p}}else s==="body"&&ol(e.ownerDocument.body);s=h}while(s);ja(n)}function Wy(e,n){var s=e;e=0;do{var o=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=o}while(s)}function hd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":hd(s),na(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function BS(e,n,s,o){for(;e.nodeType===1;){var h=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[li])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=jn(e.nextSibling),e===null)break}return null}function qS(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=jn(e.nextSibling),e===null))return null;return e}function t_(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=jn(e.nextSibling),e===null))return null;return e}function fd(e){return e.data==="$?"||e.data==="$~"}function dd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function HS(e,n){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||s.readyState!=="loading")n();else{var o=function(){n(),s.removeEventListener("DOMContentLoaded",o)};s.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function jn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var md=null;function e_(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(n===0)return jn(e.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}e=e.nextSibling}return null}function n_(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return e;n--}else s!=="/$"&&s!=="/&"||n++}e=e.previousSibling}return null}function i_(e,n,s){switch(n=oc(s),e){case"html":if(e=n.documentElement,!e)throw Error(a(452));return e;case"head":if(e=n.head,!e)throw Error(a(453));return e;case"body":if(e=n.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function ol(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);na(e)}var Bn=new Map,s_=new Set;function lc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var es=nt.d;nt.d={f:FS,r:GS,D:QS,C:YS,L:KS,m:XS,X:ZS,S:$S,M:JS};function FS(){var e=es.f(),n=Wu();return e||n}function GS(e){var n=Nn(e);n!==null&&n.tag===5&&n.type==="form"?Tp(n):es.r(e)}var La=typeof document>"u"?null:document;function r_(e,n,s){var o=La;if(o&&typeof n=="string"&&n){var h=ln(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),s_.has(h)||(s_.add(h),e={rel:e,crossOrigin:s,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),Ye(n,"link",e),Re(n),o.head.appendChild(n)))}}function QS(e){es.D(e),r_("dns-prefetch",e,null)}function YS(e,n){es.C(e,n),r_("preconnect",e,n)}function KS(e,n,s){es.L(e,n,s);var o=La;if(o&&e&&n){var h='link[rel="preload"][as="'+ln(n)+'"]';n==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+ln(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+ln(s.imageSizes)+'"]')):h+='[href="'+ln(e)+'"]';var f=h;switch(n){case"style":f=Pa(e);break;case"script":f=za(e)}Bn.has(f)||(e=b({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),Bn.set(f,e),o.querySelector(h)!==null||n==="style"&&o.querySelector(ll(f))||n==="script"&&o.querySelector(ul(f))||(n=o.createElement("link"),Ye(n,"link",e),Re(n),o.head.appendChild(n)))}}function XS(e,n){es.m(e,n);var s=La;if(s&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+ln(o)+'"][href="'+ln(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=za(e)}if(!Bn.has(f)&&(e=b({rel:"modulepreload",href:e},n),Bn.set(f,e),s.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ul(f)))return}o=s.createElement("link"),Ye(o,"link",e),Re(o),s.head.appendChild(o)}}}function $S(e,n,s){es.S(e,n,s);var o=La;if(o&&e){var h=ci(o).hoistableStyles,f=Pa(e);n=n||"default";var p=h.get(f);if(!p){var E={loading:0,preload:null};if(p=o.querySelector(ll(f)))E.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":n},s),(s=Bn.get(f))&&gd(e,s);var D=p=o.createElement("link");Re(D),Ye(D,"link",e),D._p=new Promise(function(z,G){D.onload=z,D.onerror=G}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,uc(p,n,o)}p={type:"stylesheet",instance:p,count:1,state:E},h.set(f,p)}}}function ZS(e,n){es.X(e,n);var s=La;if(s&&e){var o=ci(s).hoistableScripts,h=za(e),f=o.get(h);f||(f=s.querySelector(ul(h)),f||(e=b({src:e,async:!0},n),(n=Bn.get(h))&&pd(e,n),f=s.createElement("script"),Re(f),Ye(f,"link",e),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function JS(e,n){es.M(e,n);var s=La;if(s&&e){var o=ci(s).hoistableScripts,h=za(e),f=o.get(h);f||(f=s.querySelector(ul(h)),f||(e=b({src:e,async:!0,type:"module"},n),(n=Bn.get(h))&&pd(e,n),f=s.createElement("script"),Re(f),Ye(f,"link",e),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function a_(e,n,s,o){var h=(h=wt.current)?lc(h):null;if(!h)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Pa(s.href),s=ci(h).hoistableStyles,o=s.get(n),o||(o={type:"style",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Pa(s.href);var f=ci(h).hoistableStyles,p=f.get(e);if(p||(h=h.ownerDocument||h,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,p),(f=h.querySelector(ll(e)))&&!f._p&&(p.instance=f,p.state.loading=5),Bn.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Bn.set(e,s),f||WS(h,e,s,p.state))),n&&o===null)throw Error(a(528,""));return p}if(n&&o!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=za(s),s=ci(h).hoistableScripts,o=s.get(n),o||(o={type:"script",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Pa(e){return'href="'+ln(e)+'"'}function ll(e){return'link[rel="stylesheet"]['+e+"]"}function o_(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function WS(e,n,s,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Ye(n,"link",s),Re(n),e.head.appendChild(n))}function za(e){return'[src="'+ln(e)+'"]'}function ul(e){return"script[async]"+e}function l_(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+ln(s.href)+'"]');if(o)return n.instance=o,Re(o),o;var h=b({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Re(o),Ye(o,"style",h),uc(o,s.precedence,e),n.instance=o;case"stylesheet":h=Pa(s.href);var f=e.querySelector(ll(h));if(f)return n.state.loading|=4,n.instance=f,Re(f),f;o=o_(s),(h=Bn.get(h))&&gd(o,h),f=(e.ownerDocument||e).createElement("link"),Re(f);var p=f;return p._p=new Promise(function(E,D){p.onload=E,p.onerror=D}),Ye(f,"link",o),n.state.loading|=4,uc(f,s.precedence,e),n.instance=f;case"script":return f=za(s.src),(h=e.querySelector(ul(f)))?(n.instance=h,Re(h),h):(o=s,(h=Bn.get(f))&&(o=b({},s),pd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),Re(h),Ye(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,uc(o,s.precedence,e));return n.instance}function uc(e,n,s){for(var o=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,p=0;p<o.length;p++){var E=o[p];if(E.dataset.precedence===n)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function gd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function pd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var cc=null;function u_(e,n,s){if(cc===null){var o=new Map,h=cc=new Map;h.set(s,o)}else h=cc,o=h.get(s),o||(o=new Map,h.set(s,o));if(o.has(e))return o;for(o.set(e,null),s=s.getElementsByTagName(e),h=0;h<s.length;h++){var f=s[h];if(!(f[li]||f[we]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var p=f.getAttribute(n)||"";p=e+p;var E=o.get(p);E?E.push(f):o.set(p,[f])}}return o}function c_(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function tb(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function h_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function eb(e,n,s,o){if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=Pa(o.href),f=n.querySelector(ll(h));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=hc.bind(e),n.then(e,e)),s.state.loading|=4,s.instance=f,Re(f);return}f=n.ownerDocument||n,o=o_(o),(h=Bn.get(h))&&gd(o,h),f=f.createElement("link"),Re(f);var p=f;p._p=new Promise(function(E,D){p.onload=E,p.onerror=D}),Ye(f,"link",o),s.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=hc.bind(e),n.addEventListener("load",s),n.addEventListener("error",s))}}var yd=0;function nb(e,n){return e.stylesheets&&e.count===0&&dc(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var o=setTimeout(function(){if(e.stylesheets&&dc(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+n);0<e.imgBytes&&yd===0&&(yd=62500*kS());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&dc(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>yd?50:800)+n);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function hc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)dc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var fc=null;function dc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,fc=new Map,n.forEach(ib,e),fc=null,hc.call(e))}function ib(e,n){if(!(n.state.loading&4)){var s=fc.get(e);if(s)var o=s.get(null);else{s=new Map,fc.set(e,s);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var p=h[f];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(s.set(p.dataset.precedence,p),o=p)}o&&s.set(null,o)}h=n.instance,p=h.getAttribute("data-precedence"),f=s.get(p)||o,f===o&&s.set(null,h),s.set(p,h),this.count++,o=hc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var cl={$$typeof:dt,Provider:null,Consumer:null,_currentValue:ht,_currentValue2:ht,_threadCount:0};function sb(e,n,s,o,h,f,p,E,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ai(0),this.hiddenUpdates=ai(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function f_(e,n,s,o,h,f,p,E,D,z,G,K){return e=new sb(e,n,s,p,D,z,G,K,E),n=1,f===!0&&(n|=24),f=Tn(3,null,null,n),e.current=f,f.stateNode=e,n=Xh(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:s,cache:n},Wh(f),e}function d_(e){return e?(e=pa,e):pa}function m_(e,n,s,o,h,f){h=d_(h),o.context===null?o.context=h:o.pendingContext=h,o=Is(n),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=Ds(e,o,n),s!==null&&(mn(s,e,n),qo(s,e,n))}function g_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function _d(e,n){g_(e,n),(e=e.alternate)&&g_(e,n)}function p_(e){if(e.tag===13||e.tag===31){var n=Nr(e,67108864);n!==null&&mn(n,e,67108864),_d(e,67108864)}}function y_(e){if(e.tag===13||e.tag===31){var n=Rn();n=_r(n);var s=Nr(e,n);s!==null&&mn(s,e,n),_d(e,n)}}var mc=!0;function rb(e,n,s,o){var h=F.T;F.T=null;var f=nt.p;try{nt.p=2,vd(e,n,s,o)}finally{nt.p=f,F.T=h}}function ab(e,n,s,o){var h=F.T;F.T=null;var f=nt.p;try{nt.p=8,vd(e,n,s,o)}finally{nt.p=f,F.T=h}}function vd(e,n,s,o){if(mc){var h=Ed(o);if(h===null)rd(e,n,o,gc,s),v_(e,o);else if(lb(h,e,n,s,o))o.stopPropagation();else if(v_(e,o),n&4&&-1<ob.indexOf(e)){for(;h!==null;){var f=Nn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var p=si(f.pendingLanes);if(p!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;p;){var D=1<<31-ve(p);E.entanglements[1]|=D,p&=~D}bi(f),(Yt&6)===0&&(Zu=Kt()+500,sl(0))}}break;case 31:case 13:E=Nr(f,2),E!==null&&mn(E,f,2),Wu(),_d(f,2)}if(f=Ed(o),f===null&&rd(e,n,o,gc,s),f===h)break;h=f}h!==null&&o.stopPropagation()}else rd(e,n,o,null,s)}}function Ed(e){return e=On(e),Td(e)}var gc=null;function Td(e){if(gc=null,e=ui(e),e!==null){var n=c(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=d(n),e!==null)return e;e=null}else if(s===31){if(e=g(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return gc=e,null}function __(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yn()){case fo:return 2;case mo:return 8;case ds:case Rh:return 32;case Yl:return 268435456;default:return 32}default:return 32}}var Sd=!1,js=null,Bs=null,qs=null,hl=new Map,fl=new Map,Hs=[],ob="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function v_(e,n){switch(e){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":hl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":fl.delete(n.pointerId)}}function dl(e,n,s,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:s,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},n!==null&&(n=Nn(n),n!==null&&p_(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function lb(e,n,s,o,h){switch(n){case"focusin":return js=dl(js,e,n,s,o,h),!0;case"dragenter":return Bs=dl(Bs,e,n,s,o,h),!0;case"mouseover":return qs=dl(qs,e,n,s,o,h),!0;case"pointerover":var f=h.pointerId;return hl.set(f,dl(hl.get(f)||null,e,n,s,o,h)),!0;case"gotpointercapture":return f=h.pointerId,fl.set(f,dl(fl.get(f)||null,e,n,s,o,h)),!0}return!1}function E_(e){var n=ui(e.target);if(n!==null){var s=c(n);if(s!==null){if(n=s.tag,n===13){if(n=d(s),n!==null){e.blockedOn=n,Gn(e.priority,function(){y_(s)});return}}else if(n===31){if(n=g(s),n!==null){e.blockedOn=n,Gn(e.priority,function(){y_(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Ed(e.nativeEvent);if(s===null){s=e.nativeEvent;var o=new s.constructor(s.type,s);Ro=o,s.target.dispatchEvent(o),Ro=null}else return n=Nn(s),n!==null&&p_(n),e.blockedOn=s,!1;n.shift()}return!0}function T_(e,n,s){pc(e)&&s.delete(n)}function ub(){Sd=!1,js!==null&&pc(js)&&(js=null),Bs!==null&&pc(Bs)&&(Bs=null),qs!==null&&pc(qs)&&(qs=null),hl.forEach(T_),fl.forEach(T_)}function yc(e,n){e.blockedOn===n&&(e.blockedOn=null,Sd||(Sd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ub)))}var _c=null;function S_(e){_c!==e&&(_c=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){_c===e&&(_c=null);for(var n=0;n<e.length;n+=3){var s=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(Td(o||s)===null)continue;break}var f=Nn(s);f!==null&&(e.splice(n,3),n-=3,Ef(f,{pending:!0,data:h,method:s.method,action:o},o,h))}}))}function ja(e){function n(D){return yc(D,e)}js!==null&&yc(js,e),Bs!==null&&yc(Bs,e),qs!==null&&yc(qs,e),hl.forEach(n),fl.forEach(n);for(var s=0;s<Hs.length;s++){var o=Hs[s];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Hs.length&&(s=Hs[0],s.blockedOn===null);)E_(s),s.blockedOn===null&&Hs.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(o=0;o<s.length;o+=3){var h=s[o],f=s[o+1],p=h[Pe]||null;if(typeof f=="function")p||S_(s);else if(p){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,p=f[Pe]||null)E=p.formAction;else if(Td(h)!==null)continue}else E=p.action;typeof E=="function"?s[o+1]=E:(s.splice(o,3),o-=3),S_(s)}}}function b_(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(p){return h=p})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(s,20)}function s(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function bd(e){this._internalRoot=e}vc.prototype.render=bd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,o=Rn();m_(s,o,e,n,null,null)},vc.prototype.unmount=bd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;m_(e.current,2,null,e,null,null),Wu(),n[oi]=null}};function vc(e){this._internalRoot=e}vc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Wl();e={blockedOn:null,target:e,priority:n};for(var s=0;s<Hs.length&&n!==0&&n<Hs[s].priority;s++);Hs.splice(s,0,e),s===0&&E_(e)}};var A_=t.version;if(A_!=="19.2.0")throw Error(a(527,A_,"19.2.0"));nt.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=y(n),e=e!==null?T(e):null,e=e===null?null:e.stateNode,e};var cb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ec.isDisabled&&Ec.supportsFiber)try{Hn=Ec.inject(cb),qe=Ec}catch{}}return gl.createRoot=function(e,n){if(!l(e))throw Error(a(299));var s=!1,o="",h=Op,f=xp,p=Mp;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=f_(e,1,!1,null,null,s,o,null,h,f,p,b_),e[oi]=n.current,sd(e),new bd(n)},gl.hydrateRoot=function(e,n,s){if(!l(e))throw Error(a(299));var o=!1,h="",f=Op,p=xp,E=Mp,D=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.formState!==void 0&&(D=s.formState)),n=f_(e,1,!0,n,s??null,o,h,D,f,p,E,b_),n.context=d_(null),s=n.current,o=Rn(),o=_r(o),h=Is(o),h.callback=null,Ds(s,h,o),s=o,n.current.lanes=s,pr(n,s),bi(n),e[oi]=n.current,sd(e),new vc(n)},gl.version="19.2.0",gl}var V_;function Tb(){if(V_)return Rd.exports;V_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Rd.exports=Eb(),Rd.exports}var Sb=Tb();const bb=a0(Sb),Ab=()=>{};var U_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=function(r){const t=[];let i=0;for(let a=0;a<r.length;a++){let l=r.charCodeAt(a);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++a)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},wb=function(r){const t=[];let i=0,a=0;for(;i<r.length;){const l=r[i++];if(l<128)t[a++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[i++];t[a++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[i++],d=r[i++],g=r[i++],_=((l&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;t[a++]=String.fromCharCode(55296+(_>>10)),t[a++]=String.fromCharCode(56320+(_&1023))}else{const c=r[i++],d=r[i++];t[a++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},l0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,g=d?r[l+1]:0,_=l+2<r.length,y=_?r[l+2]:0,T=c>>2,b=(c&3)<<4|g>>4;let C=(g&15)<<2|y>>6,B=y&63;_||(B=64,d||(C=64)),a.push(i[T],i[b],i[C],i[B])}return a.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(o0(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):wb(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<r.length;){const c=i[r.charAt(l++)],g=l<r.length?i[r.charAt(l)]:0;++l;const y=l<r.length?i[r.charAt(l)]:64;++l;const b=l<r.length?i[r.charAt(l)]:64;if(++l,c==null||g==null||y==null||b==null)throw new Rb;const C=c<<2|g>>4;if(a.push(C),y!==64){const B=g<<4&240|y>>2;if(a.push(B),b!==64){const $=y<<6&192|b;a.push($)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Rb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Cb=function(r){const t=o0(r);return l0.encodeByteArray(t,!0)},Lc=function(r){return Cb(r).replace(/\./g,"")},u0=function(r){try{return l0.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=()=>Ib().__FIREBASE_DEFAULTS__,Nb=()=>{if(typeof process>"u"||typeof U_>"u")return;const r=U_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Ob=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&u0(r[1]);return t&&JSON.parse(t)},ih=()=>{try{return Ab()||Db()||Nb()||Ob()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},c0=r=>ih()?.emulatorHosts?.[r],xb=r=>{const t=c0(r);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),a]:[t.substring(0,i),a]},h0=()=>ih()?.config,f0=r=>ih()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function d0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Lc(JSON.stringify(i)),Lc(JSON.stringify(d)),""].join(".")}const Tl={};function Ub(){const r={prod:[],emulator:[]};for(const t of Object.keys(Tl))Tl[t]?r.emulator.push(t):r.prod.push(t);return r}function kb(r){let t=document.getElementById(r),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),i=!0),{created:i,element:t}}let k_=!1;function m0(r,t){if(typeof window>"u"||typeof document>"u"||!ro(window.location.host)||Tl[r]===t||Tl[r]||k_)return;Tl[r]=t;function i(C){return`__firebase__banner__${C}`}const a="__firebase__banner",c=Ub().prod.length>0;function d(){const C=document.getElementById(a);C&&C.remove()}function g(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function _(C,B){C.setAttribute("width","24"),C.setAttribute("id",B),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function y(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{k_=!0,d()},C}function T(C,B){C.setAttribute("id",B),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function b(){const C=kb(a),B=i("text"),$=document.getElementById(B)||document.createElement("span"),W=i("learnmore"),J=document.getElementById(W)||document.createElement("a"),lt=i("preprendIcon"),_t=document.getElementById(lt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const dt=C.element;g(dt),T(J,W);const Nt=y();_(_t,lt),dt.append(_t,$,J,Nt),document.body.appendChild(dt)}c?($.innerText="Preview backend disconnected.",_t.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_t.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function Pb(){const r=ih()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jb(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Bb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qb(){const r=sn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Hb(){return!Pb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fb(){try{return typeof indexedDB=="object"}catch{return!1}}function Gb(){return new Promise((r,t)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(a),r(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="FirebaseError";class us extends Error{constructor(t,i,a){super(i),this.code=t,this.customData=a,this.name=Qb,Object.setPrototypeOf(this,us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(t,i,a){this.service=t,this.serviceName=i,this.errors=a}create(t,...i){const a=i[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?Yb(c,a):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new us(l,g,a)}}function Yb(r,t){return r.replace(Kb,(i,a)=>{const l=t[a];return l!=null?String(l):`<${a}?>`})}const Kb=/\{\$([^}]+)}/g;function Xb(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Yr(r,t){if(r===t)return!0;const i=Object.keys(r),a=Object.keys(t);for(const l of i){if(!a.includes(l))return!1;const c=r[l],d=t[l];if(L_(c)&&L_(d)){if(!Yr(c,d))return!1}else if(c!==d)return!1}for(const l of a)if(!i.includes(l))return!1;return!0}function L_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(r){const t=[];for(const[i,a]of Object.entries(r))Array.isArray(a)?a.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function $b(r,t){const i=new Zb(r,t);return i.subscribe.bind(i)}class Zb{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,a){let l;if(t===void 0&&i===void 0&&a===void 0)throw new Error("Missing Observer.");Jb(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:a},l.next===void 0&&(l.next=Nd),l.error===void 0&&(l.error=Nd),l.complete===void 0&&(l.complete=Nd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jb(r,t){if(typeof r!="object"||r===null)return!1;for(const i of t)if(i in r&&typeof r[i]=="function")return!0;return!1}function Nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(r){return r&&r._delegate?r._delegate:r}class Kr{constructor(t,i,a){this.name=t,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const a=new Mb;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),a=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(eA(t))try{this.getOrInitializeService({instanceIdentifier:Hr})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:l});a.resolve(c)}catch{}}}}clearInstance(t=Hr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Hr){return this.instances.has(t)}getOptions(t=Hr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);a===g&&d.resolve(l)}return l}onInit(t,i){const a=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(a)??new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const a=this.onInitCallbacks.get(i);if(a)for(const l of a)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:tA(t),options:i}),this.instances.set(t,a),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=Hr){return this.component?this.component.multipleInstances?t:Hr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tA(r){return r===Hr?void 0:r}function eA(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new Wb(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pt||(Pt={}));const iA={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},sA=Pt.INFO,rA={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},aA=(r,t,...i)=>{if(t<r.logLevel)return;const a=new Date().toISOString(),l=rA[t];if(l)console[l](`[${a}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ym{constructor(t){this.name=t,this._logLevel=sA,this._logHandler=aA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?iA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const oA=(r,t)=>t.some(i=>r instanceof i);let P_,z_;function lA(){return P_||(P_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uA(){return z_||(z_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const g0=new WeakMap,Fd=new WeakMap,p0=new WeakMap,Od=new WeakMap,_m=new WeakMap;function cA(r){const t=new Promise((i,a)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{i(Zs(r.result)),l()},d=()=>{a(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return t.then(i=>{i instanceof IDBCursor&&g0.set(i,r)}).catch(()=>{}),_m.set(t,r),t}function hA(r){if(Fd.has(r))return;const t=new Promise((i,a)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{i(),l()},d=()=>{a(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Fd.set(r,t)}let Gd={get(r,t,i){if(r instanceof IDBTransaction){if(t==="done")return Fd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||p0.get(r);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Zs(r[t])},set(r,t,i){return r[t]=i,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function fA(r){Gd=r(Gd)}function dA(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const a=r.call(xd(this),t,...i);return p0.set(a,t.sort?t.sort():[t]),Zs(a)}:uA().includes(r)?function(...t){return r.apply(xd(this),t),Zs(g0.get(this))}:function(...t){return Zs(r.apply(xd(this),t))}}function mA(r){return typeof r=="function"?dA(r):(r instanceof IDBTransaction&&hA(r),oA(r,lA())?new Proxy(r,Gd):r)}function Zs(r){if(r instanceof IDBRequest)return cA(r);if(Od.has(r))return Od.get(r);const t=mA(r);return t!==r&&(Od.set(r,t),_m.set(t,r)),t}const xd=r=>_m.get(r);function gA(r,t,{blocked:i,upgrade:a,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),g=Zs(d);return a&&d.addEventListener("upgradeneeded",_=>{a(Zs(d.result),_.oldVersion,_.newVersion,Zs(d.transaction),_)}),i&&d.addEventListener("blocked",_=>i(_.oldVersion,_.newVersion,_)),g.then(_=>{c&&_.addEventListener("close",()=>c()),l&&_.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const pA=["get","getKey","getAll","getAllKeys","count"],yA=["put","add","delete","clear"],Md=new Map;function j_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Md.get(t))return Md.get(t);const i=t.replace(/FromIndex$/,""),a=t!==i,l=yA.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(l||pA.includes(i)))return;const c=async function(d,...g){const _=this.transaction(d,l?"readwrite":"readonly");let y=_.store;return a&&(y=y.index(g.shift())),(await Promise.all([y[i](...g),l&&_.done]))[0]};return Md.set(t,c),c}fA(r=>({...r,get:(t,i,a)=>j_(t,i)||r.get(t,i,a),has:(t,i)=>!!j_(t,i)||r.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(vA(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function vA(r){return r.getComponent()?.type==="VERSION"}const Qd="@firebase/app",B_="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new ym("@firebase/app"),EA="@firebase/app-compat",TA="@firebase/analytics-compat",SA="@firebase/analytics",bA="@firebase/app-check-compat",AA="@firebase/app-check",wA="@firebase/auth",RA="@firebase/auth-compat",CA="@firebase/database",IA="@firebase/data-connect",DA="@firebase/database-compat",NA="@firebase/functions",OA="@firebase/functions-compat",xA="@firebase/installations",MA="@firebase/installations-compat",VA="@firebase/messaging",UA="@firebase/messaging-compat",kA="@firebase/performance",LA="@firebase/performance-compat",PA="@firebase/remote-config",zA="@firebase/remote-config-compat",jA="@firebase/storage",BA="@firebase/storage-compat",qA="@firebase/firestore",HA="@firebase/ai",FA="@firebase/firestore-compat",GA="firebase",QA="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="[DEFAULT]",YA={[Qd]:"fire-core",[EA]:"fire-core-compat",[SA]:"fire-analytics",[TA]:"fire-analytics-compat",[AA]:"fire-app-check",[bA]:"fire-app-check-compat",[wA]:"fire-auth",[RA]:"fire-auth-compat",[CA]:"fire-rtdb",[IA]:"fire-data-connect",[DA]:"fire-rtdb-compat",[NA]:"fire-fn",[OA]:"fire-fn-compat",[xA]:"fire-iid",[MA]:"fire-iid-compat",[VA]:"fire-fcm",[UA]:"fire-fcm-compat",[kA]:"fire-perf",[LA]:"fire-perf-compat",[PA]:"fire-rc",[zA]:"fire-rc-compat",[jA]:"fire-gcs",[BA]:"fire-gcs-compat",[qA]:"fire-fst",[FA]:"fire-fst-compat",[HA]:"fire-vertex","fire-js":"fire-js",[GA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new Map,KA=new Map,Kd=new Map;function q_(r,t){try{r.container.addComponent(t)}catch(i){ss.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,i)}}function Za(r){const t=r.name;if(Kd.has(t))return ss.debug(`There were multiple attempts to register component ${t}.`),!1;Kd.set(t,r);for(const i of Pc.values())q_(i,r);for(const i of KA.values())q_(i,r);return!0}function vm(r,t){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(t)}function ei(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Js=new Ll("app","Firebase",XA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(t,i,a){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Js.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=QA;function y0(r,t={}){let i=r;typeof t!="object"&&(t={name:t});const a={name:Yd,automaticDataCollectionEnabled:!0,...t},l=a.name;if(typeof l!="string"||!l)throw Js.create("bad-app-name",{appName:String(l)});if(i||(i=h0()),!i)throw Js.create("no-options");const c=Pc.get(l);if(c){if(Yr(i,c.options)&&Yr(a,c.config))return c;throw Js.create("duplicate-app",{appName:l})}const d=new nA(l);for(const _ of Kd.values())d.addComponent(_);const g=new $A(i,a,d);return Pc.set(l,g),g}function _0(r=Yd){const t=Pc.get(r);if(!t&&r===Yd&&h0())return y0();if(!t)throw Js.create("no-app",{appName:r});return t}function Ws(r,t,i){let a=YA[r]??r;i&&(a+=`-${i}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ss.warn(d.join(" "));return}Za(new Kr(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="firebase-heartbeat-database",JA=1,Il="firebase-heartbeat-store";let Vd=null;function v0(){return Vd||(Vd=gA(ZA,JA,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Il)}catch(i){console.warn(i)}}}}).catch(r=>{throw Js.create("idb-open",{originalErrorMessage:r.message})})),Vd}async function WA(r){try{const i=(await v0()).transaction(Il),a=await i.objectStore(Il).get(E0(r));return await i.done,a}catch(t){if(t instanceof us)ss.warn(t.message);else{const i=Js.create("idb-get",{originalErrorMessage:t?.message});ss.warn(i.message)}}}async function H_(r,t){try{const a=(await v0()).transaction(Il,"readwrite");await a.objectStore(Il).put(t,E0(r)),await a.done}catch(i){if(i instanceof us)ss.warn(i.message);else{const a=Js.create("idb-set",{originalErrorMessage:i?.message});ss.warn(a.message)}}}function E0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=1024,e1=30;class n1{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new s1(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=F_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>e1){const l=r1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ss.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=F_(),{heartbeatsToSend:i,unsentEntries:a}=i1(this._heartbeatsCache.heartbeats),l=Lc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ss.warn(t),""}}}function F_(){return new Date().toISOString().substring(0,10)}function i1(r,t=t1){const i=[];let a=r.slice();for(const l of r){const c=i.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),G_(i)>t){c.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),G_(i)>t){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class s1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fb()?Gb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await WA(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const a=await this.read();return H_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const a=await this.read();return H_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function G_(r){return Lc(JSON.stringify({version:2,heartbeats:r})).length}function r1(r){if(r.length===0)return-1;let t=0,i=r[0].date;for(let a=1;a<r.length;a++)r[a].date<i&&(i=r[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(r){Za(new Kr("platform-logger",t=>new _A(t),"PRIVATE")),Za(new Kr("heartbeat",t=>new n1(t),"PRIVATE")),Ws(Qd,B_,r),Ws(Qd,B_,"esm2020"),Ws("fire-js","")}a1("");var o1="firebase",l1="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ws(o1,l1,"app");var Q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tr,T0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,A){function R(){}R.prototype=A.prototype,I.F=A.prototype,I.prototype=new R,I.prototype.constructor=I,I.D=function(M,N,U){for(var w=Array(arguments.length-2),re=2;re<arguments.length;re++)w[re-2]=arguments[re];return A.prototype[N].apply(M,w)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(a,i),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(I,A,R){R||(R=0);const M=Array(16);if(typeof A=="string")for(var N=0;N<16;++N)M[N]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(N=0;N<16;++N)M[N]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=I.g[0],R=I.g[1],N=I.g[2];let U=I.g[3],w;w=A+(U^R&(N^U))+M[0]+3614090360&4294967295,A=R+(w<<7&4294967295|w>>>25),w=U+(N^A&(R^N))+M[1]+3905402710&4294967295,U=A+(w<<12&4294967295|w>>>20),w=N+(R^U&(A^R))+M[2]+606105819&4294967295,N=U+(w<<17&4294967295|w>>>15),w=R+(A^N&(U^A))+M[3]+3250441966&4294967295,R=N+(w<<22&4294967295|w>>>10),w=A+(U^R&(N^U))+M[4]+4118548399&4294967295,A=R+(w<<7&4294967295|w>>>25),w=U+(N^A&(R^N))+M[5]+1200080426&4294967295,U=A+(w<<12&4294967295|w>>>20),w=N+(R^U&(A^R))+M[6]+2821735955&4294967295,N=U+(w<<17&4294967295|w>>>15),w=R+(A^N&(U^A))+M[7]+4249261313&4294967295,R=N+(w<<22&4294967295|w>>>10),w=A+(U^R&(N^U))+M[8]+1770035416&4294967295,A=R+(w<<7&4294967295|w>>>25),w=U+(N^A&(R^N))+M[9]+2336552879&4294967295,U=A+(w<<12&4294967295|w>>>20),w=N+(R^U&(A^R))+M[10]+4294925233&4294967295,N=U+(w<<17&4294967295|w>>>15),w=R+(A^N&(U^A))+M[11]+2304563134&4294967295,R=N+(w<<22&4294967295|w>>>10),w=A+(U^R&(N^U))+M[12]+1804603682&4294967295,A=R+(w<<7&4294967295|w>>>25),w=U+(N^A&(R^N))+M[13]+4254626195&4294967295,U=A+(w<<12&4294967295|w>>>20),w=N+(R^U&(A^R))+M[14]+2792965006&4294967295,N=U+(w<<17&4294967295|w>>>15),w=R+(A^N&(U^A))+M[15]+1236535329&4294967295,R=N+(w<<22&4294967295|w>>>10),w=A+(N^U&(R^N))+M[1]+4129170786&4294967295,A=R+(w<<5&4294967295|w>>>27),w=U+(R^N&(A^R))+M[6]+3225465664&4294967295,U=A+(w<<9&4294967295|w>>>23),w=N+(A^R&(U^A))+M[11]+643717713&4294967295,N=U+(w<<14&4294967295|w>>>18),w=R+(U^A&(N^U))+M[0]+3921069994&4294967295,R=N+(w<<20&4294967295|w>>>12),w=A+(N^U&(R^N))+M[5]+3593408605&4294967295,A=R+(w<<5&4294967295|w>>>27),w=U+(R^N&(A^R))+M[10]+38016083&4294967295,U=A+(w<<9&4294967295|w>>>23),w=N+(A^R&(U^A))+M[15]+3634488961&4294967295,N=U+(w<<14&4294967295|w>>>18),w=R+(U^A&(N^U))+M[4]+3889429448&4294967295,R=N+(w<<20&4294967295|w>>>12),w=A+(N^U&(R^N))+M[9]+568446438&4294967295,A=R+(w<<5&4294967295|w>>>27),w=U+(R^N&(A^R))+M[14]+3275163606&4294967295,U=A+(w<<9&4294967295|w>>>23),w=N+(A^R&(U^A))+M[3]+4107603335&4294967295,N=U+(w<<14&4294967295|w>>>18),w=R+(U^A&(N^U))+M[8]+1163531501&4294967295,R=N+(w<<20&4294967295|w>>>12),w=A+(N^U&(R^N))+M[13]+2850285829&4294967295,A=R+(w<<5&4294967295|w>>>27),w=U+(R^N&(A^R))+M[2]+4243563512&4294967295,U=A+(w<<9&4294967295|w>>>23),w=N+(A^R&(U^A))+M[7]+1735328473&4294967295,N=U+(w<<14&4294967295|w>>>18),w=R+(U^A&(N^U))+M[12]+2368359562&4294967295,R=N+(w<<20&4294967295|w>>>12),w=A+(R^N^U)+M[5]+4294588738&4294967295,A=R+(w<<4&4294967295|w>>>28),w=U+(A^R^N)+M[8]+2272392833&4294967295,U=A+(w<<11&4294967295|w>>>21),w=N+(U^A^R)+M[11]+1839030562&4294967295,N=U+(w<<16&4294967295|w>>>16),w=R+(N^U^A)+M[14]+4259657740&4294967295,R=N+(w<<23&4294967295|w>>>9),w=A+(R^N^U)+M[1]+2763975236&4294967295,A=R+(w<<4&4294967295|w>>>28),w=U+(A^R^N)+M[4]+1272893353&4294967295,U=A+(w<<11&4294967295|w>>>21),w=N+(U^A^R)+M[7]+4139469664&4294967295,N=U+(w<<16&4294967295|w>>>16),w=R+(N^U^A)+M[10]+3200236656&4294967295,R=N+(w<<23&4294967295|w>>>9),w=A+(R^N^U)+M[13]+681279174&4294967295,A=R+(w<<4&4294967295|w>>>28),w=U+(A^R^N)+M[0]+3936430074&4294967295,U=A+(w<<11&4294967295|w>>>21),w=N+(U^A^R)+M[3]+3572445317&4294967295,N=U+(w<<16&4294967295|w>>>16),w=R+(N^U^A)+M[6]+76029189&4294967295,R=N+(w<<23&4294967295|w>>>9),w=A+(R^N^U)+M[9]+3654602809&4294967295,A=R+(w<<4&4294967295|w>>>28),w=U+(A^R^N)+M[12]+3873151461&4294967295,U=A+(w<<11&4294967295|w>>>21),w=N+(U^A^R)+M[15]+530742520&4294967295,N=U+(w<<16&4294967295|w>>>16),w=R+(N^U^A)+M[2]+3299628645&4294967295,R=N+(w<<23&4294967295|w>>>9),w=A+(N^(R|~U))+M[0]+4096336452&4294967295,A=R+(w<<6&4294967295|w>>>26),w=U+(R^(A|~N))+M[7]+1126891415&4294967295,U=A+(w<<10&4294967295|w>>>22),w=N+(A^(U|~R))+M[14]+2878612391&4294967295,N=U+(w<<15&4294967295|w>>>17),w=R+(U^(N|~A))+M[5]+4237533241&4294967295,R=N+(w<<21&4294967295|w>>>11),w=A+(N^(R|~U))+M[12]+1700485571&4294967295,A=R+(w<<6&4294967295|w>>>26),w=U+(R^(A|~N))+M[3]+2399980690&4294967295,U=A+(w<<10&4294967295|w>>>22),w=N+(A^(U|~R))+M[10]+4293915773&4294967295,N=U+(w<<15&4294967295|w>>>17),w=R+(U^(N|~A))+M[1]+2240044497&4294967295,R=N+(w<<21&4294967295|w>>>11),w=A+(N^(R|~U))+M[8]+1873313359&4294967295,A=R+(w<<6&4294967295|w>>>26),w=U+(R^(A|~N))+M[15]+4264355552&4294967295,U=A+(w<<10&4294967295|w>>>22),w=N+(A^(U|~R))+M[6]+2734768916&4294967295,N=U+(w<<15&4294967295|w>>>17),w=R+(U^(N|~A))+M[13]+1309151649&4294967295,R=N+(w<<21&4294967295|w>>>11),w=A+(N^(R|~U))+M[4]+4149444226&4294967295,A=R+(w<<6&4294967295|w>>>26),w=U+(R^(A|~N))+M[11]+3174756917&4294967295,U=A+(w<<10&4294967295|w>>>22),w=N+(A^(U|~R))+M[2]+718787259&4294967295,N=U+(w<<15&4294967295|w>>>17),w=R+(U^(N|~A))+M[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(N+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+U&4294967295}a.prototype.v=function(I,A){A===void 0&&(A=I.length);const R=A-this.blockSize,M=this.C;let N=this.h,U=0;for(;U<A;){if(N==0)for(;U<=R;)l(this,I,U),U+=this.blockSize;if(typeof I=="string"){for(;U<A;)if(M[N++]=I.charCodeAt(U++),N==this.blockSize){l(this,M),N=0;break}}else for(;U<A;)if(M[N++]=I[U++],N==this.blockSize){l(this,M),N=0;break}}this.h=N,this.o+=A},a.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;A=this.o*8;for(var R=I.length-8;R<I.length;++R)I[R]=A&255,A/=256;for(this.v(I),I=Array(16),A=0,R=0;R<4;++R)for(let M=0;M<32;M+=8)I[A++]=this.g[R]>>>M&255;return I};function c(I,A){var R=g;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=A(I)}function d(I,A){this.h=A;const R=[];let M=!0;for(let N=I.length-1;N>=0;N--){const U=I[N]|0;M&&U==A||(R[N]=U,M=!1)}this.g=R}var g={};function _(I){return-128<=I&&I<128?c(I,function(A){return new d([A|0],A<0?-1:0)}):new d([I|0],I<0?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return b;if(I<0)return J(y(-I));const A=[];let R=1;for(let M=0;I>=R;M++)A[M]=I/R|0,R*=4294967296;return new d(A,0)}function T(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return J(T(I.substring(1),A));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(A,8));let M=b;for(let U=0;U<I.length;U+=8){var N=Math.min(8,I.length-U);const w=parseInt(I.substring(U,U+N),A);N<8?(N=y(Math.pow(A,N)),M=M.j(N).add(y(w))):(M=M.j(R),M=M.add(y(w)))}return M}var b=_(0),C=_(1),B=_(16777216);r=d.prototype,r.m=function(){if(W(this))return-J(this).m();let I=0,A=1;for(let R=0;R<this.g.length;R++){const M=this.i(R);I+=(M>=0?M:4294967296+M)*A,A*=4294967296}return I},r.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if($(this))return"0";if(W(this))return"-"+J(this).toString(I);const A=y(Math.pow(I,6));var R=this;let M="";for(;;){const N=Nt(R,A).g;R=lt(R,N.j(A));let U=((R.g.length>0?R.g[0]:R.h)>>>0).toString(I);if(R=N,$(R))return U+M;for(;U.length<6;)U="0"+U;M=U+M}},r.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function $(I){if(I.h!=0)return!1;for(let A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function W(I){return I.h==-1}r.l=function(I){return I=lt(this,I),W(I)?-1:$(I)?0:1};function J(I){const A=I.g.length,R=[];for(let M=0;M<A;M++)R[M]=~I.g[M];return new d(R,~I.h).add(C)}r.abs=function(){return W(this)?J(this):this},r.add=function(I){const A=Math.max(this.g.length,I.g.length),R=[];let M=0;for(let N=0;N<=A;N++){let U=M+(this.i(N)&65535)+(I.i(N)&65535),w=(U>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);M=w>>>16,U&=65535,w&=65535,R[N]=w<<16|U}return new d(R,R[R.length-1]&-2147483648?-1:0)};function lt(I,A){return I.add(J(A))}r.j=function(I){if($(this)||$(I))return b;if(W(this))return W(I)?J(this).j(J(I)):J(J(this).j(I));if(W(I))return J(this.j(J(I)));if(this.l(B)<0&&I.l(B)<0)return y(this.m()*I.m());const A=this.g.length+I.g.length,R=[];for(var M=0;M<2*A;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(let N=0;N<I.g.length;N++){const U=this.i(M)>>>16,w=this.i(M)&65535,re=I.i(N)>>>16,ye=I.i(N)&65535;R[2*M+2*N]+=w*ye,_t(R,2*M+2*N),R[2*M+2*N+1]+=U*ye,_t(R,2*M+2*N+1),R[2*M+2*N+1]+=w*re,_t(R,2*M+2*N+1),R[2*M+2*N+2]+=U*re,_t(R,2*M+2*N+2)}for(I=0;I<A;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=A;I<2*A;I++)R[I]=0;return new d(R,0)};function _t(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function dt(I,A){this.g=I,this.h=A}function Nt(I,A){if($(A))throw Error("division by zero");if($(I))return new dt(b,b);if(W(I))return A=Nt(J(I),A),new dt(J(A.g),J(A.h));if(W(A))return A=Nt(I,J(A)),new dt(J(A.g),A.h);if(I.g.length>30){if(W(I)||W(A))throw Error("slowDivide_ only works with positive integers.");for(var R=C,M=A;M.l(I)<=0;)R=$t(R),M=$t(M);var N=gt(R,1),U=gt(M,1);for(M=gt(M,2),R=gt(R,2);!$(M);){var w=U.add(M);w.l(I)<=0&&(N=N.add(R),U=w),M=gt(M,1),R=gt(R,1)}return A=lt(I,N.j(A)),new dt(N,A)}for(N=b;I.l(A)>=0;){for(R=Math.max(1,Math.floor(I.m()/A.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),U=y(R),w=U.j(A);W(w)||w.l(I)>0;)R-=M,U=y(R),w=U.j(A);$(U)&&(U=C),N=N.add(U),I=lt(I,w)}return new dt(N,I)}r.B=function(I){return Nt(this,I).h},r.and=function(I){const A=Math.max(this.g.length,I.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)&I.i(M);return new d(R,this.h&I.h)},r.or=function(I){const A=Math.max(this.g.length,I.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)|I.i(M);return new d(R,this.h|I.h)},r.xor=function(I){const A=Math.max(this.g.length,I.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)^I.i(M);return new d(R,this.h^I.h)};function $t(I){const A=I.g.length+1,R=[];for(let M=0;M<A;M++)R[M]=I.i(M)<<1|I.i(M-1)>>>31;return new d(R,I.h)}function gt(I,A){const R=A>>5;A%=32;const M=I.g.length-R,N=[];for(let U=0;U<M;U++)N[U]=A>0?I.i(U+R)>>>A|I.i(U+R+1)<<32-A:I.i(U+R);return new d(N,I.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,T0=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,tr=d}).apply(typeof Q_<"u"?Q_:typeof self<"u"?self:typeof window<"u"?window:{});var Tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var S0,pl,b0,Cc,Xd,A0,w0,R0;(function(){var r,t=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tc=="object"&&Tc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var a=i(this);function l(u,m){if(m)t:{var v=a;u=u.split(".");for(var S=0;S<u.length-1;S++){var L=u[S];if(!(L in v))break t;v=v[L]}u=u[u.length-1],S=v[u],m=m(S),m!=S&&m!=null&&t(v,u,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(m){var v=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&v.push([S,m[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function y(u,m,v){return y=_,y.apply(null,arguments)}function T(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function b(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(S,L,q){for(var tt=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)tt[Ct-2]=arguments[Ct];return m.prototype[L].apply(S,tt)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function B(u){const m=u.length;if(m>0){const v=Array(m);for(let S=0;S<m;S++)v[S]=u[S];return v}return[]}function $(u,m){for(let S=1;S<arguments.length;S++){const L=arguments[S];var v=typeof L;if(v=v!="object"?v:L?Array.isArray(L)?"array":v:"null",v=="array"||v=="object"&&typeof L.length=="number"){v=u.length||0;const q=L.length||0;u.length=v+q;for(let tt=0;tt<q;tt++)u[v+tt]=L[tt]}else u.push(L)}}class W{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function J(u){d.setTimeout(()=>{throw u},0)}function lt(){var u=I;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class _t{constructor(){this.h=this.g=null}add(m,v){const S=dt.get();S.set(m,v),this.h?this.h.next=S:this.g=S,this.h=S}}var dt=new W(()=>new Nt,u=>u.reset());class Nt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let $t,gt=!1,I=new _t,A=()=>{const u=Promise.resolve(void 0);$t=()=>{u.then(R)}};function R(){for(var u;u=lt();){try{u.h.call(u.g)}catch(v){J(v)}var m=dt;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}gt=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u})();function w(u){return/^[\s\xa0]*$/.test(u)}function re(u,m){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}b(re,N),re.prototype.init=function(u,m){const v=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&re.Z.h.call(this)},re.prototype.h=function(){re.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),F=0;function nt(u,m,v,S,L){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!S,this.ha=L,this.key=++F,this.da=this.fa=!1}function ht(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Bt(u,m,v){for(const S in u)m.call(v,u[S],S,u)}function Ot(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function O(u){const m={};for(const v in u)m[v]=u[v];return m}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function it(u,m){let v,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(v in S)u[v]=S[v];for(let q=0;q<Y.length;q++)v=Y[q],Object.prototype.hasOwnProperty.call(S,v)&&(u[v]=S[v])}}function st(u){this.src=u,this.g={},this.h=0}st.prototype.add=function(u,m,v,S,L){const q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);const tt=wt(u,m,S,L);return tt>-1?(m=u[tt],v||(m.fa=!1)):(m=new nt(m,this.src,q,!!S,L),m.fa=v,u.push(m)),m};function vt(u,m){const v=m.type;if(v in u.g){var S=u.g[v],L=Array.prototype.indexOf.call(S,m,void 0),q;(q=L>=0)&&Array.prototype.splice.call(S,L,1),q&&(ht(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function wt(u,m,v,S){for(let L=0;L<u.length;++L){const q=u[L];if(!q.da&&q.listener==m&&q.capture==!!v&&q.ha==S)return L}return-1}var xt="closure_lm_"+(Math.random()*1e6|0),_e={};function ae(u,m,v,S,L){if(Array.isArray(m)){for(let q=0;q<m.length;q++)ae(u,m[q],v,S,L);return null}return v=et(v),u&&u[ye]?u.J(m,v,g(S)?!!S.capture:!1,L):Ui(u,m,v,!1,S,L)}function Ui(u,m,v,S,L,q){if(!m)throw Error("Invalid event type");const tt=g(L)?!!L.capture:!!L;let Ct=ki(u);if(Ct||(u[xt]=Ct=new st(u)),v=Ct.add(m,v,S,tt,q),v.proxy)return v;if(S=cs(),v.proxy=S,S.src=u,S.listener=v,u.addEventListener)U||(L=tt),L===void 0&&(L=!1),u.addEventListener(m.toString(),S,L);else if(u.attachEvent)u.attachEvent(In(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function cs(){function u(v){return m.call(u.src,u.listener,v)}const m=dr;return u}function hs(u,m,v,S,L){if(Array.isArray(m))for(var q=0;q<m.length;q++)hs(u,m[q],v,S,L);else S=g(S)?!!S.capture:!!S,v=et(v),u&&u[ye]?(u=u.i,q=String(m).toString(),q in u.g&&(m=u.g[q],v=wt(m,v,S,L),v>-1&&(ht(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[q],u.h--)))):u&&(u=ki(u))&&(m=u.g[m.toString()],u=-1,m&&(u=wt(m,v,S,L)),(v=u>-1?m[u]:null)&&fs(v))}function fs(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ye])vt(m.i,u);else{var v=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(v,S,u.capture):m.detachEvent?m.detachEvent(In(v),S):m.addListener&&m.removeListener&&m.removeListener(S),(v=ki(m))?(vt(v,u),v.h==0&&(v.src=null,m[xt]=null)):ht(u)}}}function In(u){return u in _e?_e[u]:_e[u]="on"+u}function dr(u,m){if(u.da)u=!0;else{m=new re(m,this);const v=u.listener,S=u.ha||u.src;u.fa&&fs(u),u=v.call(S,m)}return u}function ki(u){return u=u[xt],u instanceof st?u:null}var mr="__closure_events_fn_"+(Math.random()*1e9>>>0);function et(u){return typeof u=="function"?u:(u[mr]||(u[mr]=function(m){return u.handleEvent(m)}),u[mr])}function rt(){M.call(this),this.i=new st(this),this.M=this,this.G=null}b(rt,M),rt.prototype[ye]=!0,rt.prototype.removeEventListener=function(u,m,v,S){hs(this,u,m,v,S)};function Rt(u,m){var v,S=u.G;if(S)for(v=[];S;S=S.G)v.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new N(m,u);else if(m instanceof N)m.target=m.target||u;else{var L=m;m=new N(S,u),it(m,L)}L=!0;let q,tt;if(v)for(tt=v.length-1;tt>=0;tt--)q=m.g=v[tt],L=Ut(q,S,!0,m)&&L;if(q=m.g=u,L=Ut(q,S,!0,m)&&L,L=Ut(q,S,!1,m)&&L,v)for(tt=0;tt<v.length;tt++)q=m.g=v[tt],L=Ut(q,S,!1,m)&&L}rt.prototype.N=function(){if(rt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let S=0;S<v.length;S++)ht(v[S]);delete u.g[m],u.h--}}this.G=null},rt.prototype.J=function(u,m,v,S){return this.i.add(String(u),m,!1,v,S)},rt.prototype.K=function(u,m,v,S){return this.i.add(String(u),m,!0,v,S)};function Ut(u,m,v,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let L=!0;for(let q=0;q<m.length;++q){const tt=m[q];if(tt&&!tt.da&&tt.capture==v){const Ct=tt.listener,Ee=tt.ha||tt.src;tt.fa&&vt(u.i,tt),L=Ct.call(Ee,S)!==!1&&L}}return L&&!S.defaultPrevented}function oe(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:d.setTimeout(u,m||0)}function Ze(u){u.g=oe(()=>{u.g=null,u.i&&(u.i=!1,Ze(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Kt extends M{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ze(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(u){M.call(this),this.h=u,this.g={}}b(yn,M);var fo=[];function mo(u){Bt(u.g,function(m,v){this.g.hasOwnProperty(v)&&fs(m)},u),u.g={}}yn.prototype.N=function(){yn.Z.N.call(this),mo(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ds=d.JSON.stringify,Rh=d.JSON.parse,Yl=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Kl(){}function Xl(){}var Hn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qe(){N.call(this,"d")}b(qe,N);function Dn(){N.call(this,"c")}b(Dn,N);var ve={},$l=null;function ta(){return $l=$l||new rt}ve.Ia="serverreachability";function Zl(u){N.call(this,ve.Ia,u)}b(Zl,N);function ii(u){const m=ta();Rt(m,new Zl(m))}ve.STAT_EVENT="statevent";function gr(u,m){N.call(this,ve.STAT_EVENT,u),this.stat=m}b(gr,N);function Ae(u){const m=ta();Rt(m,new gr(m,u))}ve.Ja="timingevent";function si(u,m){N.call(this,ve.Ja,u),this.size=m}b(si,N);function ri(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function Fn(){this.g=!0}Fn.prototype.ua=function(){this.g=!1};function Ch(u,m,v,S,L,q){u.info(function(){if(u.g)if(q){var tt="",Ct=q.split("&");for(let Qt=0;Qt<Ct.length;Qt++){var Ee=Ct[Qt].split("=");if(Ee.length>1){const he=Ee[0];Ee=Ee[1];const Mn=he.split("_");tt=Mn.length>=2&&Mn[1]=="type"?tt+(he+"="+Ee+"&"):tt+(he+"=redacted&")}}}else tt=null;else tt=q;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+m+`
`+v+`
`+tt})}function Jl(u,m,v,S,L,q,tt){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+m+`
`+v+`
`+q+" "+tt})}function ai(u,m,v,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ih(u,v)+(S?" "+S:"")})}function pr(u,m){u.info(function(){return"TIMEOUT: "+m})}Fn.prototype.info=function(){};function Ih(u,m){if(!u.g)return m;if(!m)return null;try{const q=JSON.parse(m);if(q){for(u=0;u<q.length;u++)if(Array.isArray(q[u])){var v=q[u];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var L=S[0];if(L!="noop"&&L!="stop"&&L!="close")for(let tt=1;tt<S.length;tt++)S[tt]=""}}}}return ds(q)}catch{return m}}var yr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},go={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},po;function _r(){}b(_r,Kl),_r.prototype.g=function(){return new XMLHttpRequest},po=new _r;function Li(u){return encodeURIComponent(String(u))}function Wl(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function Gn(u,m,v,S){this.j=u,this.i=m,this.l=v,this.S=S||1,this.V=new yn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qn}function Qn(){this.i=null,this.g="",this.h=!1}var we={},Pe={};function oi(u,m,v){u.M=1,u.A=vr(Ce(m)),u.u=v,u.R=!0,ea(u,null)}function ea(u,m){u.F=Date.now(),li(u),u.B=Ce(u.A);var v=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),ra(v.i,"t",S),u.C=0,v=u.j.L,u.h=new Qn,u.g=mu(u.j,v?m:null,!u.u),u.P>0&&(u.O=new Kt(y(u.Y,u,u.g),u.P)),m=u.V,v=u.g,S=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(fo[0]=L.toString()),L=fo);for(let q=0;q<L.length;q++){const tt=ae(v,L[q],S||m.handleEvent,!1,m.h||m);if(!tt)break;m.g[tt.key]=tt}m=u.J?O(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),ii(),Ch(u.i,u.v,u.B,u.l,u.S,u.u)}Gn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Xn(u)==3?m.j():this.Y(u)},Gn.prototype.Y=function(u){try{if(u==this.g)t:{const Ct=Xn(this.g),Ee=this.g.ya(),Qt=this.g.ca();if(!(Ct<3)&&(Ct!=3||this.g&&(this.h.h||this.g.la()||He(this.g)))){this.K||Ct!=4||Ee==7||(Ee==8||Qt<=0?ii(3):ii(2)),ui(this);var m=this.g.ca();this.X=m;var v=Dh(this);if(this.o=m==200,Jl(this.i,this.v,this.B,this.l,this.S,Ct,m),this.o){if(this.U&&!this.L){e:{if(this.g){var S,L=this.g;if((S=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(S)){var q=S;break e}}q=null}if(u=q)ai(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ci(this,u);else{this.o=!1,this.m=3,Ae(12),_n(this),Nn(this);break t}}if(this.R){u=!0;let he;for(;!this.K&&this.C<v.length;)if(he=eu(this,v),he==Pe){Ct==4&&(this.m=4,Ae(14),u=!1),ai(this.i,this.l,null,"[Incomplete Response]");break}else if(he==we){this.m=4,Ae(15),ai(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else ai(this.i,this.l,he,null),ci(this,he);if(tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||v.length!=0||this.h.h||(this.m=1,Ae(16),u=!1),this.o=this.o&&u,!u)ai(this.i,this.l,v,"[Invalid Chunked Response]"),_n(this),Nn(this);else if(v.length>0&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.aa&&!tt.P&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Oo(tt),tt.P=!0,Ae(11))}}else ai(this.i,this.l,v,null),ci(this,v);Ct==4&&_n(this),this.o&&!this.K&&(Ct==4?cu(this.j,this):(this.o=!1,li(this)))}else zi(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,Ae(12)):(this.m=0,Ae(13)),_n(this),Nn(this)}}}catch{}finally{}};function Dh(u){if(!tu(u))return u.g.la();const m=He(u.g);if(m==="")return"";let v="";const S=m.length,L=Xn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return _n(u),Nn(u),"";u.h.i=new d.TextDecoder}for(let q=0;q<S;q++)u.h.h=!0,v+=u.h.i.decode(m[q],{stream:!(L&&q==S-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function tu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function eu(u,m){var v=u.C,S=m.indexOf(`
`,v);return S==-1?Pe:(v=Number(m.substring(v,S)),isNaN(v)?we:(S+=1,S+v>m.length?Pe:(m=m.slice(S,S+v),u.C=S+v,m)))}Gn.prototype.cancel=function(){this.K=!0,_n(this)};function li(u){u.T=Date.now()+u.H,na(u,u.H)}function na(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ri(y(u.aa,u),m)}function ui(u){u.D&&(d.clearTimeout(u.D),u.D=null)}Gn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(pr(this.i,this.B),this.M!=2&&(ii(),Ae(17)),_n(this),this.m=2,Nn(this)):na(this,this.T-u)};function Nn(u){u.j.I==0||u.K||cu(u.j,u)}function _n(u){ui(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,mo(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function ci(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||fi(v.h,u))){if(!u.L&&fi(v.h,u)&&v.I==3){try{var S=v.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)ca(v),Ts(v);else break t;Rr(v),Ae(18)}}else v.xa=L[1],0<v.xa-v.K&&L[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ri(y(v.Va,v),6e3));hi(v.h)<=1&&v.ta&&(v.ta=void 0)}else _i(v,11)}else if((u.L||v.g==u)&&ca(v),!w(m))for(L=v.Ba.g.parse(m),m=0;m<L.length;m++){let Qt=L[m];const he=Qt[0];if(!(he<=v.K))if(v.K=he,Qt=Qt[1],v.I==2)if(Qt[0]=="c"){v.M=Qt[1],v.ba=Qt[2];const Mn=Qt[3];Mn!=null&&(v.ka=Mn,v.j.info("VER="+v.ka));const vi=Qt[4];vi!=null&&(v.za=vi,v.j.info("SVER="+v.za));const $n=Qt[5];$n!=null&&typeof $n=="number"&&$n>0&&(S=1.5*$n,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Zn=u.g;if(Zn){const Cr=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cr){var q=S.h;q.g||Cr.indexOf("spdy")==-1&&Cr.indexOf("quic")==-1&&Cr.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(vo(q,q.h),q.h=null))}if(S.G){const ha=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;ha&&(S.wa=ha,Zt(S.J,S.G,ha))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var tt=u;if(S.na=du(S,S.L?S.ba:null,S.W),tt.L){Eo(S.h,tt);var Ct=tt,Ee=S.O;Ee&&(Ct.H=Ee),Ct.D&&(ui(Ct),li(Ct)),S.g=tt}else lu(S);v.i.length>0&&yi(v)}else Qt[0]!="stop"&&Qt[0]!="close"||_i(v,7);else v.I==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?_i(v,7):Do(v):Qt[0]!="noop"&&v.l&&v.l.qa(Qt),v.A=0)}}ii(4)}catch{}}var Re=class{constructor(u,m){this.g=u,this.map=m}};function yo(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _o(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function hi(u){return u.h?1:u.g?u.g.size:0}function fi(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function vo(u,m){u.g?u.g.add(m):u.h=m}function Eo(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}yo.prototype.cancel=function(){if(this.i=To(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function To(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return B(u.i)}var nu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ia(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const S=u[v].indexOf("=");let L,q=null;S>=0?(L=u[v].substring(0,S),q=u[v].substring(S+1)):L=u[v],m(L,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function vn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof vn?(this.l=u.l,ze(this,u.j),this.o=u.o,this.g=u.g,ms(this,u.u),this.h=u.h,So(this,au(u.i)),this.m=u.m):u&&(m=String(u).match(nu))?(this.l=!1,ze(this,m[1]||"",!0),this.o=di(m[2]||""),this.g=di(m[3]||"",!0),ms(this,m[4]),this.h=di(m[5]||"",!0),So(this,m[6]||"",!0),this.m=di(m[7]||"")):(this.l=!1,this.i=new ps(null,this.l))}vn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Er(m,sa,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Er(m,sa,!0),"@"),u.push(Li(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Er(v,v.charAt(0)=="/"?bo:iu,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Er(v,su)),u.join("")},vn.prototype.resolve=function(u){const m=Ce(this);let v=!!u.j;v?ze(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var S=u.h;if(v)ms(m,u.u);else if(v=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var L=m.h.lastIndexOf("/");L!=-1&&(S=m.h.slice(0,L+1)+S)}if(L=S,L==".."||L==".")S="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){S=L.lastIndexOf("/",0)==0,L=L.split("/");const q=[];for(let tt=0;tt<L.length;){const Ct=L[tt++];Ct=="."?S&&tt==L.length&&q.push(""):Ct==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),S&&tt==L.length&&q.push("")):(q.push(Ct),S=!0)}S=q.join("/")}else S=L}return v?m.h=S:v=u.i.toString()!=="",v?So(m,au(u.i)):v=!!u.m,v&&(m.m=u.m),m};function Ce(u){return new vn(u)}function ze(u,m,v){u.j=v?di(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ms(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function So(u,m,v){m instanceof ps?(u.i=m,aa(u.i,u.l)):(v||(m=Er(m,gs)),u.i=new ps(m,u.l))}function Zt(u,m,v){u.i.set(m,v)}function vr(u){return Zt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function di(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Er(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,ln),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ln(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var sa=/[#\/\?@]/g,iu=/[#\?:]/g,bo=/[#\?]/g,gs=/[#\?@]/g,su=/#/g;function ps(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function un(u){u.g||(u.g=new Map,u.h=0,u.i&&ia(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}r=ps.prototype,r.add=function(u,m){un(this),this.i=null,u=ys(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function ru(u,m){un(u),m=ys(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ao(u,m){return un(u),m=ys(u,m),u.g.has(m)}r.forEach=function(u,m){un(this),this.g.forEach(function(v,S){v.forEach(function(L){u.call(m,L,S,this)},this)},this)};function wo(u,m){un(u);let v=[];if(typeof m=="string")Ao(u,m)&&(v=v.concat(u.g.get(ys(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}r.set=function(u,m){return un(this),this.i=null,u=ys(this,u),Ao(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=wo(this,u),u.length>0?String(u[0]):m):m};function ra(u,m,v){ru(u,m),v.length>0&&(u.i=null,u.g.set(ys(u,m),B(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var v=m[S];const L=Li(v);v=wo(this,v);for(let q=0;q<v.length;q++){let tt=L;v[q]!==""&&(tt+="="+Li(v[q])),u.push(tt)}}return this.i=u.join("&")};function au(u){const m=new ps;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function ys(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function aa(u,m){m&&!u.j&&(un(u),u.i=null,u.g.forEach(function(v,S){const L=S.toLowerCase();S!=L&&(ru(this,S),ra(this,L,v))},u)),u.j=m}function Yn(u,m){const v=new Fn;if(d.Image){const S=new Image;S.onload=T(On,v,"TestLoadImage: loaded",!0,m,S),S.onerror=T(On,v,"TestLoadImage: error",!1,m,S),S.onabort=T(On,v,"TestLoadImage: abort",!1,m,S),S.ontimeout=T(On,v,"TestLoadImage: timeout",!1,m,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function Ro(u,m){const v=new Fn,S=new AbortController,L=setTimeout(()=>{S.abort(),On(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(q=>{clearTimeout(L),q.ok?On(v,"TestPingServer: ok",!0,m):On(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),On(v,"TestPingServer: error",!1,m)})}function On(u,m,v,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(v)}catch{}}function _s(){this.g=new Yl}function mi(u){this.i=u.Sb||null,this.h=u.ab||!1}b(mi,Kl),mi.prototype.g=function(){return new Tr(this.i,this.h)};function Tr(u,m){rt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Tr,rt),r=Tr.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Kn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||d).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Kn(this)),this.g&&(this.readyState=3,Kn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;oa(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function oa(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?vs(this):Kn(this),this.readyState==3&&oa(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,vs(this))},r.Na=function(u){this.g&&(this.response=u,vs(this))},r.ga=function(){this.g&&vs(this)};function vs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Kn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Kn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function xn(u){let m="";return Bt(u,function(v,S){m+=S,m+=":",m+=v,m+=`\r
`}),m}function Sr(u,m,v){t:{for(S in v){var S=!1;break t}S=!0}S||(v=xn(v),typeof u=="string"?v!=null&&Li(v):Zt(u,m,v))}function te(u){rt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(te,rt);var gi=/^https?$/i,Co=["POST","PUT"];r=te.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():po.g(),this.g.onreadystatechange=C(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){br(this,q);return}if(u=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)v.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const q of S.keys())v.set(q,S.get(q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(q=>q.toLowerCase()=="content-type"),L=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Co,m,void 0)>=0)||S||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,tt]of v)this.g.setRequestHeader(q,tt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(q){br(this,q)}};function br(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Io(u),Pi(u)}function Io(u){u.A||(u.A=!0,Rt(u,"complete"),Rt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Rt(this,"complete"),Rt(this,"abort"),Pi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pi(this,!0)),te.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ar(this):this.Xa())},r.Xa=function(){Ar(this)};function Ar(u){if(u.h&&typeof c<"u"){if(u.v&&Xn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Rt(u,"readystatechange"),Xn(u)==4){u.h=!1;try{const q=u.ca();t:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var v;if(!(v=m)){var S;if(S=q===0){let tt=String(u.D).match(nu)[1]||null;!tt&&d.self&&d.self.location&&(tt=d.self.location.protocol.slice(0,-1)),S=!gi.test(tt?tt.toLowerCase():"")}v=S}if(v)Rt(u,"complete"),Rt(u,"success");else{u.o=6;try{var L=Xn(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",Io(u)}}finally{Pi(u)}}}}function Pi(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||Rt(u,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Xn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Xn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Rh(m)}};function He(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zi(u){const m={};u=(u.g&&Xn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(w(u[S]))continue;var v=Wl(u[S]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const q=m[L]||[];m[L]=q,q.push(v)}Ot(m,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Es(u){this.za=0,this.i=[],this.j=new Fn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,u),this.Za=pi("retryDelaySeedMs",1e4,u),this.Ta=pi("forwardChannelMaxRetries",2,u),this.va=pi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new yo(u&&u.concurrentRequestLimit),this.Ba=new _s,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Es.prototype,r.ka=8,r.I=1,r.connect=function(u,m,v,S){Ae(0),this.W=u,this.H=m||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=du(this,null,this.W),yi(this)};function Do(u){if(la(u),u.I==3){var m=u.V++,v=Ce(u.J);if(Zt(v,"SID",u.M),Zt(v,"RID",m),Zt(v,"TYPE","terminate"),wr(u,v),m=new Gn(u,u.j,m),m.M=2,m.A=vr(Ce(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.A,v=!0),v||(m.g=mu(m.j,null),m.g.ea(m.A)),m.F=Date.now(),li(m)}fu(u)}function Ts(u){u.g&&(Oo(u),u.g.cancel(),u.g=null)}function la(u){Ts(u),u.v&&(d.clearTimeout(u.v),u.v=null),ca(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function yi(u){if(!_o(u.h)&&!u.m){u.m=!0;var m=u.Ea;$t||A(),gt||($t(),gt=!0),I.add(m,u),u.D=0}}function ua(u,m){return hi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ri(y(u.Ea,u,m),hu(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new Gn(this,this.j,u);let q=this.o;if(this.U&&(q?(q=O(q),it(q,this.U)):q=this.U),this.u!==null||this.R||(L.J=q,q=null),this.S)t:{for(var m=0,v=0;v<this.i.length;v++){e:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=v;break t}if(m===4096||v===this.i.length-1){m=v+1;break t}}m=1e3}else m=1e3;m=ou(this,L,m),v=Ce(this.J),Zt(v,"RID",u),Zt(v,"CVER",22),this.G&&Zt(v,"X-HTTP-Session-Id",this.G),wr(this,v),q&&(this.R?m="headers="+Li(xn(q))+"&"+m:this.u&&Sr(v,this.u,q)),vo(this.h,L),this.Ra&&Zt(v,"TYPE","init"),this.S?(Zt(v,"$req",m),Zt(v,"SID","null"),L.U=!0,oi(L,v,null)):oi(L,v,m),this.I=2}}else this.I==3&&(u?No(this,u):this.i.length==0||_o(this.h)||No(this))};function No(u,m){var v;m?v=m.l:v=u.V++;const S=Ce(u.J);Zt(S,"SID",u.M),Zt(S,"RID",v),Zt(S,"AID",u.K),wr(u,S),u.u&&u.o&&Sr(S,u.u,u.o),v=new Gn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=ou(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),vo(u.h,v),oi(v,S,m)}function wr(u,m){u.H&&Bt(u.H,function(v,S){Zt(m,S,v)}),u.l&&Bt({},function(v,S){Zt(m,S,v)})}function ou(u,m,v){v=Math.min(u.i.length,v);const S=u.l?y(u.l.Ka,u.l,u):null;t:{var L=u.i;let Ct=-1;for(;;){const Ee=["count="+v];Ct==-1?v>0?(Ct=L[0].g,Ee.push("ofs="+Ct)):Ct=0:Ee.push("ofs="+Ct);let Qt=!0;for(let he=0;he<v;he++){var q=L[he].g;const Mn=L[he].map;if(q-=Ct,q<0)Ct=Math.max(0,L[he].g-100),Qt=!1;else try{q="req"+q+"_"||"";try{var tt=Mn instanceof Map?Mn:Object.entries(Mn);for(const[vi,$n]of tt){let Zn=$n;g($n)&&(Zn=ds($n)),Ee.push(q+vi+"="+encodeURIComponent(Zn))}}catch(vi){throw Ee.push(q+"type="+encodeURIComponent("_badmap")),vi}}catch{S&&S(Mn)}}if(Qt){tt=Ee.join("&");break t}}tt=void 0}return u=u.i.splice(0,v),m.G=u,tt}function lu(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;$t||A(),gt||($t(),gt=!0),I.add(m,u),u.A=0}}function Rr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ri(y(u.Da,u),hu(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,uu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ri(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ae(10),Ts(this),uu(this))};function Oo(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function uu(u){u.g=new Gn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Ce(u.na);Zt(m,"RID","rpc"),Zt(m,"SID",u.M),Zt(m,"AID",u.K),Zt(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Zt(m,"TO",u.ia),Zt(m,"TYPE","xmlhttp"),wr(u,m),u.u&&u.o&&Sr(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=vr(Ce(m)),v.u=null,v.R=!0,ea(v,u)}r.Va=function(){this.C!=null&&(this.C=null,Ts(this),Rr(this),Ae(19))};function ca(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function cu(u,m){var v=null;if(u.g==m){ca(u),Oo(u),u.g=null;var S=2}else if(fi(u.h,m))v=m.G,Eo(u.h,m),S=1;else return;if(u.I!=0){if(m.o)if(S==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var L=u.D;S=ta(),Rt(S,new si(S,v)),yi(u)}else lu(u);else if(L=m.m,L==3||L==0&&m.X>0||!(S==1&&ua(u,m)||S==2&&Rr(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),L){case 1:_i(u,5);break;case 4:_i(u,10);break;case 3:_i(u,6);break;default:_i(u,2)}}}function hu(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function _i(u,m){if(u.j.info("Error code "+m),m==2){var v=y(u.bb,u),S=u.Ua;const L=!S;S=new vn(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ze(S,"https"),vr(S),L?Yn(S.toString(),v):Ro(S.toString(),v)}else Ae(2);u.I=0,u.l&&u.l.pa(m),fu(u),la(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function fu(u){if(u.I=0,u.ja=[],u.l){const m=To(u.h);(m.length!=0||u.i.length!=0)&&($(u.ja,m),$(u.ja,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.oa()}}function du(u,m,v){var S=v instanceof vn?Ce(v):new vn(v);if(S.g!="")m&&(S.g=m+"."+S.g),ms(S,S.u);else{var L=d.location;S=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;const q=new vn(null);S&&ze(q,S),m&&(q.g=m),L&&ms(q,L),v&&(q.h=v),S=q}return v=u.G,m=u.wa,v&&m&&Zt(S,v,m),Zt(S,"VER",u.ka),wr(u,S),S}function mu(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new te(new mi({ab:v})):new te(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function gu(){}r=gu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ss(){}Ss.prototype.g=function(u,m){return new rn(u,m)};function rn(u,m){rt.call(this),this.g=new Es(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!w(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!w(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ji(this)}b(rn,rt),rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){Do(this.g)},rn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=ds(u),u=v);m.i.push(new Re(m.Ya++,u)),m.I==3&&yi(m)},rn.prototype.N=function(){this.g.l=null,delete this.j,Do(this.g),delete this.g,rn.Z.N.call(this)};function pu(u){qe.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const v in m){u=v;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}b(pu,qe);function yu(){Dn.call(this),this.status=1}b(yu,Dn);function ji(u){this.g=u}b(ji,gu),ji.prototype.ra=function(){Rt(this.g,"a")},ji.prototype.qa=function(u){Rt(this.g,new pu(u))},ji.prototype.pa=function(u){Rt(this.g,new yu)},ji.prototype.oa=function(){Rt(this.g,"b")},Ss.prototype.createWebChannel=Ss.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,R0=function(){return new Ss},w0=function(){return ta()},A0=ve,Xd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yr.NO_ERROR=0,yr.TIMEOUT=8,yr.HTTP_ERROR=6,Cc=yr,go.COMPLETE="complete",b0=go,Xl.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",rt.prototype.listen=rt.prototype.J,pl=Xl,te.prototype.listenOnce=te.prototype.K,te.prototype.getLastError=te.prototype.Ha,te.prototype.getLastErrorCode=te.prototype.ya,te.prototype.getStatus=te.prototype.ca,te.prototype.getResponseJson=te.prototype.La,te.prototype.getResponseText=te.prototype.la,te.prototype.send=te.prototype.ea,te.prototype.setWithCredentials=te.prototype.Fa,S0=te}).apply(typeof Tc<"u"?Tc:typeof self<"u"?self:typeof window<"u"?window:{});const Y_="@firebase/firestore",K_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new ym("@firebase/firestore");function Ba(){return ir.logLevel}function u1(r){ir.setLogLevel(r)}function at(r,...t){if(ir.logLevel<=Pt.DEBUG){const i=t.map(Em);ir.debug(`Firestore (${oo}): ${r}`,...i)}}function rs(r,...t){if(ir.logLevel<=Pt.ERROR){const i=t.map(Em);ir.error(`Firestore (${oo}): ${r}`,...i)}}function Ja(r,...t){if(ir.logLevel<=Pt.WARN){const i=t.map(Em);ir.warn(`Firestore (${oo}): ${r}`,...i)}}function Em(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(r,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,C0(r,a,i)}function C0(r,t,i){let a=`FIRESTORE (${oo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw rs(a),new Error(a)}function Xt(r,t,i,a){let l="Unexpected state";typeof i=="string"?l=i:a=i,r||C0(t,l,a)}function At(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends us{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class c1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable((()=>i(en.UNAUTHENTICATED)))}shutdown(){}}class h1{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class f1{constructor(t){this.t=t,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Xt(this.o===void 0,42304);let a=this.i;const l=_=>this.i!==a?(a=this.i,i(_)):Promise.resolve();let c=new er;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new er,t.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const _=c;t.enqueueRetryable((async()=>{await _.promise,await l(this.currentUser)}))},g=_=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((_=>g(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?g(_):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new er)}}),0),d()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((a=>this.i!==t?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Xt(typeof a.accessToken=="string",31837,{l:a}),new I0(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Xt(t===null||typeof t=="string",2055,{h:t}),new en(t)}}class d1{constructor(t,i,a){this.P=t,this.T=i,this.I=a,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class m1{constructor(t,i,a){this.P=t,this.T=i,this.I=a}getToken(){return Promise.resolve(new d1(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable((()=>i(en.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class X_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g1{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ei(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Xt(this.o===void 0,3512);const a=c=>{c.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,at("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>a(c)))};const l=c=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new X_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((i=>i?(Xt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new X_(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let a=0;a<r;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=p1(40);for(let c=0;c<l.length;++c)a.length<20&&l[c]<i&&(a+=t.charAt(l[c]%62))}return a}}function zt(r,t){return r<t?-1:r>t?1:0}function $d(r,t){const i=Math.min(r.length,t.length);for(let a=0;a<i;a++){const l=r.charAt(a),c=t.charAt(a);if(l!==c)return Ud(l)===Ud(c)?zt(l,c):Ud(l)?1:-1}return zt(r.length,t.length)}const y1=55296,_1=57343;function Ud(r){const t=r.charCodeAt(0);return t>=y1&&t<=_1}function Wa(r,t,i){return r.length===t.length&&r.every(((a,l)=>i(a,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="__name__";class Ai{constructor(t,i,a){i===void 0?i=0:i>t.length&&yt(637,{offset:i,range:t.length}),a===void 0?a=t.length-i:a>t.length-i&&yt(1746,{length:a,range:t.length-i}),this.segments=t,this.offset=i,this.len=a}get length(){return this.len}isEqual(t){return Ai.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Ai?t.forEach((a=>{i.push(a)})):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,a=this.limit();i<a;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const a=Math.min(t.length,i.length);for(let l=0;l<a;l++){const c=Ai.compareSegments(t.get(l),i.get(l));if(c!==0)return c}return zt(t.length,i.length)}static compareSegments(t,i){const a=Ai.isNumericId(t),l=Ai.isNumericId(i);return a&&!l?-1:!a&&l?1:a&&l?Ai.extractNumericId(t).compare(Ai.extractNumericId(i)):$d(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return tr.fromString(t.substring(4,t.length-2))}}class de extends Ai{construct(t,i,a){return new de(t,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const a of t){if(a.indexOf("//")>=0)throw new ct(Z.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter((l=>l.length>0)))}return new de(i)}static emptyPath(){return new de([])}}const v1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends Ai{construct(t,i,a){return new Xe(t,i,a)}static isValidIdentifier(t){return v1.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$_}static keyField(){return new Xe([$_])}static fromServerFormat(t){const i=[];let a="",l=0;const c=()=>{if(a.length===0)throw new ct(Z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let d=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new ct(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const _=t[l+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new ct(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=_,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(a+=g,l++):(c(),l++)}if(c(),d)throw new ct(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xe(i)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t){this.path=t}static fromPath(t){return new mt(de.fromString(t))}static fromName(t){return new mt(de.fromString(t).popFirst(5))}static empty(){return new mt(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&de.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return de.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mt(new de(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(r,t,i){if(!i)throw new ct(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function T1(r,t,i,a){if(t===!0&&a===!0)throw new ct(Z.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function Z_(r){if(!mt.isDocumentKey(r))throw new ct(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function D0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Sm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(a){return a.constructor?a.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":yt(12329,{type:typeof r})}function wi(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new ct(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Sm(r);throw new ct(Z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(r,t){const i={typeString:r};return t&&(i.value=t),i}function zl(r,t){if(!D0(r))throw new ct(Z.INVALID_ARGUMENT,"JSON must be an object");let i;for(const a in t)if(t[a]){const l=t[a].typeString,c="value"in t[a]?{value:t[a].value}:void 0;if(!(a in r)){i=`JSON missing required field: '${a}'`;break}const d=r[a];if(l&&typeof d!==l){i=`JSON field '${a}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){i=`Expected '${a}' field to equal '${c.value}'`;break}}if(i)throw new ct(Z.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=-62135596800,W_=1e6;class ce{static now(){return ce.fromMillis(Date.now())}static fromDate(t){return ce.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),a=Math.floor((t-1e3*i)*W_);return new ce(i,a)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new ct(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ct(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<J_)throw new ct(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ct(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/W_}_compareTo(t){return this.seconds===t.seconds?zt(this.nanoseconds,t.nanoseconds):zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(zl(t,ce._jsonSchema))return new ce(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-J_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ce._jsonSchemaVersion="firestore/timestamp/1.0",ce._jsonSchema={type:Me("string",ce._jsonSchemaVersion),seconds:Me("number"),nanoseconds:Me("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{static fromTimestamp(t){return new St(t)}static min(){return new St(new ce(0,0))}static max(){return new St(new ce(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=-1;function S1(r,t){const i=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,l=St.fromTimestamp(a===1e9?new ce(i+1,0):new ce(i,a));return new sr(l,mt.empty(),t)}function b1(r){return new sr(r.readTime,r.key,Dl)}class sr{constructor(t,i,a){this.readTime=t,this.documentKey=i,this.largestBatchId=a}static min(){return new sr(St.min(),mt.empty(),Dl)}static max(){return new sr(St.max(),mt.empty(),Dl)}}function A1(r,t){let i=r.readTime.compareTo(t.readTime);return i!==0?i:(i=mt.comparator(r.documentKey,t.documentKey),i!==0?i:zt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==w1)throw r;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new X(((a,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(a,l)},this.catchCallback=c=>{this.wrapFailure(i,c).next(a,l)}}))}toPromise(){return new Promise(((t,i)=>{this.next(t,i)}))}wrapUserFunction(t){try{const i=t();return i instanceof X?i:X.resolve(i)}catch(i){return X.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction((()=>t(i))):X.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction((()=>t(i))):X.reject(i)}static resolve(t){return new X(((i,a)=>{i(t)}))}static reject(t){return new X(((i,a)=>{a(t)}))}static waitFor(t){return new X(((i,a)=>{let l=0,c=0,d=!1;t.forEach((g=>{++l,g.next((()=>{++c,d&&c===l&&i()}),(_=>a(_)))})),d=!0,c===l&&i()}))}static or(t){let i=X.resolve(!1);for(const a of t)i=i.next((l=>l?X.resolve(l):a()));return i}static forEach(t,i){const a=[];return t.forEach(((l,c)=>{a.push(i.call(this,l,c))})),this.waitFor(a)}static mapArray(t,i){return new X(((a,l)=>{const c=t.length,d=new Array(c);let g=0;for(let _=0;_<c;_++){const y=_;i(t[y]).next((T=>{d[y]=T,++g,g===c&&a(d)}),(T=>l(T)))}}))}static doWhile(t,i){return new X(((a,l)=>{const c=()=>{t()===!0?i().next((()=>{c()}),l):a()};c()}))}}function C1(r){const t=r.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function uo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>i.writeSequenceNumber(a))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}sh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=-1;function rh(r){return r==null}function zc(r){return r===0&&1/r==-1/0}function I1(r){return typeof r=="number"&&Number.isInteger(r)&&!zc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="";function D1(r){let t="";for(let i=0;i<r.length;i++)t.length>0&&(t=tv(t)),t=N1(r.get(i),t);return tv(t)}function N1(r,t){let i=t;const a=r.length;for(let l=0;l<a;l++){const c=r.charAt(l);switch(c){case"\0":i+="";break;case N0:i+="";break;default:i+=c}}return i}function tv(r){return r+N0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(r){let t=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t++;return t}function hr(r,t){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t(i,r[i])}function O0(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t,i){this.comparator=t,this.root=i||Ke.EMPTY}insert(t,i){return new me(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(t){return new me(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(t){let i=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(t,a.key);if(l===0)return i+a.left.size;l<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((i,a)=>(t(i,a),!1)))}toString(){const t=[];return this.inorderTraversal(((i,a)=>(t.push(`${i}:${a}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Sc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Sc(this.root,t,this.comparator,!0)}}class Sc{constructor(t,i,a,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=i?a(t.key,i):1,i&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ke{constructor(t,i,a,l,c){this.key=t,this.value=i,this.color=a??Ke.RED,this.left=l??Ke.EMPTY,this.right=c??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,a,l,c){return new Ke(t??this.key,i??this.value,a??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,a){let l=this;const c=a(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,i,a),null):c===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let a,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return Ke.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw yt(27949);return t+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(t,i,a,l,c){return this}insert(t,i,a){return new Ke(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t){this.comparator=t,this.data=new me(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((i,a)=>(t(i),!1)))}forEachInRange(t,i){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new nv(this.data.getIterator())}getIteratorFrom(t){return new nv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach((a=>{i=i.add(a)})),i}isEqual(t){if(!(t instanceof Le)||this.size!==t.size)return!1;const i=this.data.getIterator(),a=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=a.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((i=>{t.push(i)})),t}toString(){const t=[];return this.forEach((i=>t.push(i))),"SortedSet("+t.toString()+")"}copy(t){const i=new Le(this.comparator);return i.data=t,i}}class nv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t){this.fields=t,t.sort(Xe.comparator)}static empty(){return new Cn([])}unionWith(t){let i=new Le(Xe.comparator);for(const a of this.fields)i=i.add(a);for(const a of t)i=i.add(a);return new Cn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Wa(this.fields,t.fields,((i,a)=>i.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.binaryString=t}static fromBase64String(t){const i=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new x0("Invalid base64 string: "+c):c}})(t);return new $e(i)}static fromUint8Array(t){const i=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(t);return new $e(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const a=new Uint8Array(i.length);for(let l=0;l<i.length;l++)a[l]=i.charCodeAt(l);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}$e.EMPTY_BYTE_STRING=new $e("");const O1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rr(r){if(Xt(!!r,39018),typeof r=="string"){let t=0;const i=O1.exec(r);if(Xt(!!i,46558,{timestamp:r}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:be(r.seconds),nanos:be(r.nanos)}}function be(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ar(r){return typeof r=="string"?$e.fromBase64String(r):$e.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="server_timestamp",V0="__type__",U0="__previous_value__",k0="__local_write_time__";function Am(r){return(r?.mapValue?.fields||{})[V0]?.stringValue===M0}function ah(r){const t=r.mapValue.fields[U0];return Am(t)?ah(t):t}function Nl(r){const t=rr(r.mapValue.fields[k0].timestampValue);return new ce(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(t,i,a,l,c,d,g,_,y,T){this.databaseId=t,this.appId=i,this.persistenceKey=a,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=y,this.isUsingEmulator=T}}const jc="(default)";class Ol{constructor(t,i){this.projectId=t,this.database=i||jc}static empty(){return new Ol("","")}get isDefaultDatabase(){return this.database===jc}isEqual(t){return t instanceof Ol&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="__type__",M1="__max__",bc={mapValue:{}},P0="__vector__",Bc="value";function or(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Am(r)?4:U1(r)?9007199254740991:V1(r)?10:11:yt(28295,{value:r})}function Mi(r,t){if(r===t)return!0;const i=or(r);if(i!==or(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Nl(r).isEqual(Nl(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=rr(l.timestampValue),g=rr(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,c){return ar(l.bytesValue).isEqual(ar(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,c){return be(l.geoPointValue.latitude)===be(c.geoPointValue.latitude)&&be(l.geoPointValue.longitude)===be(c.geoPointValue.longitude)})(r,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return be(l.integerValue)===be(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=be(l.doubleValue),g=be(c.doubleValue);return d===g?zc(d)===zc(g):isNaN(d)&&isNaN(g)}return!1})(r,t);case 9:return Wa(r.arrayValue.values||[],t.arrayValue.values||[],Mi);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},g=c.mapValue.fields||{};if(ev(d)!==ev(g))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(g[_]===void 0||!Mi(d[_],g[_])))return!1;return!0})(r,t);default:return yt(52216,{left:r})}}function xl(r,t){return(r.values||[]).find((i=>Mi(i,t)))!==void 0}function to(r,t){if(r===t)return 0;const i=or(r),a=or(t);if(i!==a)return zt(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return zt(r.booleanValue,t.booleanValue);case 2:return(function(c,d){const g=be(c.integerValue||c.doubleValue),_=be(d.integerValue||d.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1})(r,t);case 3:return iv(r.timestampValue,t.timestampValue);case 4:return iv(Nl(r),Nl(t));case 5:return $d(r.stringValue,t.stringValue);case 6:return(function(c,d){const g=ar(c),_=ar(d);return g.compareTo(_)})(r.bytesValue,t.bytesValue);case 7:return(function(c,d){const g=c.split("/"),_=d.split("/");for(let y=0;y<g.length&&y<_.length;y++){const T=zt(g[y],_[y]);if(T!==0)return T}return zt(g.length,_.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,d){const g=zt(be(c.latitude),be(d.latitude));return g!==0?g:zt(be(c.longitude),be(d.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return sv(r.arrayValue,t.arrayValue);case 10:return(function(c,d){const g=c.fields||{},_=d.fields||{},y=g[Bc]?.arrayValue,T=_[Bc]?.arrayValue,b=zt(y?.values?.length||0,T?.values?.length||0);return b!==0?b:sv(y,T)})(r.mapValue,t.mapValue);case 11:return(function(c,d){if(c===bc.mapValue&&d===bc.mapValue)return 0;if(c===bc.mapValue)return 1;if(d===bc.mapValue)return-1;const g=c.fields||{},_=Object.keys(g),y=d.fields||{},T=Object.keys(y);_.sort(),T.sort();for(let b=0;b<_.length&&b<T.length;++b){const C=$d(_[b],T[b]);if(C!==0)return C;const B=to(g[_[b]],y[T[b]]);if(B!==0)return B}return zt(_.length,T.length)})(r.mapValue,t.mapValue);default:throw yt(23264,{he:i})}}function iv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return zt(r,t);const i=rr(r),a=rr(t),l=zt(i.seconds,a.seconds);return l!==0?l:zt(i.nanos,a.nanos)}function sv(r,t){const i=r.values||[],a=t.values||[];for(let l=0;l<i.length&&l<a.length;++l){const c=to(i[l],a[l]);if(c)return c}return zt(i.length,a.length)}function eo(r){return Zd(r)}function Zd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(i){const a=rr(i);return`time(${a.seconds},${a.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(i){return ar(i).toBase64()})(r.bytesValue):"referenceValue"in r?(function(i){return mt.fromName(i).toString()})(r.referenceValue):"geoPointValue"in r?(function(i){return`geo(${i.latitude},${i.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(i){let a="[",l=!0;for(const c of i.values||[])l?l=!1:a+=",",a+=Zd(c);return a+"]"})(r.arrayValue):"mapValue"in r?(function(i){const a=Object.keys(i.fields||{}).sort();let l="{",c=!0;for(const d of a)c?c=!1:l+=",",l+=`${d}:${Zd(i.fields[d])}`;return l+"}"})(r.mapValue):yt(61005,{value:r})}function Ic(r){switch(or(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ah(r);return t?16+Ic(t):16;case 5:return 2*r.stringValue.length;case 6:return ar(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((l,c)=>l+Ic(c)),0)})(r.arrayValue);case 10:case 11:return(function(a){let l=0;return hr(a.fields,((c,d)=>{l+=c.length+Ic(d)})),l})(r.mapValue);default:throw yt(13486,{value:r})}}function Jd(r){return!!r&&"integerValue"in r}function wm(r){return!!r&&"arrayValue"in r}function rv(r){return!!r&&"nullValue"in r}function av(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Dc(r){return!!r&&"mapValue"in r}function V1(r){return(r?.mapValue?.fields||{})[L0]?.stringValue===P0}function Sl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return hr(r.mapValue.fields,((i,a)=>t.mapValue.fields[i]=Sl(a))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Sl(r.arrayValue.values[i]);return t}return{...r}}function U1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===M1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t){this.value=t}static empty(){return new pn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let a=0;a<t.length-1;++a)if(i=(i.mapValue.fields||{})[t.get(a)],!Dc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Sl(i)}setAll(t){let i=Xe.emptyPath(),a={},l=[];t.forEach(((d,g)=>{if(!i.isImmediateParentOf(g)){const _=this.getFieldsMap(i);this.applyChanges(_,a,l),a={},l=[],i=g.popLast()}d?a[g.lastSegment()]=Sl(d):l.push(g.lastSegment())}));const c=this.getFieldsMap(i);this.applyChanges(c,a,l)}delete(t){const i=this.field(t.popLast());Dc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Mi(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<t.length;++a){let l=i.mapValue.fields[t.get(a)];Dc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(a)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,a){hr(i,((l,c)=>t[l]=c));for(const l of a)delete t[l]}clone(){return new pn(Sl(this.value))}}function z0(r){const t=[];return hr(r.fields,((i,a)=>{const l=new Xe([i]);if(Dc(a)){const c=z0(a.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)})),new Cn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t,i,a,l,c,d,g){this.key=t,this.documentType=i,this.version=a,this.readTime=l,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(t){return new nn(t,0,St.min(),St.min(),St.min(),pn.empty(),0)}static newFoundDocument(t,i,a,l){return new nn(t,1,i,St.min(),a,l,0)}static newNoDocument(t,i){return new nn(t,2,i,St.min(),St.min(),pn.empty(),0)}static newUnknownDocument(t,i){return new nn(t,3,i,St.min(),St.min(),pn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(St.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof nn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t,i){this.position=t,this.inclusive=i}}function ov(r,t,i){let a=0;for(let l=0;l<r.position.length;l++){const c=t[l],d=r.position[l];if(c.field.isKeyField()?a=mt.comparator(mt.fromName(d.referenceValue),i.key):a=to(d,i.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function lv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!Mi(r.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t,i="asc"){this.field=t,this.dir=i}}function k1(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{}class ke extends j0{constructor(t,i,a){super(),this.field=t,this.op=i,this.value=a}static create(t,i,a){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,a):new P1(t,i,a):i==="array-contains"?new B1(t,a):i==="in"?new q1(t,a):i==="not-in"?new H1(t,a):i==="array-contains-any"?new F1(t,a):new ke(t,i,a)}static createKeyFieldInFilter(t,i,a){return i==="in"?new z1(t,a):new j1(t,a)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(to(i,this.value)):i!==null&&or(this.value)===or(i)&&this.matchesComparison(to(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vi extends j0{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new Vi(t,i)}matches(t){return B0(this)?this.filters.find((i=>!i.matches(t)))===void 0:this.filters.find((i=>i.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,i)=>t.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function B0(r){return r.op==="and"}function q0(r){return L1(r)&&B0(r)}function L1(r){for(const t of r.filters)if(t instanceof Vi)return!1;return!0}function Wd(r){if(r instanceof ke)return r.field.canonicalString()+r.op.toString()+eo(r.value);if(q0(r))return r.filters.map((t=>Wd(t))).join(",");{const t=r.filters.map((i=>Wd(i))).join(",");return`${r.op}(${t})`}}function H0(r,t){return r instanceof ke?(function(a,l){return l instanceof ke&&a.op===l.op&&a.field.isEqual(l.field)&&Mi(a.value,l.value)})(r,t):r instanceof Vi?(function(a,l){return l instanceof Vi&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce(((c,d,g)=>c&&H0(d,l.filters[g])),!0):!1})(r,t):void yt(19439)}function F0(r){return r instanceof ke?(function(i){return`${i.field.canonicalString()} ${i.op} ${eo(i.value)}`})(r):r instanceof Vi?(function(i){return i.op.toString()+" {"+i.getFilters().map(F0).join(" ,")+"}"})(r):"Filter"}class P1 extends ke{constructor(t,i,a){super(t,i,a),this.key=mt.fromName(a.referenceValue)}matches(t){const i=mt.comparator(t.key,this.key);return this.matchesComparison(i)}}class z1 extends ke{constructor(t,i){super(t,"in",i),this.keys=G0("in",i)}matches(t){return this.keys.some((i=>i.isEqual(t.key)))}}class j1 extends ke{constructor(t,i){super(t,"not-in",i),this.keys=G0("not-in",i)}matches(t){return!this.keys.some((i=>i.isEqual(t.key)))}}function G0(r,t){return(t.arrayValue?.values||[]).map((i=>mt.fromName(i.referenceValue)))}class B1 extends ke{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return wm(i)&&xl(i.arrayValue,this.value)}}class q1 extends ke{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&xl(this.value.arrayValue,i)}}class H1 extends ke{constructor(t,i){super(t,"not-in",i)}matches(t){if(xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!xl(this.value.arrayValue,i)}}class F1 extends ke{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!wm(i)||!i.arrayValue.values)&&i.arrayValue.values.some((a=>xl(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(t,i=null,a=[],l=[],c=null,d=null,g=null){this.path=t,this.collectionGroup=i,this.orderBy=a,this.filters=l,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function uv(r,t=null,i=[],a=[],l=null,c=null,d=null){return new G1(r,t,i,a,l,c,d)}function Rm(r){const t=At(r);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map((a=>Wd(a))).join(","),i+="|ob:",i+=t.orderBy.map((a=>(function(c){return c.field.canonicalString()+c.dir})(a))).join(","),rh(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>eo(a))).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>eo(a))).join(",")),t.Te=i}return t.Te}function Cm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!k1(r.orderBy[i],t.orderBy[i]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!H0(r.filters[i],t.filters[i]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!lv(r.startAt,t.startAt)&&lv(r.endAt,t.endAt)}function tm(r){return mt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t,i=null,a=[],l=[],c=null,d="F",g=null,_=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=l,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Q1(r,t,i,a,l,c,d,g){return new oh(r,t,i,a,l,c,d,g)}function lh(r){return new oh(r)}function cv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Y1(r){return r.collectionGroup!==null}function bl(r){const t=At(r);if(t.Ie===null){t.Ie=[];const i=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),i.add(c.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Le(Xe.comparator);return d.filters.forEach((_=>{_.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(t).forEach((c=>{i.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new Hc(c,a))})),i.has(Xe.keyField().canonicalString())||t.Ie.push(new Hc(Xe.keyField(),a))}return t.Ie}function Ri(r){const t=At(r);return t.Ee||(t.Ee=K1(t,bl(r))),t.Ee}function K1(r,t){if(r.limitType==="F")return uv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new Hc(l.field,c)}));const i=r.endAt?new qc(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new qc(r.startAt.position,r.startAt.inclusive):null;return uv(r.path,r.collectionGroup,t,r.filters,r.limit,i,a)}}function em(r,t,i){return new oh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,i,r.startAt,r.endAt)}function uh(r,t){return Cm(Ri(r),Ri(t))&&r.limitType===t.limitType}function Q0(r){return`${Rm(Ri(r))}|lt:${r.limitType}`}function qa(r){return`Query(target=${(function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map((l=>F0(l))).join(", ")}]`),rh(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map((l=>eo(l))).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map((l=>eo(l))).join(",")),`Target(${a})`})(Ri(r))}; limitType=${r.limitType})`}function ch(r,t){return t.isFoundDocument()&&(function(a,l){const c=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):mt.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)})(r,t)&&(function(a,l){for(const c of bl(a))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(a,l){for(const c of a.filters)if(!c.matches(l))return!1;return!0})(r,t)&&(function(a,l){return!(a.startAt&&!(function(d,g,_){const y=ov(d,g,_);return d.inclusive?y<=0:y<0})(a.startAt,bl(a),l)||a.endAt&&!(function(d,g,_){const y=ov(d,g,_);return d.inclusive?y>=0:y>0})(a.endAt,bl(a),l))})(r,t)}function X1(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Y0(r){return(t,i)=>{let a=!1;for(const l of bl(r)){const c=$1(l,t,i);if(c!==0)return c;a=a||l.field.isKeyField()}return 0}}function $1(r,t,i){const a=r.field.isKeyField()?mt.comparator(t.key,i.key):(function(c,d,g){const _=d.data.field(c),y=g.data.field(c);return _!==null&&y!==null?to(_,y):yt(42886)})(r.field,t,i);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return yt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),a=this.inner[i];if(a!==void 0){for(const[l,c]of a)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,i){const a=this.mapKeyFn(t),l=this.inner[a];if(l===void 0)return this.inner[a]=[[t,i]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return a.length===1?delete this.inner[i]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(t){hr(this.inner,((i,a)=>{for(const[l,c]of a)t(l,c)}))}isEmpty(){return O0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=new me(mt.comparator);function as(){return Z1}const K0=new me(mt.comparator);function yl(...r){let t=K0;for(const i of r)t=t.insert(i.key,i);return t}function X0(r){let t=K0;return r.forEach(((i,a)=>t=t.insert(i,a.overlayedDocument))),t}function Gr(){return Al()}function $0(){return Al()}function Al(){return new Zr((r=>r.toString()),((r,t)=>r.isEqual(t)))}const J1=new me(mt.comparator),W1=new Le(mt.comparator);function jt(...r){let t=W1;for(const i of r)t=t.add(i);return t}const tw=new Le(zt);function ew(){return tw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(t)?"-0":t}}function Z0(r){return{integerValue:""+r}}function nw(r,t){return I1(t)?Z0(t):Im(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(){this._=void 0}}function iw(r,t,i){return r instanceof Fc?(function(l,c){const d={fields:{[V0]:{stringValue:M0},[k0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Am(c)&&(c=ah(c)),c&&(d.fields[U0]=c),{mapValue:d}})(i,t):r instanceof Ml?W0(r,t):r instanceof Vl?tE(r,t):(function(l,c){const d=J0(l,c),g=hv(d)+hv(l.Ae);return Jd(d)&&Jd(l.Ae)?Z0(g):Im(l.serializer,g)})(r,t)}function sw(r,t,i){return r instanceof Ml?W0(r,t):r instanceof Vl?tE(r,t):i}function J0(r,t){return r instanceof Gc?(function(a){return Jd(a)||(function(c){return!!c&&"doubleValue"in c})(a)})(t)?t:{integerValue:0}:null}class Fc extends hh{}class Ml extends hh{constructor(t){super(),this.elements=t}}function W0(r,t){const i=eE(t);for(const a of r.elements)i.some((l=>Mi(l,a)))||i.push(a);return{arrayValue:{values:i}}}class Vl extends hh{constructor(t){super(),this.elements=t}}function tE(r,t){let i=eE(t);for(const a of r.elements)i=i.filter((l=>!Mi(l,a)));return{arrayValue:{values:i}}}class Gc extends hh{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function hv(r){return be(r.integerValue||r.doubleValue)}function eE(r){return wm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function rw(r,t){return r.field.isEqual(t.field)&&(function(a,l){return a instanceof Ml&&l instanceof Ml||a instanceof Vl&&l instanceof Vl?Wa(a.elements,l.elements,Mi):a instanceof Gc&&l instanceof Gc?Mi(a.Ae,l.Ae):a instanceof Fc&&l instanceof Fc})(r.transform,t.transform)}class aw{constructor(t,i){this.version=t,this.transformResults=i}}class Ci{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Ci}static exists(t){return new Ci(void 0,t)}static updateTime(t){return new Ci(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Nc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class fh{}function nE(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new sE(r.key,Ci.none()):new jl(r.key,r.data,Ci.none());{const i=r.data,a=pn.empty();let l=new Le(Xe.comparator);for(let c of t.fields)if(!l.has(c)){let d=i.field(c);d===null&&c.length>1&&(c=c.popLast(),d=i.field(c)),d===null?a.delete(c):a.set(c,d),l=l.add(c)}return new fr(r.key,a,new Cn(l.toArray()),Ci.none())}}function ow(r,t,i){r instanceof jl?(function(l,c,d){const g=l.value.clone(),_=dv(l.fieldTransforms,c,d.transformResults);g.setAll(_),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,t,i):r instanceof fr?(function(l,c,d){if(!Nc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const g=dv(l.fieldTransforms,c,d.transformResults),_=c.data;_.setAll(iE(l)),_.setAll(g),c.convertToFoundDocument(d.version,_).setHasCommittedMutations()})(r,t,i):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,t,i)}function wl(r,t,i,a){return r instanceof jl?(function(c,d,g,_){if(!Nc(c.precondition,d))return g;const y=c.value.clone(),T=mv(c.fieldTransforms,_,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,t,i,a):r instanceof fr?(function(c,d,g,_){if(!Nc(c.precondition,d))return g;const y=mv(c.fieldTransforms,_,d),T=d.data;return T.setAll(iE(c)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(r,t,i,a):(function(c,d,g){return Nc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(r,t,i)}function lw(r,t){let i=null;for(const a of r.fieldTransforms){const l=t.data.field(a.field),c=J0(a.transform,l||null);c!=null&&(i===null&&(i=pn.empty()),i.set(a.field,c))}return i||null}function fv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&Wa(a,l,((c,d)=>rw(c,d)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class jl extends fh{constructor(t,i,a,l=[]){super(),this.key=t,this.value=i,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class fr extends fh{constructor(t,i,a,l,c=[]){super(),this.key=t,this.data=i,this.fieldMask=a,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function iE(r){const t=new Map;return r.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const a=r.data.field(i);t.set(i,a)}})),t}function dv(r,t,i){const a=new Map;Xt(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let l=0;l<i.length;l++){const c=r[l],d=c.transform,g=t.data.field(c.field);a.set(c.field,sw(d,g,i[l]))}return a}function mv(r,t,i){const a=new Map;for(const l of r){const c=l.transform,d=i.data.field(l.field);a.set(l.field,iw(c,d,t))}return a}class sE extends fh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uw extends fh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(t,i,a,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(t,i){const a=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&ow(c,t,a[l])}}applyToLocalView(t,i){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(i=wl(a,t,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(i=wl(a,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const a=$0();return this.mutations.forEach((l=>{const c=t.get(l.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=i.has(l.key)?null:g;const _=nE(d,g);_!==null&&a.set(l.key,_),d.isValidDocument()||d.convertToNoDocument(St.min())})),a}keys(){return this.mutations.reduce(((t,i)=>t.add(i.key)),jt())}isEqual(t){return this.batchId===t.batchId&&Wa(this.mutations,t.mutations,((i,a)=>fv(i,a)))&&Wa(this.baseMutations,t.baseMutations,((i,a)=>fv(i,a)))}}class Dm{constructor(t,i,a,l){this.batch=t,this.commitVersion=i,this.mutationResults=a,this.docVersions=l}static from(t,i,a){Xt(t.mutations.length===a.length,58842,{me:t.mutations.length,fe:a.length});let l=(function(){return J1})();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,a[d].version);return new Dm(t,i,a,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe,Ht;function dw(r){switch(r){case Z.OK:return yt(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return yt(15467,{code:r})}}function rE(r){if(r===void 0)return rs("GRPC error has no .code"),Z.UNKNOWN;switch(r){case xe.OK:return Z.OK;case xe.CANCELLED:return Z.CANCELLED;case xe.UNKNOWN:return Z.UNKNOWN;case xe.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case xe.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case xe.INTERNAL:return Z.INTERNAL;case xe.UNAVAILABLE:return Z.UNAVAILABLE;case xe.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case xe.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case xe.NOT_FOUND:return Z.NOT_FOUND;case xe.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case xe.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case xe.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case xe.ABORTED:return Z.ABORTED;case xe.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case xe.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case xe.DATA_LOSS:return Z.DATA_LOSS;default:return yt(39323,{code:r})}}(Ht=xe||(xe={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=new tr([4294967295,4294967295],0);function gv(r){const t=mw().encode(r),i=new T0;return i.update(t),new Uint8Array(i.digest())}function pv(r){const t=new DataView(r.buffer),i=t.getUint32(0,!0),a=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new tr([i,a],0),new tr([l,c],0)]}class Nm{constructor(t,i,a){if(this.bitmap=t,this.padding=i,this.hashCount=a,i<0||i>=8)throw new _l(`Invalid padding: ${i}`);if(a<0)throw new _l(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new _l(`Invalid hash count: ${a}`);if(t.length===0&&i!==0)throw new _l(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=tr.fromNumber(this.ge)}ye(t,i,a){let l=t.add(i.multiply(tr.fromNumber(a)));return l.compare(gw)===1&&(l=new tr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=gv(t),[a,l]=pv(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(a,l,c);if(!this.we(d))return!1}return!0}static create(t,i,a){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new Nm(c,l,i);return a.forEach((g=>d.insert(g))),d}insert(t){if(this.ge===0)return;const i=gv(t),[a,l]=pv(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(a,l,c);this.Se(d)}}Se(t){const i=Math.floor(t/8),a=t%8;this.bitmap[i]|=1<<a}}class _l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(t,i,a,l,c){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,i,a){const l=new Map;return l.set(t,Bl.createSynthesizedTargetChangeForCurrentChange(t,i,a)),new dh(St.min(),l,new me(zt),as(),jt())}}class Bl{constructor(t,i,a,l,c){this.resumeToken=t,this.current=i,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,i,a){return new Bl(a,i,jt(),jt(),jt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(t,i,a,l){this.be=t,this.removedTargetIds=i,this.key=a,this.De=l}}class aE{constructor(t,i){this.targetId=t,this.Ce=i}}class oE{constructor(t,i,a=$e.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=a,this.cause=l}}class yv{constructor(){this.ve=0,this.Fe=_v(),this.Me=$e.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=jt(),i=jt(),a=jt();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:a=a.add(l);break;default:yt(38017,{changeType:c})}})),new Bl(this.Me,this.xe,t,i,a)}qe(){this.Oe=!1,this.Fe=_v()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class pw{constructor(t){this.Ge=t,this.ze=new Map,this.je=as(),this.Je=Ac(),this.He=Ac(),this.Ye=new me(zt)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,(i=>{const a=this.nt(i);switch(t.state){case 0:this.rt(i)&&a.Le(t.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(t.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(a.We(),a.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),a.Le(t.resumeToken));break;default:yt(56790,{state:t.state})}}))}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach(((a,l)=>{this.rt(l)&&i(l)}))}st(t){const i=t.targetId,a=t.Ce.count,l=this.ot(i);if(l){const c=l.target;if(tm(c))if(a===0){const d=new mt(c.path);this.et(i,d,nn.newNoDocument(d,St.min()))}else Xt(a===1,20013,{expectedCount:a});else{const d=this._t(i);if(d!==a){const g=this.ut(t),_=g?this.ct(g,t,d):1;if(_!==0){this.it(i);const y=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,y)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:c=0}=i;let d,g;try{d=ar(a).toUint8Array()}catch(_){if(_ instanceof x0)return Ja("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new Nm(d,l,c)}catch(_){return Ja(_ instanceof _l?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return g.ge===0?null:g}ct(t,i,a){return i.Ce.count===a-this.Pt(t,i.targetId)?0:2}Pt(t,i){const a=this.Ge.getRemoteKeysForTarget(i);let l=0;return a.forEach((c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.et(i,c,null),l++)})),l}Tt(t){const i=new Map;this.ze.forEach(((c,d)=>{const g=this.ot(d);if(g){if(c.current&&tm(g.target)){const _=new mt(g.target.path);this.It(_).has(d)||this.Et(d,_)||this.et(d,_,nn.newNoDocument(_,t))}c.Be&&(i.set(d,c.ke()),c.qe())}}));let a=jt();this.He.forEach(((c,d)=>{let g=!0;d.forEachWhile((_=>{const y=this.ot(_);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(t)));const l=new dh(t,i,this.Ye,this.je,a);return this.je=as(),this.Je=Ac(),this.He=Ac(),this.Ye=new me(zt),l}Xe(t,i){if(!this.rt(t))return;const a=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,a),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,a){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),a&&(this.je=this.je.insert(i,a))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new yv,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new Le(zt),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new Le(zt),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||at("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new yv),this.Ge.getRemoteKeysForTarget(t).forEach((i=>{this.et(t,i,null)}))}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function Ac(){return new me(mt.comparator)}function _v(){return new me(mt.comparator)}const yw={asc:"ASCENDING",desc:"DESCENDING"},_w={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vw={and:"AND",or:"OR"};class Ew{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function nm(r,t){return r.useProto3Json||rh(t)?t:{value:t}}function Qc(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lE(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function Tw(r,t){return Qc(r,t.toTimestamp())}function Ii(r){return Xt(!!r,49232),St.fromTimestamp((function(i){const a=rr(i);return new ce(a.seconds,a.nanos)})(r))}function Om(r,t){return im(r,t).canonicalString()}function im(r,t){const i=(function(l){return new de(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?i:i.child(t)}function uE(r){const t=de.fromString(r);return Xt(mE(t),10190,{key:t.toString()}),t}function sm(r,t){return Om(r.databaseId,t.path)}function kd(r,t){const i=uE(t);if(i.get(1)!==r.databaseId.projectId)throw new ct(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new ct(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new mt(hE(i))}function cE(r,t){return Om(r.databaseId,t)}function Sw(r){const t=uE(r);return t.length===4?de.emptyPath():hE(t)}function rm(r){return new de(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function hE(r){return Xt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function vv(r,t,i){return{name:sm(r,t),fields:i.value.mapValue.fields}}function bw(r,t){let i;if("targetChange"in t){t.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:yt(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(y,T){return y.useProto3Json?(Xt(T===void 0||typeof T=="string",58123),$e.fromBase64String(T||"")):(Xt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),$e.fromUint8Array(T||new Uint8Array))})(r,t.targetChange.resumeToken),d=t.targetChange.cause,g=d&&(function(y){const T=y.code===void 0?Z.UNKNOWN:rE(y.code);return new ct(T,y.message||"")})(d);i=new oE(a,l,c,g||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const l=kd(r,a.document.name),c=Ii(a.document.updateTime),d=a.document.createTime?Ii(a.document.createTime):St.min(),g=new pn({mapValue:{fields:a.document.fields}}),_=nn.newFoundDocument(l,c,d,g),y=a.targetIds||[],T=a.removedTargetIds||[];i=new Oc(y,T,_.key,_)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const l=kd(r,a.document),c=a.readTime?Ii(a.readTime):St.min(),d=nn.newNoDocument(l,c),g=a.removedTargetIds||[];i=new Oc([],g,d.key,d)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const l=kd(r,a.document),c=a.removedTargetIds||[];i=new Oc([],c,l,null)}else{if(!("filter"in t))return yt(11601,{Rt:t});{t.filter;const a=t.filter;a.targetId;const{count:l=0,unchangedNames:c}=a,d=new fw(l,c),g=a.targetId;i=new aE(g,d)}}return i}function Aw(r,t){let i;if(t instanceof jl)i={update:vv(r,t.key,t.value)};else if(t instanceof sE)i={delete:sm(r,t.key)};else if(t instanceof fr)i={update:vv(r,t.key,t.data),updateMask:Mw(t.fieldMask)};else{if(!(t instanceof uw))return yt(16599,{Vt:t.type});i={verify:sm(r,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map((a=>(function(c,d){const g=d.transform;if(g instanceof Fc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Ml)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Vl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Gc)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw yt(20930,{transform:d.transform})})(0,a)))),t.precondition.isNone||(i.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:Tw(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:yt(27497)})(r,t.precondition)),i}function ww(r,t){return r&&r.length>0?(Xt(t!==void 0,14353),r.map((i=>(function(l,c){let d=l.updateTime?Ii(l.updateTime):Ii(c);return d.isEqual(St.min())&&(d=Ii(c)),new aw(d,l.transformResults||[])})(i,t)))):[]}function Rw(r,t){return{documents:[cE(r,t.path)]}}function Cw(r,t){const i={structuredQuery:{}},a=t.path;let l;t.collectionGroup!==null?(l=a,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=cE(r,l);const c=(function(y){if(y.length!==0)return dE(Vi.create(y,"and"))})(t.filters);c&&(i.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((T=>(function(C){return{field:Ha(C.field),direction:Nw(C.dir)}})(T)))})(t.orderBy);d&&(i.structuredQuery.orderBy=d);const g=nm(r,t.limit);return g!==null&&(i.structuredQuery.limit=g),t.startAt&&(i.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(i.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:i,parent:l}}function Iw(r){let t=Sw(r.parent);const i=r.structuredQuery,a=i.from?i.from.length:0;let l=null;if(a>0){Xt(a===1,65062);const T=i.from[0];T.allDescendants?l=T.collectionId:t=t.child(T.collectionId)}let c=[];i.where&&(c=(function(b){const C=fE(b);return C instanceof Vi&&q0(C)?C.getFilters():[C]})(i.where));let d=[];i.orderBy&&(d=(function(b){return b.map((C=>(function($){return new Hc(Fa($.field),(function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(C)))})(i.orderBy));let g=null;i.limit&&(g=(function(b){let C;return C=typeof b=="object"?b.value:b,rh(C)?null:C})(i.limit));let _=null;i.startAt&&(_=(function(b){const C=!!b.before,B=b.values||[];return new qc(B,C)})(i.startAt));let y=null;return i.endAt&&(y=(function(b){const C=!b.before,B=b.values||[];return new qc(B,C)})(i.endAt)),Q1(t,l,d,c,g,"F",_,y)}function Dw(r,t){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:l})}})(t.purpose);return i==null?null:{"goog-listen-tags":i}}function fE(r){return r.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=Fa(i.unaryFilter.field);return ke.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=Fa(i.unaryFilter.field);return ke.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Fa(i.unaryFilter.field);return ke.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Fa(i.unaryFilter.field);return ke.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}})(r):r.fieldFilter!==void 0?(function(i){return ke.create(Fa(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(i){return Vi.create(i.compositeFilter.filters.map((a=>fE(a))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return yt(1026)}})(i.compositeFilter.op))})(r):yt(30097,{filter:r})}function Nw(r){return yw[r]}function Ow(r){return _w[r]}function xw(r){return vw[r]}function Ha(r){return{fieldPath:r.canonicalString()}}function Fa(r){return Xe.fromServerFormat(r.fieldPath)}function dE(r){return r instanceof ke?(function(i){if(i.op==="=="){if(av(i.value))return{unaryFilter:{field:Ha(i.field),op:"IS_NAN"}};if(rv(i.value))return{unaryFilter:{field:Ha(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(av(i.value))return{unaryFilter:{field:Ha(i.field),op:"IS_NOT_NAN"}};if(rv(i.value))return{unaryFilter:{field:Ha(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(i.field),op:Ow(i.op),value:i.value}}})(r):r instanceof Vi?(function(i){const a=i.getFilters().map((l=>dE(l)));return a.length===1?a[0]:{compositeFilter:{op:xw(i.op),filters:a}}})(r):yt(54877,{filter:r})}function Mw(r){const t=[];return r.fields.forEach((i=>t.push(i.canonicalString()))),{fieldPaths:t}}function mE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,i,a,l,c=St.min(),d=St.min(),g=$e.EMPTY_BYTE_STRING,_=null){this.target=t,this.targetId=i,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(t){return new $s(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(t){this.yt=t}}function Uw(r){const t=Iw({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?em(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(){this.Cn=new Lw}addToCollectionParentIndex(t,i){return this.Cn.add(i),X.resolve()}getCollectionParents(t,i){return X.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return X.resolve()}deleteFieldIndex(t,i){return X.resolve()}deleteAllFieldIndexes(t){return X.resolve()}createTargetIndexes(t,i){return X.resolve()}getDocumentsMatchingTarget(t,i){return X.resolve(null)}getIndexType(t,i){return X.resolve(0)}getFieldIndexes(t,i){return X.resolve([])}getNextCollectionGroupToUpdate(t){return X.resolve(null)}getMinOffset(t,i){return X.resolve(sr.min())}getMinOffsetFromCollectionGroup(t,i){return X.resolve(sr.min())}updateCollectionGroup(t,i,a){return X.resolve()}updateIndexEntries(t,i){return X.resolve()}}class Lw{constructor(){this.index={}}add(t){const i=t.lastSegment(),a=t.popLast(),l=this.index[i]||new Le(de.comparator),c=!l.has(a);return this.index[i]=l.add(a),c}has(t){const i=t.lastSegment(),a=t.popLast(),l=this.index[i];return l&&l.has(a)}getEntries(t){return(this.index[t]||new Le(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gE=41943040;class gn{static withCacheSize(t){return new gn(t,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(gE,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new no(0)}static cr(){return new no(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="LruGarbageCollector",Pw=1048576;function Sv([r,t],[i,a]){const l=zt(r,i);return l===0?zt(t,a):l}class zw{constructor(t){this.Ir=t,this.buffer=new Le(Sv),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();Sv(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class jw{constructor(t,i,a){this.garbageCollector=t,this.asyncQueue=i,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){at(Tv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){uo(i)?at(Tv,"Ignoring IndexedDB error during garbage collection: ",i):await lo(i)}await this.Vr(3e5)}))}}class Bw{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next((a=>Math.floor(i/100*a)))}nthSequenceNumber(t,i){if(i===0)return X.resolve(sh.ce);const a=new zw(i);return this.mr.forEachTarget(t,(l=>a.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>a.Ar(l))))).next((()=>a.maxValue))}removeTargets(t,i,a){return this.mr.removeTargets(t,i,a)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Ev)):this.getCacheSize(t).next((a=>a<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ev):this.yr(t,i)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let a,l,c,d,g,_,y;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),l=this.params.maximumSequenceNumbersToCollect):l=b,d=Date.now(),this.nthSequenceNumber(t,l)))).next((b=>(a=b,g=Date.now(),this.removeTargets(t,a,i)))).next((b=>(c=b,_=Date.now(),this.removeOrphanedDocuments(t,a)))).next((b=>(y=Date.now(),Ba()<=Pt.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${c} targets in `+(_-g)+`ms
	Removed ${b} documents in `+(y-_)+`ms
Total Duration: ${y-T}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:b}))))}}function qw(r,t){return new Bw(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.changes=new Zr((t=>t.toString()),((t,i)=>t.isEqual(i))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,nn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?X.resolve(a):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(t,i,a,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=l}getDocument(t,i){let a=null;return this.documentOverlayCache.getOverlay(t,i).next((l=>(a=l,this.remoteDocumentCache.getEntry(t,i)))).next((l=>(a!==null&&wl(a.mutation,l,Cn.empty(),ce.now()),l)))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next((a=>this.getLocalViewOfDocuments(t,a,jt()).next((()=>a))))}getLocalViewOfDocuments(t,i,a=jt()){const l=Gr();return this.populateOverlays(t,l,i).next((()=>this.computeViews(t,i,l,a).next((c=>{let d=yl();return c.forEach(((g,_)=>{d=d.insert(g,_.overlayedDocument)})),d}))))}getOverlayedDocuments(t,i){const a=Gr();return this.populateOverlays(t,a,i).next((()=>this.computeViews(t,i,a,jt())))}populateOverlays(t,i,a){const l=[];return a.forEach((c=>{i.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((d,g)=>{i.set(d,g)}))}))}computeViews(t,i,a,l){let c=as();const d=Al(),g=(function(){return Al()})();return i.forEach(((_,y)=>{const T=a.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof fr)?c=c.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),wl(T.mutation,y,T.mutation.getFieldMask(),ce.now())):d.set(y.key,Cn.empty())})),this.recalculateAndSaveOverlays(t,c).next((_=>(_.forEach(((y,T)=>d.set(y,T))),i.forEach(((y,T)=>g.set(y,new Fw(T,d.get(y)??null)))),g)))}recalculateAndSaveOverlays(t,i){const a=Al();let l=new me(((d,g)=>d-g)),c=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next((d=>{for(const g of d)g.keys().forEach((_=>{const y=i.get(_);if(y===null)return;let T=a.get(_)||Cn.empty();T=g.applyToLocalView(y,T),a.set(_,T);const b=(l.get(g.batchId)||jt()).add(_);l=l.insert(g.batchId,b)}))})).next((()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),y=_.key,T=_.value,b=$0();T.forEach((C=>{if(!c.has(C)){const B=nE(i.get(C),a.get(C));B!==null&&b.set(C,B),c=c.add(C)}})),d.push(this.documentOverlayCache.saveOverlays(t,y,b))}return X.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next((a=>this.recalculateAndSaveOverlays(t,a)))}getDocumentsMatchingQuery(t,i,a,l){return(function(d){return mt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):Y1(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,a,l):this.getDocumentsMatchingCollectionQuery(t,i,a,l)}getNextDocuments(t,i,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,a,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,a.largestBatchId,l-c.size):X.resolve(Gr());let g=Dl,_=c;return d.next((y=>X.forEach(y,((T,b)=>(g<b.largestBatchId&&(g=b.largestBatchId),c.get(T)?X.resolve():this.remoteDocumentCache.getEntry(t,T).next((C=>{_=_.insert(T,C)}))))).next((()=>this.populateOverlays(t,y,c))).next((()=>this.computeViews(t,_,y,jt()))).next((T=>({batchId:g,changes:X0(T)})))))}))}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new mt(i)).next((a=>{let l=yl();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l}))}getDocumentsMatchingCollectionGroupQuery(t,i,a,l){const c=i.collectionGroup;let d=yl();return this.indexManager.getCollectionParents(t,c).next((g=>X.forEach(g,(_=>{const y=(function(b,C){return new oh(C,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(i,_.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,a,l).next((T=>{T.forEach(((b,C)=>{d=d.insert(b,C)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(t,i,a,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,a.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,a,c,l)))).next((d=>{c.forEach(((_,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,nn.newInvalidDocument(T)))}));let g=yl();return d.forEach(((_,y)=>{const T=c.get(_);T!==void 0&&wl(T.mutation,y,Cn.empty(),ce.now()),ch(i,y)&&(g=g.insert(_,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return X.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Ii(l.createTime)}})(i)),X.resolve()}getNamedQuery(t,i){return X.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:Uw(l.bundledQuery),readTime:Ii(l.readTime)}})(i)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.overlays=new me(mt.comparator),this.qr=new Map}getOverlay(t,i){return X.resolve(this.overlays.get(i))}getOverlays(t,i){const a=Gr();return X.forEach(i,(l=>this.getOverlay(t,l).next((c=>{c!==null&&a.set(l,c)})))).next((()=>a))}saveOverlays(t,i,a){return a.forEach(((l,c)=>{this.St(t,i,c)})),X.resolve()}removeOverlaysForBatchId(t,i,a){const l=this.qr.get(a);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(a)),X.resolve()}getOverlaysForCollection(t,i,a){const l=Gr(),c=i.length+1,d=new mt(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const _=g.getNext().value,y=_.getKey();if(!i.isPrefixOf(y.path))break;y.path.length===c&&_.largestBatchId>a&&l.set(_.getKey(),_)}return X.resolve(l)}getOverlaysForCollectionGroup(t,i,a,l){let c=new me(((y,T)=>y-T));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===i&&y.largestBatchId>a){let T=c.get(y.largestBatchId);T===null&&(T=Gr(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const g=Gr(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((y,T)=>g.set(y,T))),!(g.size()>=l)););return X.resolve(g)}St(t,i,a){const l=this.overlays.get(a.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(a.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new hw(i,a));let c=this.qr.get(i);c===void 0&&(c=jt(),this.qr.set(i,c)),this.qr.set(i,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.sessionToken=$e.EMPTY_BYTE_STRING}getSessionToken(t){return X.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(){this.Qr=new Le(Be.$r),this.Ur=new Le(Be.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const a=new Be(t,i);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(t,i){t.forEach((a=>this.addReference(a,i)))}removeReference(t,i){this.Gr(new Be(t,i))}zr(t,i){t.forEach((a=>this.removeReference(a,i)))}jr(t){const i=new mt(new de([])),a=new Be(i,t),l=new Be(i,t+1),c=[];return this.Ur.forEachInRange([a,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new mt(new de([])),a=new Be(i,t),l=new Be(i,t+1);let c=jt();return this.Ur.forEachInRange([a,l],(d=>{c=c.add(d.key)})),c}containsKey(t){const i=new Be(t,0),a=this.Qr.firstAfterOrEqual(i);return a!==null&&t.isEqual(a.key)}}class Be{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return mt.comparator(t.key,i.key)||zt(t.Yr,i.Yr)}static Kr(t,i){return zt(t.Yr,i.Yr)||mt.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Le(Be.$r)}checkEmpty(t){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,a,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new cw(c,i,a,l);this.mutationQueue.push(d);for(const g of l)this.Zr=this.Zr.add(new Be(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return X.resolve(d)}lookupMutationBatch(t,i){return X.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const a=i+1,l=this.ei(a),c=l<0?0:l;return X.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?bm:this.tr-1)}getAllMutationBatches(t){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const a=new Be(i,0),l=new Be(i,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([a,l],(d=>{const g=this.Xr(d.Yr);c.push(g)})),X.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,i){let a=new Le(zt);return i.forEach((l=>{const c=new Be(l,0),d=new Be(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(g=>{a=a.add(g.Yr)}))})),X.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(t,i){const a=i.path,l=a.length+1;let c=a;mt.isDocumentKey(c)||(c=c.child(""));const d=new Be(new mt(c),0);let g=new Le(zt);return this.Zr.forEachWhile((_=>{const y=_.key.path;return!!a.isPrefixOf(y)&&(y.length===l&&(g=g.add(_.Yr)),!0)}),d),X.resolve(this.ti(g))}ti(t){const i=[];return t.forEach((a=>{const l=this.Xr(a);l!==null&&i.push(l)})),i}removeMutationBatch(t,i){Xt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return X.forEach(i.mutations,(l=>{const c=new Be(l.key,i.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=a}))}ir(t){}containsKey(t,i){const a=new Be(i,0),l=this.Zr.firstAfterOrEqual(a);return X.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,X.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(t){this.ri=t,this.docs=(function(){return new me(mt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const a=i.key,l=this.docs.get(a),c=l?l.size:0,d=this.ri(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const a=this.docs.get(i);return X.resolve(a?a.document.mutableCopy():nn.newInvalidDocument(i))}getEntries(t,i){let a=as();return i.forEach((l=>{const c=this.docs.get(l);a=a.insert(l,c?c.document.mutableCopy():nn.newInvalidDocument(l))})),X.resolve(a)}getDocumentsMatchingQuery(t,i,a,l){let c=as();const d=i.path,g=new mt(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:y,value:{document:T}}=_.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||A1(b1(T),a)<=0||(l.has(T.key)||ch(i,T))&&(c=c.insert(T.key,T.mutableCopy()))}return X.resolve(c)}getAllFromCollectionGroup(t,i,a,l){yt(9500)}ii(t,i){return X.forEach(this.docs,(a=>i(a)))}newChangeBuffer(t){return new Zw(this)}getSize(t){return X.resolve(this.size)}}class Zw extends Hw{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach(((a,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(a)})),X.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(t){this.persistence=t,this.si=new Zr((i=>Rm(i)),Cm),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.oi=0,this._i=new xm,this.targetCount=0,this.ai=no.ur()}forEachTarget(t,i){return this.si.forEach(((a,l)=>i(l))),X.resolve()}getLastRemoteSnapshotVersion(t){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return X.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(t,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.oi&&(this.oi=i),X.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new no(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,X.resolve()}updateTargetData(t,i){return this.Pr(i),X.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,X.resolve()}removeTargets(t,i,a){let l=0;const c=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=i&&a.get(g.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)})),X.waitFor(c).next((()=>l))}getTargetCount(t){return X.resolve(this.targetCount)}getTargetData(t,i){const a=this.si.get(i)||null;return X.resolve(a)}addMatchingKeys(t,i,a){return this._i.Wr(i,a),X.resolve()}removeMatchingKeys(t,i,a){this._i.zr(i,a);const l=this.persistence.referenceDelegate,c=[];return l&&i.forEach((d=>{c.push(l.markPotentiallyOrphaned(t,d))})),X.waitFor(c)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),X.resolve()}getMatchingKeysForTargetId(t,i){const a=this._i.Hr(i);return X.resolve(a)}containsKey(t,i){return X.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(t,i){this.ui={},this.overlays={},this.ci=new sh(0),this.li=!1,this.li=!0,this.hi=new Kw,this.referenceDelegate=t(this),this.Pi=new Jw(this),this.indexManager=new kw,this.remoteDocumentCache=(function(l){return new $w(l)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new Vw(i),this.Ii=new Qw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new Yw,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let a=this.ui[t.toKey()];return a||(a=new Xw(i,this.referenceDelegate),this.ui[t.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,a){at("MemoryPersistence","Starting transaction:",t);const l=new Ww(this.ci.next());return this.referenceDelegate.Ei(),a(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,i){return X.or(Object.values(this.ui).map((a=>()=>a.containsKey(t,i))))}}class Ww extends R1{constructor(t){super(),this.currentSequenceNumber=t}}class Mm{constructor(t){this.persistence=t,this.Ri=new xm,this.Vi=null}static mi(t){return new Mm(t)}get fi(){if(this.Vi)return this.Vi;throw yt(60996)}addReference(t,i,a){return this.Ri.addReference(a,i),this.fi.delete(a.toString()),X.resolve()}removeReference(t,i,a){return this.Ri.removeReference(a,i),this.fi.add(a.toString()),X.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),X.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,i.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>a.removeTargetData(t,i)))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(a=>{const l=mt.fromPath(a);return this.gi(t,l).next((c=>{c||i.removeEntry(l,St.min())}))})).next((()=>(this.Vi=null,i.apply(t))))}updateLimboDocument(t,i){return this.gi(t,i).next((a=>{a?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(t){return 0}gi(t,i){return X.or([()=>X.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class Yc{constructor(t,i){this.persistence=t,this.pi=new Zr((a=>D1(a.path)),((a,l)=>a.isEqual(l))),this.garbageCollector=qw(this,i)}static mi(t,i){return new Yc(t,i)}Ei(){}di(t){return X.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((a=>i.next((l=>a+l))))}wr(t){let i=0;return this.pr(t,(a=>{i++})).next((()=>i))}pr(t,i){return X.forEach(this.pi,((a,l)=>this.br(t,a,l).next((c=>c?X.resolve():i(l)))))}removeTargets(t,i,a){return this.persistence.getTargetCache().removeTargets(t,i,a)}removeOrphanedDocuments(t,i){let a=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(d=>this.br(t,d,i).next((g=>{g||(a++,c.removeEntry(d,St.min()))})))).next((()=>c.apply(t))).next((()=>a))}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),X.resolve()}removeTarget(t,i){const a=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,i,a){return this.pi.set(a,t.currentSequenceNumber),X.resolve()}removeReference(t,i,a){return this.pi.set(a,t.currentSequenceNumber),X.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),X.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=Ic(t.data.value)),i}br(t,i,a){return X.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return X.resolve(l!==void 0&&l>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t,i,a,l){this.targetId=t,this.fromCache=i,this.Es=a,this.ds=l}static As(t,i){let a=jt(),l=jt();for(const c of i.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Vm(t,i.fromCache,a,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Hb()?8:C1(sn())>0?6:4})()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,a,l){const c={result:null};return this.ys(t,i).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(t,i,l,a).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new tR;return this.Ss(t,i,d).next((g=>{if(c.result=g,this.Vs)return this.bs(t,i,d,g.size)}))})).next((()=>c.result))}bs(t,i,a,l){return a.documentReadCount<this.fs?(Ba()<=Pt.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",qa(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Ba()<=Pt.DEBUG&&at("QueryEngine","Query:",qa(i),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.gs*l?(Ba()<=Pt.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",qa(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ri(i))):X.resolve())}ys(t,i){if(cv(i))return X.resolve(null);let a=Ri(i);return this.indexManager.getIndexType(t,a).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=em(i,null,"F"),a=Ri(i)),this.indexManager.getDocumentsMatchingTarget(t,a).next((c=>{const d=jt(...c);return this.ps.getDocuments(t,d).next((g=>this.indexManager.getMinOffset(t,a).next((_=>{const y=this.Ds(i,g);return this.Cs(i,y,d,_.readTime)?this.ys(t,em(i,null,"F")):this.vs(t,y,i,_)}))))})))))}ws(t,i,a,l){return cv(i)||l.isEqual(St.min())?X.resolve(null):this.ps.getDocuments(t,a).next((c=>{const d=this.Ds(i,c);return this.Cs(i,d,a,l)?X.resolve(null):(Ba()<=Pt.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),qa(i)),this.vs(t,d,i,S1(l,Dl)).next((g=>g)))}))}Ds(t,i){let a=new Le(Y0(t));return i.forEach(((l,c)=>{ch(t,c)&&(a=a.add(c))})),a}Cs(t,i,a,l){if(t.limit===null)return!1;if(a.size!==i.size)return!0;const c=t.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,i,a){return Ba()<=Pt.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",qa(i)),this.ps.getDocumentsMatchingQuery(t,i,sr.min(),a)}vs(t,i,a,l){return this.ps.getDocumentsMatchingQuery(t,a,l).next((c=>(i.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="LocalStore",nR=3e8;class iR{constructor(t,i,a,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new me(zt),this.xs=new Zr((c=>Rm(c)),Cm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(a)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Gw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>t.collect(i,this.Ms)))}}function sR(r,t,i,a){return new iR(r,t,i,a)}async function yE(r,t){const i=At(r);return await i.persistence.runTransaction("Handle user change","readonly",(a=>{let l;return i.mutationQueue.getAllMutationBatches(a).next((c=>(l=c,i.Bs(t),i.mutationQueue.getAllMutationBatches(a)))).next((c=>{const d=[],g=[];let _=jt();for(const y of l){d.push(y.batchId);for(const T of y.mutations)_=_.add(T.key)}for(const y of c){g.push(y.batchId);for(const T of y.mutations)_=_.add(T.key)}return i.localDocuments.getDocuments(a,_).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:g})))}))}))}function rR(r,t){const i=At(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const l=t.batch.keys(),c=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,_,y,T){const b=y.batch,C=b.keys();let B=X.resolve();return C.forEach(($=>{B=B.next((()=>T.getEntry(_,$))).next((W=>{const J=y.docVersions.get($);Xt(J!==null,48541),W.version.compareTo(J)<0&&(b.applyToRemoteDocument(W,y),W.isValidDocument()&&(W.setReadTime(y.commitVersion),T.addEntry(W)))}))})),B.next((()=>g.mutationQueue.removeMutationBatch(_,b)))})(i,a,t,c).next((()=>c.apply(a))).next((()=>i.mutationQueue.performConsistencyCheck(a))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(a,l,t.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let _=jt();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(_=_.add(g.batch.mutations[y].key));return _})(t)))).next((()=>i.localDocuments.getDocuments(a,l)))}))}function _E(r){const t=At(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>t.Pi.getLastRemoteSnapshotVersion(i)))}function aR(r,t){const i=At(r),a=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const g=[];t.targetChanges.forEach(((T,b)=>{const C=l.get(b);if(!C)return;g.push(i.Pi.removeMatchingKeys(c,T.removedDocuments,b).next((()=>i.Pi.addMatchingKeys(c,T.addedDocuments,b))));let B=C.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(b)!==null?B=B.withResumeToken($e.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):T.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(T.resumeToken,a)),l=l.insert(b,B),(function(W,J,lt){return W.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=nR?!0:lt.addedDocuments.size+lt.modifiedDocuments.size+lt.removedDocuments.size>0})(C,B,T)&&g.push(i.Pi.updateTargetData(c,B))}));let _=as(),y=jt();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(c,T))})),g.push(oR(c,d,t.documentUpdates).next((T=>{_=T.ks,y=T.qs}))),!a.isEqual(St.min())){const T=i.Pi.getLastRemoteSnapshotVersion(c).next((b=>i.Pi.setTargetsMetadata(c,c.currentSequenceNumber,a)));g.push(T)}return X.waitFor(g).next((()=>d.apply(c))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,_,y))).next((()=>_))})).then((c=>(i.Ms=l,c)))}function oR(r,t,i){let a=jt(),l=jt();return i.forEach((c=>a=a.add(c))),t.getEntries(r,a).next((c=>{let d=as();return i.forEach(((g,_)=>{const y=c.get(g);_.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(g)),_.isNoDocument()&&_.version.isEqual(St.min())?(t.removeEntry(g,_.readTime),d=d.insert(g,_)):!y.isValidDocument()||_.version.compareTo(y.version)>0||_.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(_),d=d.insert(g,_)):at(Um,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",_.version)})),{ks:d,qs:l}}))}function lR(r,t){const i=At(r);return i.persistence.runTransaction("Get next mutation batch","readonly",(a=>(t===void 0&&(t=bm),i.mutationQueue.getNextMutationBatchAfterBatchId(a,t))))}function uR(r,t){const i=At(r);return i.persistence.runTransaction("Allocate target","readwrite",(a=>{let l;return i.Pi.getTargetData(a,t).next((c=>c?(l=c,X.resolve(l)):i.Pi.allocateTargetId(a).next((d=>(l=new $s(t,d,"TargetPurposeListen",a.currentSequenceNumber),i.Pi.addTargetData(a,l).next((()=>l)))))))})).then((a=>{const l=i.Ms.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(a.targetId,a),i.xs.set(t,a.targetId)),a}))}async function am(r,t,i){const a=At(r),l=a.Ms.get(t),c=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",c,(d=>a.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!uo(d))throw d;at(Um,`Failed to update sequence numbers for target ${t}: ${d}`)}a.Ms=a.Ms.remove(t),a.xs.delete(l.target)}function bv(r,t,i){const a=At(r);let l=St.min(),c=jt();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(_,y,T){const b=At(_),C=b.xs.get(T);return C!==void 0?X.resolve(b.Ms.get(C)):b.Pi.getTargetData(y,T)})(a,d,Ri(t)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(d,g.targetId).next((_=>{c=_}))})).next((()=>a.Fs.getDocumentsMatchingQuery(d,t,i?l:St.min(),i?c:jt()))).next((g=>(cR(a,X1(t),g),{documents:g,Qs:c})))))}function cR(r,t,i){let a=r.Os.get(t)||St.min();i.forEach(((l,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)})),r.Os.set(t,a)}class Av{constructor(){this.activeTargetIds=ew()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class hR{constructor(){this.Mo=new Av,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,a){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,a){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Av,Promise.resolve()}handleUserChange(t,i,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="ConnectivityMonitor";class Rv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){at(wv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){at(wv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wc=null;function om(){return wc===null?wc=(function(){return 268435456+Math.round(2147483648*Math.random())})():wc++,"0x"+wc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="RestConnection",dR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mR{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${a}/databases/${l}`,this.Wo=this.databaseId.database===jc?`project_id=${a}`:`project_id=${a}&database_id=${l}`}Go(t,i,a,l,c){const d=om(),g=this.zo(t,i.toUriEncodedString());at(Ld,`Sending RPC '${t}' ${d}:`,g,a);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,l,c);const{host:y}=new URL(g),T=ro(y);return this.Jo(t,g,_,a,T).then((b=>(at(Ld,`Received RPC '${t}' ${d}: `,b),b)),(b=>{throw Ja(Ld,`RPC '${t}' ${d} failed with error: `,b,"url: ",g,"request:",a),b}))}Ho(t,i,a,l,c,d){return this.Go(t,i,a,l,c)}jo(t,i,a){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+oo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,c)=>t[c]=l)),a&&a.headers.forEach(((l,c)=>t[c]=l))}zo(t,i){const a=dR[t];return`${this.Uo}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We="WebChannelConnection";class pR extends mR{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,a,l,c){const d=om();return new Promise(((g,_)=>{const y=new S0;y.setWithCredentials(!0),y.listenOnce(b0.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Cc.NO_ERROR:const b=y.getResponseJson();at(We,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(b)),g(b);break;case Cc.TIMEOUT:at(We,`RPC '${t}' ${d} timed out`),_(new ct(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Cc.HTTP_ERROR:const C=y.getStatus();if(at(We,`RPC '${t}' ${d} failed with status:`,C,"response text:",y.getResponseText()),C>0){let B=y.getResponseJson();Array.isArray(B)&&(B=B[0]);const $=B?.error;if($&&$.status&&$.message){const W=(function(lt){const _t=lt.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(_t)>=0?_t:Z.UNKNOWN})($.status);_(new ct(W,$.message))}else _(new ct(Z.UNKNOWN,"Server responded with status "+y.getStatus()))}else _(new ct(Z.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{l_:t,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{at(We,`RPC '${t}' ${d} completed.`)}}));const T=JSON.stringify(l);at(We,`RPC '${t}' ${d} sending request:`,l),y.send(i,"POST",T,a,15)}))}T_(t,i,a){const l=om(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=R0(),g=w0(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(_.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,i,a),_.encodeInitMessageHeaders=!0;const T=c.join("");at(We,`Creating RPC '${t}' stream ${l}: ${T}`,_);const b=d.createWebChannel(T,_);this.I_(b);let C=!1,B=!1;const $=new gR({Yo:J=>{B?at(We,`Not sending because RPC '${t}' stream ${l} is closed:`,J):(C||(at(We,`Opening RPC '${t}' stream ${l} transport.`),b.open(),C=!0),at(We,`RPC '${t}' stream ${l} sending:`,J),b.send(J))},Zo:()=>b.close()}),W=(J,lt,_t)=>{J.listen(lt,(dt=>{try{_t(dt)}catch(Nt){setTimeout((()=>{throw Nt}),0)}}))};return W(b,pl.EventType.OPEN,(()=>{B||(at(We,`RPC '${t}' stream ${l} transport opened.`),$.o_())})),W(b,pl.EventType.CLOSE,(()=>{B||(B=!0,at(We,`RPC '${t}' stream ${l} transport closed`),$.a_(),this.E_(b))})),W(b,pl.EventType.ERROR,(J=>{B||(B=!0,Ja(We,`RPC '${t}' stream ${l} transport errored. Name:`,J.name,"Message:",J.message),$.a_(new ct(Z.UNAVAILABLE,"The operation could not be completed")))})),W(b,pl.EventType.MESSAGE,(J=>{if(!B){const lt=J.data[0];Xt(!!lt,16349);const _t=lt,dt=_t?.error||_t[0]?.error;if(dt){at(We,`RPC '${t}' stream ${l} received error:`,dt);const Nt=dt.status;let $t=(function(A){const R=xe[A];if(R!==void 0)return rE(R)})(Nt),gt=dt.message;$t===void 0&&($t=Z.INTERNAL,gt="Unknown error status: "+Nt+" with message "+dt.message),B=!0,$.a_(new ct($t,gt)),b.close()}else at(We,`RPC '${t}' stream ${l} received:`,lt),$.u_(lt)}})),W(g,A0.STAT_EVENT,(J=>{J.stat===Xd.PROXY?at(We,`RPC '${t}' stream ${l} detected buffering proxy`):J.stat===Xd.NOPROXY&&at(We,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{$.__()}),0),$}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((i=>i===t))}}function Pd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(r){return new Ew(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(t,i,a=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=i,this.d_=a,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-a);l>0&&at("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="PersistentStream";class EE{constructor(t,i,a,l,c,d,g,_){this.Mi=t,this.S_=a,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vE(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===Z.RESOURCE_EXHAUSTED?(rs(i.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,l])=>{this.D_===i&&this.G_(a,l)}),(a=>{t((()=>{const l=new ct(Z.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(l)}))}))}G_(t,i){const a=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{a((()=>this.z_(l)))})),this.stream.onMessage((l=>{a((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return at(Cv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget((()=>this.D_===t?i():(at(Cv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yR extends EE{constructor(t,i,a,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,l,d),this.serializer=c}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=bw(this.serializer,t),a=(function(c){if(!("targetChange"in c))return St.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?St.min():d.readTime?Ii(d.readTime):St.min()})(t);return this.listener.H_(i,a)}Y_(t){const i={};i.database=rm(this.serializer),i.addTarget=(function(c,d){let g;const _=d.target;if(g=tm(_)?{documents:Rw(c,_)}:{query:Cw(c,_).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=lE(c,d.resumeToken);const y=nm(c,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(St.min())>0){g.readTime=Qc(c,d.snapshotVersion.toTimestamp());const y=nm(c,d.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,t);const a=Dw(this.serializer,t);a&&(i.labels=a),this.q_(i)}Z_(t){const i={};i.database=rm(this.serializer),i.removeTarget=t,this.q_(i)}}class _R extends EE{constructor(t,i,a,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return Xt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Xt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Xt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=ww(t.writeResults,t.commitTime),a=Ii(t.commitTime);return this.listener.na(a,i)}ra(){const t={};t.database=rm(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map((a=>Aw(this.serializer,a)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{}class ER extends vR{constructor(t,i,a,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=a,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ct(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(t,im(i,a),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ct(Z.UNKNOWN,c.toString())}))}Ho(t,i,a,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(t,im(i,a),l,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ct(Z.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class TR{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rs(i),this.aa=!1):at("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="RemoteStore";class SR{constructor(t,i,a,l,c){this.localStore=t,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{a.enqueueAndForget((async()=>{Jr(this)&&(at(Xr,"Restarting streams for network reachability change."),await(async function(_){const y=At(_);y.Ea.add(4),await ql(y),y.Ra.set("Unknown"),y.Ea.delete(4),await gh(y)})(this))}))})),this.Ra=new TR(a,l)}}async function gh(r){if(Jr(r))for(const t of r.da)await t(!0)}async function ql(r){for(const t of r.da)await t(!1)}function TE(r,t){const i=At(r);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),zm(i)?Pm(i):co(i).O_()&&Lm(i,t))}function km(r,t){const i=At(r),a=co(i);i.Ia.delete(t),a.O_()&&SE(i,t),i.Ia.size===0&&(a.O_()?a.L_():Jr(i)&&i.Ra.set("Unknown"))}function Lm(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(St.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}co(r).Y_(t)}function SE(r,t){r.Va.Ue(t),co(r).Z_(t)}function Pm(r){r.Va=new pw({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),co(r).start(),r.Ra.ua()}function zm(r){return Jr(r)&&!co(r).x_()&&r.Ia.size>0}function Jr(r){return At(r).Ea.size===0}function bE(r){r.Va=void 0}async function bR(r){r.Ra.set("Online")}async function AR(r){r.Ia.forEach(((t,i)=>{Lm(r,t)}))}async function wR(r,t){bE(r),zm(r)?(r.Ra.ha(t),Pm(r)):r.Ra.set("Unknown")}async function RR(r,t,i){if(r.Ra.set("Online"),t instanceof oE&&t.state===2&&t.cause)try{await(async function(l,c){const d=c.cause;for(const g of c.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.Va.removeTarget(g))})(r,t)}catch(a){at(Xr,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await Kc(r,a)}else if(t instanceof Oc?r.Va.Ze(t):t instanceof aE?r.Va.st(t):r.Va.tt(t),!i.isEqual(St.min()))try{const a=await _E(r.localStore);i.compareTo(a)>=0&&await(function(c,d){const g=c.Va.Tt(d);return g.targetChanges.forEach(((_,y)=>{if(_.resumeToken.approximateByteSize()>0){const T=c.Ia.get(y);T&&c.Ia.set(y,T.withResumeToken(_.resumeToken,d))}})),g.targetMismatches.forEach(((_,y)=>{const T=c.Ia.get(_);if(!T)return;c.Ia.set(_,T.withResumeToken($e.EMPTY_BYTE_STRING,T.snapshotVersion)),SE(c,_);const b=new $s(T.target,_,y,T.sequenceNumber);Lm(c,b)})),c.remoteSyncer.applyRemoteEvent(g)})(r,i)}catch(a){at(Xr,"Failed to raise snapshot:",a),await Kc(r,a)}}async function Kc(r,t,i){if(!uo(t))throw t;r.Ea.add(1),await ql(r),r.Ra.set("Offline"),i||(i=()=>_E(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{at(Xr,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await gh(r)}))}function AE(r,t){return t().catch((i=>Kc(r,i,t)))}async function ph(r){const t=At(r),i=lr(t);let a=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:bm;for(;CR(t);)try{const l=await lR(t.localStore,a);if(l===null){t.Ta.length===0&&i.L_();break}a=l.batchId,IR(t,l)}catch(l){await Kc(t,l)}wE(t)&&RE(t)}function CR(r){return Jr(r)&&r.Ta.length<10}function IR(r,t){r.Ta.push(t);const i=lr(r);i.O_()&&i.X_&&i.ea(t.mutations)}function wE(r){return Jr(r)&&!lr(r).x_()&&r.Ta.length>0}function RE(r){lr(r).start()}async function DR(r){lr(r).ra()}async function NR(r){const t=lr(r);for(const i of r.Ta)t.ea(i.mutations)}async function OR(r,t,i){const a=r.Ta.shift(),l=Dm.from(a,t,i);await AE(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await ph(r)}async function xR(r,t){t&&lr(r).X_&&await(async function(a,l){if((function(d){return dw(d)&&d!==Z.ABORTED})(l.code)){const c=a.Ta.shift();lr(a).B_(),await AE(a,(()=>a.remoteSyncer.rejectFailedWrite(c.batchId,l))),await ph(a)}})(r,t),wE(r)&&RE(r)}async function Iv(r,t){const i=At(r);i.asyncQueue.verifyOperationInProgress(),at(Xr,"RemoteStore received new credentials");const a=Jr(i);i.Ea.add(3),await ql(i),a&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await gh(i)}async function MR(r,t){const i=At(r);t?(i.Ea.delete(2),await gh(i)):t||(i.Ea.add(2),await ql(i),i.Ra.set("Unknown"))}function co(r){return r.ma||(r.ma=(function(i,a,l){const c=At(i);return c.sa(),new yR(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:bR.bind(null,r),t_:AR.bind(null,r),r_:wR.bind(null,r),H_:RR.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),zm(r)?Pm(r):r.Ra.set("Unknown")):(await r.ma.stop(),bE(r))}))),r.ma}function lr(r){return r.fa||(r.fa=(function(i,a,l){const c=At(i);return c.sa(),new _R(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:DR.bind(null,r),r_:xR.bind(null,r),ta:NR.bind(null,r),na:OR.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await ph(r)):(await r.fa.stop(),r.Ta.length>0&&(at(Xr,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(t,i,a,l,c){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=a,this.op=l,this.removalCallback=c,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,i,a,l,c){const d=Date.now()+a,g=new jm(t,i,d,l,c);return g.start(a),g}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct(Z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bm(r,t){if(rs("AsyncQueue",`${t}: ${r}`),uo(r))return new ct(Z.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{static emptySet(t){return new Qa(t.comparator)}constructor(t){this.comparator=t?(i,a)=>t(i,a)||mt.comparator(i.key,a.key):(i,a)=>mt.comparator(i.key,a.key),this.keyedMap=yl(),this.sortedSet=new me(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((i,a)=>(t(i),!1)))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Qa)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=a.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((i=>{t.push(i.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const a=new Qa;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.ga=new me(mt.comparator)}track(t){const i=t.doc.key,a=this.ga.get(i);a?t.type!==0&&a.type===3?this.ga=this.ga.insert(i,t):t.type===3&&a.type!==1?this.ga=this.ga.insert(i,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.ga=this.ga.remove(i):t.type===1&&a.type===2?this.ga=this.ga.insert(i,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):yt(63341,{Rt:t,pa:a}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal(((i,a)=>{t.push(a)})),t}}class io{constructor(t,i,a,l,c,d,g,_,y){this.query=t,this.docs=i,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=y}static fromInitialDocuments(t,i,a,l,c){const d=[];return i.forEach((g=>{d.push({type:0,doc:g})})),new io(t,i,Qa.emptySet(i),d,a,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&uh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,a=t.docChanges;if(i.length!==a.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==a[l].type||!i[l].doc.isEqual(a[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class UR{constructor(){this.queries=Nv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,a){const l=At(i),c=l.queries;l.queries=Nv(),c.forEach(((d,g)=>{for(const _ of g.Sa)_.onError(a)}))})(this,new ct(Z.ABORTED,"Firestore shutting down"))}}function Nv(){return new Zr((r=>Q0(r)),uh)}async function CE(r,t){const i=At(r);let a=3;const l=t.query;let c=i.queries.get(l);c?!c.ba()&&t.Da()&&(a=2):(c=new VR,a=t.Da()?0:1);try{switch(a){case 0:c.wa=await i.onListen(l,!0);break;case 1:c.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const g=Bm(d,`Initialization of query '${qa(t.query)}' failed`);return void t.onError(g)}i.queries.set(l,c),c.Sa.push(t),t.va(i.onlineState),c.wa&&t.Fa(c.wa)&&qm(i)}async function IE(r,t){const i=At(r),a=t.query;let l=3;const c=i.queries.get(a);if(c){const d=c.Sa.indexOf(t);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function kR(r,t){const i=At(r);let a=!1;for(const l of t){const c=l.query,d=i.queries.get(c);if(d){for(const g of d.Sa)g.Fa(l)&&(a=!0);d.wa=l}}a&&qm(i)}function LR(r,t,i){const a=At(r),l=a.queries.get(t);if(l)for(const c of l.Sa)c.onError(i);a.queries.delete(t)}function qm(r){r.Ca.forEach((t=>{t.next()}))}var lm,Ov;(Ov=lm||(lm={})).Ma="default",Ov.Cache="cache";class DE{constructor(t,i,a){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(t){if(!this.options.includeMetadataChanges){const a=[];for(const l of t.docChanges)l.type!==3&&a.push(l);t=new io(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const a=i!=="Offline";return(!this.options.qa||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=io.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(t){this.key=t}}class OE{constructor(t){this.key=t}}class PR{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=jt(),this.mutatedKeys=jt(),this.eu=Y0(t),this.tu=new Qa(this.eu)}get nu(){return this.Ya}ru(t,i){const a=i?i.iu:new Dv,l=i?i.tu:this.tu;let c=i?i.mutatedKeys:this.mutatedKeys,d=l,g=!1;const _=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((T,b)=>{const C=l.get(T),B=ch(this.query,b)?b:null,$=!!C&&this.mutatedKeys.has(C.key),W=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let J=!1;C&&B?C.data.isEqual(B.data)?$!==W&&(a.track({type:3,doc:B}),J=!0):this.su(C,B)||(a.track({type:2,doc:B}),J=!0,(_&&this.eu(B,_)>0||y&&this.eu(B,y)<0)&&(g=!0)):!C&&B?(a.track({type:0,doc:B}),J=!0):C&&!B&&(a.track({type:1,doc:C}),J=!0,(_||y)&&(g=!0)),J&&(B?(d=d.add(B),c=W?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),a.track({type:1,doc:T})}return{tu:d,iu:a,Cs:g,mutatedKeys:c}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,a,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort(((T,b)=>(function(B,$){const W=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{Rt:J})}};return W(B)-W($)})(T.type,b.type)||this.eu(T.doc,b.doc))),this.ou(a),l=l??!1;const g=i&&!l?this._u():[],_=this.Xa.size===0&&this.current&&!l?1:0,y=_!==this.Za;return this.Za=_,d.length!==0||y?{snapshot:new io(this.query,t.tu,c,d,t.mutatedKeys,_===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Dv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),t.modifiedDocuments.forEach((i=>{})),t.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=jt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const i=[];return t.forEach((a=>{this.Xa.has(a)||i.push(new OE(a))})),this.Xa.forEach((a=>{t.has(a)||i.push(new NE(a))})),i}cu(t){this.Ya=t.Qs,this.Xa=jt();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return io.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hm="SyncEngine";class zR{constructor(t,i,a){this.query=t,this.targetId=i,this.view=a}}class jR{constructor(t){this.key=t,this.hu=!1}}class BR{constructor(t,i,a,l,c,d){this.localStore=t,this.remoteStore=i,this.eventManager=a,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Zr((g=>Q0(g)),uh),this.Iu=new Map,this.Eu=new Set,this.du=new me(mt.comparator),this.Au=new Map,this.Ru=new xm,this.Vu={},this.mu=new Map,this.fu=no.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qR(r,t,i=!0){const a=LE(r);let l;const c=a.Tu.get(t);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await xE(a,t,i,!0),l}async function HR(r,t){const i=LE(r);await xE(i,t,!0,!1)}async function xE(r,t,i,a){const l=await uR(r.localStore,Ri(t)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,i);let g;return a&&(g=await FR(r,t,c,d==="current",l.resumeToken)),r.isPrimaryClient&&i&&TE(r.remoteStore,l),g}async function FR(r,t,i,a,l){r.pu=(b,C,B)=>(async function(W,J,lt,_t){let dt=J.view.ru(lt);dt.Cs&&(dt=await bv(W.localStore,J.query,!1).then((({documents:I})=>J.view.ru(I,dt))));const Nt=_t&&_t.targetChanges.get(J.targetId),$t=_t&&_t.targetMismatches.get(J.targetId)!=null,gt=J.view.applyChanges(dt,W.isPrimaryClient,Nt,$t);return Mv(W,J.targetId,gt.au),gt.snapshot})(r,b,C,B);const c=await bv(r.localStore,t,!0),d=new PR(t,c.Qs),g=d.ru(c.documents),_=Bl.createSynthesizedTargetChangeForCurrentChange(i,a&&r.onlineState!=="Offline",l),y=d.applyChanges(g,r.isPrimaryClient,_);Mv(r,i,y.au);const T=new zR(t,i,d);return r.Tu.set(t,T),r.Iu.has(i)?r.Iu.get(i).push(t):r.Iu.set(i,[t]),y.snapshot}async function GR(r,t,i){const a=At(r),l=a.Tu.get(t),c=a.Iu.get(l.targetId);if(c.length>1)return a.Iu.set(l.targetId,c.filter((d=>!uh(d,t)))),void a.Tu.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await am(a.localStore,l.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(l.targetId),i&&km(a.remoteStore,l.targetId),um(a,l.targetId)})).catch(lo)):(um(a,l.targetId),await am(a.localStore,l.targetId,!0))}async function QR(r,t){const i=At(r),a=i.Tu.get(t),l=i.Iu.get(a.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),km(i.remoteStore,a.targetId))}async function YR(r,t,i){const a=tC(r);try{const l=await(function(d,g){const _=At(d),y=ce.now(),T=g.reduce(((B,$)=>B.add($.key)),jt());let b,C;return _.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let $=as(),W=jt();return _.Ns.getEntries(B,T).next((J=>{$=J,$.forEach(((lt,_t)=>{_t.isValidDocument()||(W=W.add(lt))}))})).next((()=>_.localDocuments.getOverlayedDocuments(B,$))).next((J=>{b=J;const lt=[];for(const _t of g){const dt=lw(_t,b.get(_t.key).overlayedDocument);dt!=null&&lt.push(new fr(_t.key,dt,z0(dt.value.mapValue),Ci.exists(!0)))}return _.mutationQueue.addMutationBatch(B,y,lt,g)})).next((J=>{C=J;const lt=J.applyToLocalDocumentSet(b,W);return _.documentOverlayCache.saveOverlays(B,J.batchId,lt)}))})).then((()=>({batchId:C.batchId,changes:X0(b)})))})(a.localStore,t);a.sharedClientState.addPendingMutation(l.batchId),(function(d,g,_){let y=d.Vu[d.currentUser.toKey()];y||(y=new me(zt)),y=y.insert(g,_),d.Vu[d.currentUser.toKey()]=y})(a,l.batchId,i),await Hl(a,l.changes),await ph(a.remoteStore)}catch(l){const c=Bm(l,"Failed to persist write");i.reject(c)}}async function ME(r,t){const i=At(r);try{const a=await aR(i.localStore,t);t.targetChanges.forEach(((l,c)=>{const d=i.Au.get(c);d&&(Xt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Xt(d.hu,14607):l.removedDocuments.size>0&&(Xt(d.hu,42227),d.hu=!1))})),await Hl(i,a,t)}catch(a){await lo(a)}}function xv(r,t,i){const a=At(r);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const l=[];a.Tu.forEach(((c,d)=>{const g=d.view.va(t);g.snapshot&&l.push(g.snapshot)})),(function(d,g){const _=At(d);_.onlineState=g;let y=!1;_.queries.forEach(((T,b)=>{for(const C of b.Sa)C.va(g)&&(y=!0)})),y&&qm(_)})(a.eventManager,t),l.length&&a.Pu.H_(l),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function KR(r,t,i){const a=At(r);a.sharedClientState.updateQueryState(t,"rejected",i);const l=a.Au.get(t),c=l&&l.key;if(c){let d=new me(mt.comparator);d=d.insert(c,nn.newNoDocument(c,St.min()));const g=jt().add(c),_=new dh(St.min(),new Map,new me(zt),d,g);await ME(a,_),a.du=a.du.remove(c),a.Au.delete(t),Fm(a)}else await am(a.localStore,t,!1).then((()=>um(a,t,i))).catch(lo)}async function XR(r,t){const i=At(r),a=t.batch.batchId;try{const l=await rR(i.localStore,t);UE(i,a,null),VE(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await Hl(i,l)}catch(l){await lo(l)}}async function $R(r,t,i){const a=At(r);try{const l=await(function(d,g){const _=At(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return _.mutationQueue.lookupMutationBatch(y,g).next((b=>(Xt(b!==null,37113),T=b.keys(),_.mutationQueue.removeMutationBatch(y,b)))).next((()=>_.mutationQueue.performConsistencyCheck(y))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(y,T,g))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>_.localDocuments.getDocuments(y,T)))}))})(a.localStore,t);UE(a,t,i),VE(a,t),a.sharedClientState.updateMutationState(t,"rejected",i),await Hl(a,l)}catch(l){await lo(l)}}function VE(r,t){(r.mu.get(t)||[]).forEach((i=>{i.resolve()})),r.mu.delete(t)}function UE(r,t,i){const a=At(r);let l=a.Vu[a.currentUser.toKey()];if(l){const c=l.get(t);c&&(i?c.reject(i):c.resolve(),l=l.remove(t)),a.Vu[a.currentUser.toKey()]=l}}function um(r,t,i=null){r.sharedClientState.removeLocalQueryTarget(t);for(const a of r.Iu.get(t))r.Tu.delete(a),i&&r.Pu.yu(a,i);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((a=>{r.Ru.containsKey(a)||kE(r,a)}))}function kE(r,t){r.Eu.delete(t.path.canonicalString());const i=r.du.get(t);i!==null&&(km(r.remoteStore,i),r.du=r.du.remove(t),r.Au.delete(i),Fm(r))}function Mv(r,t,i){for(const a of i)a instanceof NE?(r.Ru.addReference(a.key,t),ZR(r,a)):a instanceof OE?(at(Hm,"Document no longer in limbo: "+a.key),r.Ru.removeReference(a.key,t),r.Ru.containsKey(a.key)||kE(r,a.key)):yt(19791,{wu:a})}function ZR(r,t){const i=t.key,a=i.path.canonicalString();r.du.get(i)||r.Eu.has(a)||(at(Hm,"New document in limbo: "+i),r.Eu.add(a),Fm(r))}function Fm(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const i=new mt(de.fromString(t)),a=r.fu.next();r.Au.set(a,new jR(i)),r.du=r.du.insert(i,a),TE(r.remoteStore,new $s(Ri(lh(i.path)),a,"TargetPurposeLimboResolution",sh.ce))}}async function Hl(r,t,i){const a=At(r),l=[],c=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,_)=>{d.push(a.pu(_,t,i).then((y=>{if((y||i)&&a.isPrimaryClient){const T=y?!y.fromCache:i?.targetChanges.get(_.targetId)?.current;a.sharedClientState.updateQueryState(_.targetId,T?"current":"not-current")}if(y){l.push(y);const T=Vm.As(_.targetId,y);c.push(T)}})))})),await Promise.all(d),a.Pu.H_(l),await(async function(_,y){const T=At(_);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>X.forEach(y,(C=>X.forEach(C.Es,(B=>T.persistence.referenceDelegate.addReference(b,C.targetId,B))).next((()=>X.forEach(C.ds,(B=>T.persistence.referenceDelegate.removeReference(b,C.targetId,B)))))))))}catch(b){if(!uo(b))throw b;at(Um,"Failed to update sequence numbers: "+b)}for(const b of y){const C=b.targetId;if(!b.fromCache){const B=T.Ms.get(C),$=B.snapshotVersion,W=B.withLastLimboFreeSnapshotVersion($);T.Ms=T.Ms.insert(C,W)}}})(a.localStore,c))}async function JR(r,t){const i=At(r);if(!i.currentUser.isEqual(t)){at(Hm,"User change. New user:",t.toKey());const a=await yE(i.localStore,t);i.currentUser=t,(function(c,d){c.mu.forEach((g=>{g.forEach((_=>{_.reject(new ct(Z.CANCELLED,d))}))})),c.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await Hl(i,a.Ls)}}function WR(r,t){const i=At(r),a=i.Au.get(t);if(a&&a.hu)return jt().add(a.key);{let l=jt();const c=i.Iu.get(t);if(!c)return l;for(const d of c){const g=i.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function LE(r){const t=At(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=ME.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=WR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=KR.bind(null,t),t.Pu.H_=kR.bind(null,t.eventManager),t.Pu.yu=LR.bind(null,t.eventManager),t}function tC(r){const t=At(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=XR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$R.bind(null,t),t}class Xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=mh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return sR(this.persistence,new eR,t.initialUser,this.serializer)}Cu(t){return new pE(Mm.mi,this.serializer)}Du(t){return new hR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xc.provider={build:()=>new Xc};class eC extends Xc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){Xt(this.persistence.referenceDelegate instanceof Yc,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new jw(a,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new pE((a=>Yc.mi(a,i)),this.serializer)}}class cm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>xv(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=JR.bind(null,this.syncEngine),await MR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new UR})()}createDatastore(t){const i=mh(t.databaseInfo.databaseId),a=(function(c){return new pR(c)})(t.databaseInfo);return(function(c,d,g,_){return new ER(c,d,g,_)})(t.authCredentials,t.appCheckCredentials,a,i)}createRemoteStore(t){return(function(a,l,c,d,g){return new SR(a,l,c,d,g)})(this.localStore,this.datastore,t.asyncQueue,(i=>xv(this.syncEngine,i,0)),(function(){return Rv.v()?new Rv:new fR})())}createSyncEngine(t,i){return(function(l,c,d,g,_,y,T){const b=new BR(l,c,d,g,_,y);return T&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const a=At(i);at(Xr,"RemoteStore shutting down."),a.Ea.add(5),await ql(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cm.provider={build:()=>new cm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):rs("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout((()=>{this.muted||t(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="FirestoreClient";class nC{constructor(t,i,a,l,c){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=l,this.user=en.UNAUTHENTICATED,this.clientId=Tm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,(async d=>{at(ur,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(at(ur,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=Bm(i,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}async function zd(r,t){r.asyncQueue.verifyOperationInProgress(),at(ur,"Initializing OfflineComponentProvider");const i=r.configuration;await t.initialize(i);let a=i.initialUser;r.setCredentialChangeListener((async l=>{a.isEqual(l)||(await yE(t.localStore,l),a=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function Vv(r,t){r.asyncQueue.verifyOperationInProgress();const i=await iC(r);at(ur,"Initializing OnlineComponentProvider"),await t.initialize(i,r.configuration),r.setCredentialChangeListener((a=>Iv(t.remoteStore,a))),r.setAppCheckTokenChangeListener(((a,l)=>Iv(t.remoteStore,l))),r._onlineComponents=t}async function iC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){at(ur,"Using user provided OfflineComponentProvider");try{await zd(r,r._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!(function(l){return l.name==="FirebaseError"?l.code===Z.FAILED_PRECONDITION||l.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;Ja("Error using user provided cache. Falling back to memory cache: "+i),await zd(r,new Xc)}}else at(ur,"Using default OfflineComponentProvider"),await zd(r,new eC(void 0));return r._offlineComponents}async function zE(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(at(ur,"Using user provided OnlineComponentProvider"),await Vv(r,r._uninitializedComponentsProvider._online)):(at(ur,"Using default OnlineComponentProvider"),await Vv(r,new cm))),r._onlineComponents}function sC(r){return zE(r).then((t=>t.syncEngine))}async function hm(r){const t=await zE(r),i=t.eventManager;return i.onListen=qR.bind(null,t.syncEngine),i.onUnlisten=GR.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=HR.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=QR.bind(null,t.syncEngine),i}function rC(r,t,i={}){const a=new er;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,_,y){const T=new PE({next:C=>{T.Nu(),d.enqueueAndForget((()=>IE(c,b)));const B=C.docs.has(g);!B&&C.fromCache?y.reject(new ct(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&C.fromCache&&_&&_.source==="server"?y.reject(new ct(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(C)},error:C=>y.reject(C)}),b=new DE(lh(g.path),T,{includeMetadataChanges:!0,qa:!0});return CE(c,b)})(await hm(r),r.asyncQueue,t,i,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="firestore.googleapis.com",kv=!0;class Lv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ct(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BE,this.ssl=kv}else this.host=t.host,this.ssl=t.ssl??kv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=gE;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Pw)throw new ct(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}T1("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jE(t.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ct(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ct(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ct(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(a,l){return a.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Gm{constructor(t,i,a,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ct(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ct(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new c1;switch(a.type){case"firstParty":return new m1(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ct(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const a=Uv.get(i);a&&(at("ComponentProvider","Removing Datastore"),Uv.delete(i),a.terminate())})(this),Promise.resolve()}}function aC(r,t,i,a={}){r=wi(r,Gm);const l=ro(t),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},g=`${t}:${i}`;l&&(d0(`https://${g}`),m0("Firestore",!0)),c.host!==BE&&c.host!==g&&Ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...c,host:g,ssl:l,emulatorOptions:a};if(!Yr(_,d)&&(r._setSettings(_),a.mockUserToken)){let y,T;if(typeof a.mockUserToken=="string")y=a.mockUserToken,T=en.MOCK_USER;else{y=Vb(a.mockUserToken,r._app?.options.projectId);const b=a.mockUserToken.sub||a.mockUserToken.user_id;if(!b)throw new ct(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new en(b)}r._authCredentials=new h1(new I0(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(t,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new yh(this.firestore,t,this._query)}}class Ve{constructor(t,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ul(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ve(this.firestore,t,this._key)}toJSON(){return{type:Ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,a){if(zl(i,Ve._jsonSchema))return new Ve(t,a||null,new mt(de.fromString(i.referencePath)))}}Ve._jsonSchemaVersion="firestore/documentReference/1.0",Ve._jsonSchema={type:Me("string",Ve._jsonSchemaVersion),referencePath:Me("string")};class Ul extends yh{constructor(t,i,a){super(t,i,lh(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ve(this.firestore,null,new mt(t))}withConverter(t){return new Ul(this.firestore,t,this._path)}}function Fr(r,t,...i){if(r=on(r),arguments.length===1&&(t=Tm.newId()),E1("doc","path",t),r instanceof Gm){const a=de.fromString(t,...i);return Z_(a),new Ve(r,null,new mt(a))}{if(!(r instanceof Ve||r instanceof Ul))throw new ct(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(de.fromString(t,...i));return Z_(a),new Ve(r.firestore,r instanceof Ul?r.converter:null,new mt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="AsyncQueue";class zv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vE(this,"async_queue_retry"),this._c=()=>{const a=Pd();a&&at(Pv,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=t;const i=Pd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=Pd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new er;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!uo(t))throw t;at(Pv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const i=this.ac.then((()=>(this.rc=!0,t().catch((a=>{throw this.nc=a,this.rc=!1,rs("INTERNAL UNHANDLED ERROR: ",jv(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=i,i}enqueueAfterDelay(t,i,a){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=jm.createAndSchedule(this,t,i,a,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&yt(47125,{Pc:jv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((i,a)=>i.targetTimeMs-a.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function jv(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(r){return(function(i,a){if(typeof i!="object"||i===null)return!1;const l=i;for(const c of a)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class so extends Gm{constructor(t,i,a,l){super(t,i,a,l),this.type="firestore",this._queue=new zv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new zv(t),this._firestoreClient=void 0,await t}}}function oC(r,t){const i=typeof r=="object"?r:_0(),a=typeof r=="string"?r:jc,l=vm(i,"firestore").getImmediate({identifier:a});if(!l._initialized){const c=xb("firestore");c&&aC(l,...c)}return l}function Qm(r){if(r._terminated)throw new ct(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||lC(r),r._firestoreClient}function lC(r){const t=r._freezeSettings(),i=(function(l,c,d,g){return new x1(l,c,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,jE(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new nC(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new qn($e.fromBase64String(t))}catch(i){throw new ct(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new qn($e.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(zl(t,qn._jsonSchema))return qn.fromBase64String(t.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:Me("string",qn._jsonSchemaVersion),bytes:Me("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new ct(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new ct(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new ct(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return zt(this._lat,t._lat)||zt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Di._jsonSchemaVersion}}static fromJSON(t){if(zl(t,Di._jsonSchema))return new Di(t.latitude,t.longitude)}}Di._jsonSchemaVersion="firestore/geoPoint/1.0",Di._jsonSchema={type:Me("string",Di._jsonSchemaVersion),latitude:Me("number"),longitude:Me("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t){this._values=(t||[]).map((i=>i))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(a,l){if(a.length!==l.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ni._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(zl(t,Ni._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((i=>typeof i=="number")))return new Ni(t.vectorValues);throw new ct(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ni._jsonSchemaVersion="firestore/vectorValue/1.0",Ni._jsonSchema={type:Me("string",Ni._jsonSchemaVersion),vectorValues:Me("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=/^__.*__$/;class cC{constructor(t,i,a){this.data=t,this.fieldMask=i,this.fieldTransforms=a}toMutation(t,i){return this.fieldMask!==null?new fr(t,this.data,this.fieldMask,i,this.fieldTransforms):new jl(t,this.data,i,this.fieldTransforms)}}class qE{constructor(t,i,a){this.data=t,this.fieldMask=i,this.fieldTransforms=a}toMutation(t,i){return new fr(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function HE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{Ac:r})}}class Km{constructor(t,i,a,l,c,d){this.settings=t,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Km({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),a=this.Vc({path:i,fc:!1});return a.gc(t),a}yc(t){const i=this.path?.child(t),a=this.Vc({path:i,fc:!1});return a.Rc(),a}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return $c(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((i=>t.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>t.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(HE(this.Ac)&&uC.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class hC{constructor(t,i,a){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=a||mh(t)}Cc(t,i,a,l=!1){return new Km({Ac:t,methodName:i,Dc:a,path:Xe.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function FE(r){const t=r._freezeSettings(),i=mh(r._databaseId);return new hC(r._databaseId,!!t.ignoreUndefinedProperties,i)}function fC(r,t,i,a,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,t,i,l);Xm("Data must be an object, but it was:",d,a);const g=GE(a,d);let _,y;if(c.merge)_=new Cn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const b of c.mergeFields){const C=fm(t,b,i);if(!d.contains(C))throw new ct(Z.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);YE(T,C)||T.push(C)}_=new Cn(T),y=d.fieldTransforms.filter((b=>_.covers(b.field)))}else _=null,y=d.fieldTransforms;return new cC(new pn(g),_,y)}class vh extends Ym{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof vh}}function dC(r,t,i,a){const l=r.Cc(1,t,i);Xm("Data must be an object, but it was:",l,a);const c=[],d=pn.empty();hr(a,((_,y)=>{const T=$m(t,_,i);y=on(y);const b=l.yc(T);if(y instanceof vh)c.push(T);else{const C=Eh(y,b);C!=null&&(c.push(T),d.set(T,C))}}));const g=new Cn(c);return new qE(d,g,l.fieldTransforms)}function mC(r,t,i,a,l,c){const d=r.Cc(1,t,i),g=[fm(t,a,i)],_=[l];if(c.length%2!=0)throw new ct(Z.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<c.length;C+=2)g.push(fm(t,c[C])),_.push(c[C+1]);const y=[],T=pn.empty();for(let C=g.length-1;C>=0;--C)if(!YE(y,g[C])){const B=g[C];let $=_[C];$=on($);const W=d.yc(B);if($ instanceof vh)y.push(B);else{const J=Eh($,W);J!=null&&(y.push(B),T.set(B,J))}}const b=new Cn(y);return new qE(T,b,d.fieldTransforms)}function Eh(r,t){if(QE(r=on(r)))return Xm("Unsupported field value:",t,r),GE(r,t);if(r instanceof Ym)return(function(a,l){if(!HE(l.Ac))throw l.Sc(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(a,l){const c=[];let d=0;for(const g of a){let _=Eh(g,l.wc(d));_==null&&(_={nullValue:"NULL_VALUE"}),c.push(_),d++}return{arrayValue:{values:c}}})(r,t)}return(function(a,l){if((a=on(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return nw(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=ce.fromDate(a);return{timestampValue:Qc(l.serializer,c)}}if(a instanceof ce){const c=new ce(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Qc(l.serializer,c)}}if(a instanceof Di)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof qn)return{bytesValue:lE(l.serializer,a._byteString)};if(a instanceof Ve){const c=l.databaseId,d=a.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Om(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof Ni)return(function(d,g){return{mapValue:{fields:{[L0]:{stringValue:P0},[Bc]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return Im(g.serializer,y)}))}}}}}})(a,l);throw l.Sc(`Unsupported field value: ${Sm(a)}`)})(r,t)}function GE(r,t){const i={};return O0(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hr(r,((a,l)=>{const c=Eh(l,t.mc(a));c!=null&&(i[a]=c)})),{mapValue:{fields:i}}}function QE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ce||r instanceof Di||r instanceof qn||r instanceof Ve||r instanceof Ym||r instanceof Ni)}function Xm(r,t,i){if(!QE(i)||!D0(i)){const a=Sm(i);throw a==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+a)}}function fm(r,t,i){if((t=on(t))instanceof _h)return t._internalPath;if(typeof t=="string")return $m(r,t);throw $c("Field path arguments must be of type string or ",r,!1,void 0,i)}const gC=new RegExp("[~\\*/\\[\\]]");function $m(r,t,i){if(t.search(gC)>=0)throw $c(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new _h(...t.split("."))._internalPath}catch{throw $c(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function $c(r,t,i,a,l){const c=a&&!a.isEmpty(),d=l!==void 0;let g=`Function ${t}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(c||d)&&(_+=" (found",c&&(_+=` in field ${a}`),d&&(_+=` in document ${l}`),_+=")"),new ct(Z.INVALID_ARGUMENT,g+r+_)}function YE(r,t){return r.some((i=>i.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(t,i,a,l,c){this._firestore=t,this._userDataWriter=i,this._key=a,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new pC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(XE("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class pC extends KE{data(){return super.data()}}function XE(r,t){return typeof t=="string"?$m(r,t):t instanceof _h?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ct(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _C{convertValue(t,i="none"){switch(or(t)){case 0:return null;case 1:return t.booleanValue;case 2:return be(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(ar(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw yt(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const a={};return hr(t,((l,c)=>{a[l]=this.convertValue(c,i)})),a}convertVectorValue(t){const i=t.fields?.[Bc].arrayValue?.values?.map((a=>be(a.doubleValue)));return new Ni(i)}convertGeoPoint(t){return new Di(be(t.latitude),be(t.longitude))}convertArray(t,i){return(t.values||[]).map((a=>this.convertValue(a,i)))}convertServerTimestamp(t,i){switch(i){case"previous":const a=ah(t);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(Nl(t));default:return null}}convertTimestamp(t){const i=rr(t);return new ce(i.seconds,i.nanos)}convertDocumentKey(t,i){const a=de.fromString(t);Xt(mE(a),9688,{name:t});const l=new Ol(a.get(1),a.get(3)),c=new mt(a.popFirst(5));return l.isEqual(i)||rs(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(r,t,i){let a;return a=r?i&&(i.merge||i.mergeFields)?r.toFirestore(t,i):r.toFirestore(t):t,a}class vl{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Qr extends KE{constructor(t,i,a,l,c,d){super(t,i,a,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new xc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const a=this._document.data.field(XE("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=Qr._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Qr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qr._jsonSchema={type:Me("string",Qr._jsonSchemaVersion),bundleSource:Me("string","DocumentSnapshot"),bundleName:Me("string"),bundle:Me("string")};class xc extends Qr{data(t={}){return super.data(t)}}class Ya{constructor(t,i,a,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new vl(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const t=[];return this.forEach((i=>t.push(i))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach((a=>{t.call(i,new xc(this._firestore,this._userDataWriter,a.key,a,new vl(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ct(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((g=>{const _=new xc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new vl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const _=new xc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new vl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return g.type!==0&&(y=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),T=d.indexOf(g.doc.key)),{type:EC(g.type),doc:_,oldIndex:y,newIndex:T}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ya._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Tm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],a=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(i.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function EC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(r){r=wi(r,Ve);const t=wi(r.firestore,so);return rC(Qm(t),r._key).then((i=>WE(t,r,i)))}Ya._jsonSchemaVersion="firestore/querySnapshot/1.0",Ya._jsonSchema={type:Me("string",Ya._jsonSchemaVersion),bundleSource:Me("string","QuerySnapshot"),bundleName:Me("string"),bundle:Me("string")};class ZE extends _C{constructor(t){super(),this.firestore=t}convertBytes(t){return new qn(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Ve(this.firestore,null,i)}}function El(r,t,i){r=wi(r,Ve);const a=wi(r.firestore,so),l=vC(r.converter,t,i);return JE(a,[fC(FE(a),"setDoc",r._key,l,r.converter!==null,i).toMutation(r._key,Ci.none())])}function qv(r,t,i,...a){r=wi(r,Ve);const l=wi(r.firestore,so),c=FE(l);let d;return d=typeof(t=on(t))=="string"||t instanceof _h?mC(c,"updateDoc",r._key,t,i,a):dC(c,"updateDoc",r._key,t),JE(l,[d.toMutation(r._key,Ci.exists(!0))])}function TC(r,...t){r=on(r);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||Bv(t[a])||(i=t[a++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Bv(t[a])){const _=t[a];t[a]=_.next?.bind(_),t[a+1]=_.error?.bind(_),t[a+2]=_.complete?.bind(_)}let c,d,g;if(r instanceof Ve)d=wi(r.firestore,so),g=lh(r._key.path),c={next:_=>{t[a]&&t[a](WE(d,r,_))},error:t[a+1],complete:t[a+2]};else{const _=wi(r,yh);d=wi(_.firestore,so),g=_._query;const y=new ZE(d);c={next:T=>{t[a]&&t[a](new Ya(d,y,_,T))},error:t[a+1],complete:t[a+2]},yC(r._query)}return(function(y,T,b,C){const B=new PE(C),$=new DE(T,B,b);return y.asyncQueue.enqueueAndForget((async()=>CE(await hm(y),$))),()=>{B.Nu(),y.asyncQueue.enqueueAndForget((async()=>IE(await hm(y),$)))}})(Qm(d),g,l,c)}function JE(r,t){return(function(a,l){const c=new er;return a.asyncQueue.enqueueAndForget((async()=>YR(await sC(a),l,c))),c.promise})(Qm(r),t)}function WE(r,t,i){const a=i.docs.get(t._key),l=new ZE(r);return new Qr(r,l,t._key,a,new vl(i.hasPendingWrites,i.fromCache),t.converter)}(function(t,i=!0){(function(l){oo=l})(ao),Za(new Kr("firestore",((a,{instanceIdentifier:l,options:c})=>{const d=a.getProvider("app").getImmediate(),g=new so(new f1(a.getProvider("auth-internal")),new g1(d,a.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ct(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(y.options.projectId,T)})(d,l),d);return c={useFetchStreams:i,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Ws(Y_,K_,t),Ws(Y_,K_,"esm2020")})();function tT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SC=tT,eT=new Ll("auth","Firebase",tT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new ym("@firebase/auth");function bC(r,...t){Zc.logLevel<=Pt.WARN&&Zc.warn(`Auth (${ao}): ${r}`,...t)}function Mc(r,...t){Zc.logLevel<=Pt.ERROR&&Zc.error(`Auth (${ao}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(r,...t){throw Zm(r,...t)}function Oi(r,...t){return Zm(r,...t)}function nT(r,t,i){const a={...SC(),[t]:i};return new Ll("auth","Firebase",a).create(t,{appName:r.name})}function nr(r){return nT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zm(r,...t){if(typeof r!="string"){const i=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=r.name),r._errorFactory.create(i,...a)}return eT.create(r,...t)}function Tt(r,t,...i){if(!r)throw Zm(t,...i)}function ns(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Mc(t),new Error(t)}function ls(r,t){r||ns(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(){return typeof self<"u"&&self.location?.href||""}function AC(){return Hv()==="http:"||Hv()==="https:"}function Hv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AC()||jb()||"connection"in navigator)?navigator.onLine:!0}function RC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(t,i){this.shortDelay=t,this.longDelay=i,ls(i>t,"Short delay should be less than long delay!"),this.isMobile=Lb()||Bb()}get(){return wC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(r,t){ls(r.emulator,"Emulator should always be set here");const{url:i}=r.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{static initialize(t,i,a){this.fetchImpl=t,i&&(this.headersImpl=i),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DC=new Fl(3e4,6e4);function Th(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function ho(r,t,i,a,l={}){return sT(r,l,async()=>{let c={},d={};a&&(t==="GET"?d=a:c={body:JSON.stringify(a)});const g=Pl({key:r.config.apiKey,...d}).slice(1),_=await r._getAdditionalHeaders();_["Content-Type"]="application/json",r.languageCode&&(_["X-Firebase-Locale"]=r.languageCode);const y={method:t,headers:_,...c};return zb()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&ro(r.emulatorConfig.host)&&(y.credentials="include"),iT.fetch()(await aT(r,r.config.apiHost,i,g),y)})}async function sT(r,t,i){r._canInitEmulator=!1;const a={...CC,...t};try{const l=new NC(r),c=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Rc(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[_,y]=g.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rc(r,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw Rc(r,"email-already-in-use",d);if(_==="USER_DISABLED")throw Rc(r,"user-disabled",d);const T=a[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw nT(r,T,y);os(r,T)}}catch(l){if(l instanceof us)throw l;os(r,"network-request-failed",{message:String(l)})}}async function rT(r,t,i,a,l={}){const c=await ho(r,t,i,a,l);return"mfaPendingCredential"in c&&os(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function aT(r,t,i,a){const l=`${t}${i}?${a}`,c=r,d=c.config.emulator?Jm(r.config,l):`${r.config.apiScheme}://${l}`;return IC.includes(i)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class NC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,a)=>{this.timer=setTimeout(()=>a(Oi(this.auth,"network-request-failed")),DC.get())})}}function Rc(r,t,i){const a={appName:r.name};i.email&&(a.email=i.email),i.phoneNumber&&(a.phoneNumber=i.phoneNumber);const l=Oi(r,t,a);return l.customData._tokenResponse=i,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(r,t){return ho(r,"POST","/v1/accounts:delete",t)}async function Jc(r,t){return ho(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function xC(r,t=!1){const i=on(r),a=await i.getIdToken(t),l=Wm(a);Tt(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:a,authTime:Rl(jd(l.auth_time)),issuedAtTime:Rl(jd(l.iat)),expirationTime:Rl(jd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function jd(r){return Number(r)*1e3}function Wm(r){const[t,i,a]=r.split(".");if(t===void 0||i===void 0||a===void 0)return Mc("JWT malformed, contained fewer than 3 sections"),null;try{const l=u0(i);return l?JSON.parse(l):(Mc("Failed to decode base64 JWT payload"),null)}catch(l){return Mc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Fv(r){const t=Wm(r);return Tt(t,"internal-error"),Tt(typeof t.exp<"u","internal-error"),Tt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(r,t,i=!1){if(i)return t;try{return await t}catch(a){throw a instanceof us&&MC(a)&&r.auth.currentUser===r&&await r.auth.signOut(),a}}function MC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rl(this.lastLoginAt),this.creationTime=Rl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(r){const t=r.auth,i=await r.getIdToken(),a=await kl(r,Jc(t,{idToken:i}));Tt(a?.users.length,t,"internal-error");const l=a.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?oT(l.providerUserInfo):[],d=kC(r.providerData,c),g=r.isAnonymous,_=!(r.email&&l.passwordHash)&&!d?.length,y=g?_:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new mm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,T)}async function UC(r){const t=on(r);await Wc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function kC(r,t){return[...r.filter(a=>!t.some(l=>l.providerId===a.providerId)),...t]}function oT(r){return r.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(r,t){const i=await sT(r,{},async()=>{const a=Pl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await aT(r,l,"/v1/token",`key=${c}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:g,body:a};return r.emulatorConfig&&ro(r.emulatorConfig.host)&&(_.credentials="include"),iT.fetch()(d,_)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function PC(r,t){return ho(r,"POST","/v2/accounts:revokeToken",Th(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tt(t.idToken,"internal-error"),Tt(typeof t.idToken<"u","internal-error"),Tt(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Fv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){Tt(t.length!==0,"internal-error");const i=Fv(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:a,refreshToken:l,expiresIn:c}=await LC(t,i);this.updateTokensAndExpiration(a,l,Number(c))}updateTokensAndExpiration(t,i,a){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,i){const{refreshToken:a,accessToken:l,expirationTime:c}=i,d=new Ka;return a&&(Tt(typeof a=="string","internal-error",{appName:t}),d.refreshToken=a),l&&(Tt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(Tt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ka,this.toJSON())}_performRefresh(){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(r,t){Tt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class ni{constructor({uid:t,auth:i,stsTokenManager:a,...l}){this.providerId="firebase",this.proactiveRefresh=new VC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new mm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await kl(this,this.stsTokenManager.getToken(this.auth,t));return Tt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return xC(this,t)}reload(){return UC(this)}_assign(t){this!==t&&(Tt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new ni({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),i&&await Wc(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ei(this.auth.app))return Promise.reject(nr(this.auth));const t=await this.getIdToken();return await kl(this,OC(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const a=i.displayName??void 0,l=i.email??void 0,c=i.phoneNumber??void 0,d=i.photoURL??void 0,g=i.tenantId??void 0,_=i._redirectEventId??void 0,y=i.createdAt??void 0,T=i.lastLoginAt??void 0,{uid:b,emailVerified:C,isAnonymous:B,providerData:$,stsTokenManager:W}=i;Tt(b&&W,t,"internal-error");const J=Ka.fromJSON(this.name,W);Tt(typeof b=="string",t,"internal-error"),Gs(a,t.name),Gs(l,t.name),Tt(typeof C=="boolean",t,"internal-error"),Tt(typeof B=="boolean",t,"internal-error"),Gs(c,t.name),Gs(d,t.name),Gs(g,t.name),Gs(_,t.name),Gs(y,t.name),Gs(T,t.name);const lt=new ni({uid:b,auth:t,email:l,emailVerified:C,displayName:a,isAnonymous:B,photoURL:d,phoneNumber:c,tenantId:g,stsTokenManager:J,createdAt:y,lastLoginAt:T});return $&&Array.isArray($)&&(lt.providerData=$.map(_t=>({..._t}))),_&&(lt._redirectEventId=_),lt}static async _fromIdTokenResponse(t,i,a=!1){const l=new Ka;l.updateFromServerResponse(i);const c=new ni({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:a});return await Wc(c),c}static async _fromGetAccountInfoResponse(t,i,a){const l=i.users[0];Tt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?oT(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,g=new Ka;g.updateFromIdToken(a);const _=new ni({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new mm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(_,y),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;function is(r){ls(r instanceof Function,"Expected a class definition");let t=Gv.get(r);return t?(ls(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,Gv.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}lT.type="NONE";const Qv=lT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(r,t,i){return`firebase:${r}:${t}:${i}`}class Xa{constructor(t,i,a){this.persistence=t,this.auth=i,this.userKey=a;const{config:l,name:c}=this.auth;this.fullUserKey=Vc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Vc("persistence",l.apiKey,c),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await Jc(this.auth,{idToken:t}).catch(()=>{});return i?ni._fromGetAccountInfoResponse(this.auth,i,t):null}return ni._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,a="authUser"){if(!i.length)return new Xa(is(Qv),t,a);const l=(await Promise.all(i.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||is(Qv);const d=Vc(a,t.config.apiKey,t.name);let g=null;for(const y of i)try{const T=await y._get(d);if(T){let b;if(typeof T=="string"){const C=await Jc(t,{idToken:T}).catch(()=>{});if(!C)break;b=await ni._fromGetAccountInfoResponse(t,C,T)}else b=ni._fromJSON(t,T);y!==c&&(g=b),c=y;break}}catch{}const _=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!_.length?new Xa(c,t,a):(c=_[0],g&&await c._set(d,g.toJSON()),await Promise.all(i.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Xa(c,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(uT(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(mT(t))return"Blackberry";if(gT(t))return"Webos";if(cT(t))return"Safari";if((t.includes("chrome/")||hT(t))&&!t.includes("edge/"))return"Chrome";if(dT(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=r.match(i);if(a?.length===2)return a[1]}return"Other"}function uT(r=sn()){return/firefox\//i.test(r)}function cT(r=sn()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function hT(r=sn()){return/crios\//i.test(r)}function fT(r=sn()){return/iemobile/i.test(r)}function dT(r=sn()){return/android/i.test(r)}function mT(r=sn()){return/blackberry/i.test(r)}function gT(r=sn()){return/webos/i.test(r)}function tg(r=sn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function zC(r=sn()){return tg(r)&&!!window.navigator?.standalone}function jC(){return qb()&&document.documentMode===10}function pT(r=sn()){return tg(r)||dT(r)||gT(r)||mT(r)||/windows phone/i.test(r)||fT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(r,t=[]){let i;switch(r){case"Browser":i=Yv(sn());break;case"Worker":i=`${Yv(sn())}-${r}`;break;default:i=r}const a=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${ao}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const a=c=>new Promise((d,g)=>{try{const _=t(c);d(_)}catch(_){g(_)}});a.onAbort=i,this.queue.push(a);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const a of this.queue)await a(t),a.onAbort&&i.push(a.onAbort)}catch(a){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(r,t={}){return ho(r,"GET","/v2/passwordPolicy",Th(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=6;class FC{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??HC,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const a=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;a&&(i.meetsMinPasswordLength=t.length>=a),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let a;for(let l=0;l<t.length;l++)a=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,i,a,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t,i,a,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=a,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kv(this),this.idTokenSubscription=new Kv(this),this.beforeStateQueue=new BC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=is(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Xa.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await Jc(this,{idToken:t}),a=await ni._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(a)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(ei(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=a?._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&g?.user&&(a=g.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await Wc(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=RC()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ei(this.app))return Promise.reject(nr(this));const i=t?on(t):null;return i&&Tt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&Tt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ei(this.app)?Promise.reject(nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ei(this.app)?Promise.reject(nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(is(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await qC(this),i=new FC(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ll("auth","Firebase",t())}onAuthStateChanged(t,i,a){return this.registerStateListener(this.authStateSubscription,t,i,a)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,a){return this.registerStateListener(this.idTokenSubscription,t,i,a)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(a.tenantId=this.tenantId),await PC(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const a=await this.getOrInitRedirectPersistenceManager(i);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&is(t)||this._popupRedirectResolver;Tt(i,this,"argument-error"),this.redirectPersistenceManager=await Xa.create(this,[is(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,a,l){if(this._deleted)return()=>{};const c=typeof i=="function"?i:i.next.bind(i);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof i=="function"){const _=t.addObserver(i,a,l);return()=>{d=!0,_()}}else{const _=t.addObserver(i);return()=>{d=!0,_()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=yT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&bC(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Sh(r){return on(r)}class Kv{constructor(t){this.auth=t,this.observer=null,this.addObserver=$b(i=>this.observer=i)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QC(r){eg=r}function YC(r){return eg.loadJS(r)}function KC(){return eg.gapiScript}function XC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(r,t){const i=vm(r,"auth");if(i.isInitialized()){const l=i.getImmediate(),c=i.getOptions();if(Yr(c,t??{}))return l;os(l,"already-initialized")}return i.initialize({options:t})}function ZC(r,t){const i=t?.persistence||[],a=(Array.isArray(i)?i:[i]).map(is);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(a,t?.popupRedirectResolver)}function JC(r,t,i){const a=Sh(r);Tt(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const l=!1,c=_T(t),{host:d,port:g}=WC(t),_=g===null?"":`:${g}`,y={url:`${c}//${d}${_}/`},T=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!a._canInitEmulator){Tt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Tt(Yr(y,a.config.emulator)&&Yr(T,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=T,a.settings.appVerificationDisabledForTesting=!0,ro(d)?(d0(`${c}//${d}${_}`),m0("Auth",!0)):t2()}function _T(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function WC(r){const t=_T(r),i=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!i)return{host:"",port:null};const a=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(a);if(l){const c=l[1];return{host:c,port:Xv(a.substr(c.length+1))}}else{const[c,d]=a.split(":");return{host:c,port:Xv(d)}}}function Xv(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function t2(){function r(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return ns("not implemented")}_getIdTokenResponse(t){return ns("not implemented")}_linkToIdToken(t,i){return ns("not implemented")}_getReauthenticationResolver(t){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(r,t){return rT(r,"POST","/v1/accounts:signInWithIdp",Th(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="http://localhost";class $r extends vT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new $r(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):os("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:l,...c}=i;if(!a||!l)return null;const d=new $r(a,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const i=this.buildRequest();return $a(t,i)}_linkToIdToken(t,i){const a=this.buildRequest();return a.idToken=i,$a(t,a)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,$a(t,i)}buildRequest(){const t={requestUri:e2,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Pl(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends ET{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends Gl{constructor(){super("facebook.com")}static credential(t){return $r._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Qs.credentialFromTaggedObject(t)}static credentialFromError(t){return Qs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Qs.credential(t.oauthAccessToken)}catch{return null}}}Qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends Gl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return $r._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return Ys.credentialFromTaggedObject(t)}static credentialFromError(t){return Ys.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:a}=t;if(!i&&!a)return null;try{return Ys.credential(i,a)}catch{return null}}}Ys.GOOGLE_SIGN_IN_METHOD="google.com";Ys.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends Gl{constructor(){super("github.com")}static credential(t){return $r._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ks.credentialFromTaggedObject(t)}static credentialFromError(t){return Ks.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ks.credential(t.oauthAccessToken)}catch{return null}}}Ks.GITHUB_SIGN_IN_METHOD="github.com";Ks.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Gl{constructor(){super("twitter.com")}static credential(t,i){return $r._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return Xs.credentialFromTaggedObject(t)}static credentialFromError(t){return Xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:a}=t;if(!i||!a)return null;try{return Xs.credential(i,a)}catch{return null}}}Xs.TWITTER_SIGN_IN_METHOD="twitter.com";Xs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(r,t){return rT(r,"POST","/v1/accounts:signUp",Th(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,a,l=!1){const c=await ni._fromIdTokenResponse(t,a,l),d=$v(a);return new cr({user:c,providerId:d,_tokenResponse:a,operationType:i})}static async _forOperation(t,i,a){await t._updateTokensIfNecessary(a,!0);const l=$v(a);return new cr({user:t,providerId:l,_tokenResponse:a,operationType:i})}}function $v(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i2(r){if(ei(r.app))return Promise.reject(nr(r));const t=Sh(r);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new cr({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await n2(t,{returnSecureToken:!0}),a=await cr._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th extends us{constructor(t,i,a,l){super(i.code,i.message),this.operationType=a,this.user=l,Object.setPrototypeOf(this,th.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,i,a,l){return new th(t,i,a,l)}}function TT(r,t,i,a){return(t==="reauthenticate"?i._getReauthenticationResolver(r):i._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?th._fromErrorAndOperation(r,c,t,a):c})}async function s2(r,t,i=!1){const a=await kl(r,t._linkToIdToken(r.auth,await r.getIdToken()),i);return cr._forOperation(r,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(r,t,i=!1){const{auth:a}=r;if(ei(a.app))return Promise.reject(nr(a));const l="reauthenticate";try{const c=await kl(r,TT(a,l,t,r),i);Tt(c.idToken,a,"internal-error");const d=Wm(c.idToken);Tt(d,a,"internal-error");const{sub:g}=d;return Tt(r.uid===g,a,"user-mismatch"),cr._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&os(a,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2(r,t,i=!1){if(ei(r.app))return Promise.reject(nr(r));const a="signIn",l=await TT(r,a,t),c=await cr._fromIdTokenResponse(r,a,l);return i||await r._updateCurrentUser(c.user),c}function o2(r,t,i,a){return on(r).onIdTokenChanged(t,i,a)}function l2(r,t,i){return on(r).beforeAuthStateChanged(t,i)}function u2(r,t,i,a){return on(r).onAuthStateChanged(t,i,a)}const eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(eh,"1"),this.storage.removeItem(eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=1e3,h2=10;class bT extends ST{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const a=this.storage.getItem(i),l=this.localCache[i];a!==l&&t(i,l,a)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((d,g,_)=>{this.notifyListeners(d,_)});return}const a=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(a);!i&&this.localCache[a]===d||this.notifyListeners(a,d)},c=this.storage.getItem(a);jC()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,h2):l()}notifyListeners(t,i){this.localCache[t]=i;const a=this.listeners[t];if(a)for(const l of Array.from(a))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:a}),!0)})},c2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}bT.type="LOCAL";const f2=bT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT extends ST{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}AT.type="SESSION";const wT=AT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const a=new bh(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:a,eventType:l,data:c}=i.data,d=this.handlersMap[l];if(!d?.size)return;i.ports[0].postMessage({status:"ack",eventId:a,eventType:l});const g=Array.from(d).map(async y=>y(i.origin,c)),_=await d2(g);i.ports[0].postMessage({status:"done",eventId:a,eventType:l,response:_})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(r="",t=10){let i="";for(let a=0;a<t;a++)i+=Math.floor(Math.random()*10);return r+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,a=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((g,_)=>{const y=ng("",20);l.port1.start();const T=setTimeout(()=>{_(new Error("unsupported_event"))},a);d={messageChannel:l,onMessage(b){const C=b;if(C.data.eventId===y)switch(C.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(C.data.response);break;default:clearTimeout(T),clearTimeout(c),_(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:y,data:i},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(){return window}function g2(r){xi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(){return typeof xi().WorkerGlobalScope<"u"&&typeof xi().importScripts=="function"}async function p2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function y2(){return navigator?.serviceWorker?.controller||null}function _2(){return RT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="firebaseLocalStorageDb",v2=1,nh="firebaseLocalStorage",IT="fbase_key";class Ql{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Ah(r,t){return r.transaction([nh],t?"readwrite":"readonly").objectStore(nh)}function E2(){const r=indexedDB.deleteDatabase(CT);return new Ql(r).toPromise()}function gm(){const r=indexedDB.open(CT,v2);return new Promise((t,i)=>{r.addEventListener("error",()=>{i(r.error)}),r.addEventListener("upgradeneeded",()=>{const a=r.result;try{a.createObjectStore(nh,{keyPath:IT})}catch(l){i(l)}}),r.addEventListener("success",async()=>{const a=r.result;a.objectStoreNames.contains(nh)?t(a):(a.close(),await E2(),t(await gm()))})})}async function Zv(r,t,i){const a=Ah(r,!0).put({[IT]:t,value:i});return new Ql(a).toPromise()}async function T2(r,t){const i=Ah(r,!1).get(t),a=await new Ql(i).toPromise();return a===void 0?null:a.value}function Jv(r,t){const i=Ah(r,!0).delete(t);return new Ql(i).toPromise()}const S2=800,b2=3;class DT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gm(),this.db)}async _withRetries(t){let i=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(i++>b2)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bh._getInstance(_2()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await p2(),!this.activeServiceWorker)return;this.sender=new m2(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||y2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await gm();return await Zv(t,eh,"1"),await Jv(t,eh),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(a=>Zv(a,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(a=>T2(a,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Jv(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=Ah(l,!1).getAll();return new Ql(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],a=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)a.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!a.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const a=this.listeners[t];if(a)for(const l of Array.from(a))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),S2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DT.type="LOCAL";const A2=DT;new Fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(r,t){return t?is(t):(Tt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends vT{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return $a(t,this._buildIdpRequest())}_linkToIdToken(t,i){return $a(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return $a(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function R2(r){return a2(r.auth,new ig(r),r.bypassAuthState)}function C2(r){const{auth:t,user:i}=r;return Tt(i,t,"internal-error"),r2(i,new ig(r),r.bypassAuthState)}async function I2(r){const{auth:t,user:i}=r;return Tt(i,t,"internal-error"),s2(i,new ig(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(t,i,a,l,c=!1){this.auth=t,this.resolver=a,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:a,postBody:l,tenantId:c,error:d,type:g}=t;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:i,sessionId:a,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(_))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return R2;case"linkViaPopup":case"linkViaRedirect":return I2;case"reauthViaPopup":case"reauthViaRedirect":return C2;default:os(this.auth,"internal-error")}}resolve(t){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=new Fl(2e3,1e4);class Ga extends NT{constructor(t,i,a,l,c){super(t,i,l,c),this.provider=a,this.authWindow=null,this.pollId=null,Ga.currentPopupAction&&Ga.currentPopupAction.cancel(),Ga.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tt(t,this.auth,"internal-error"),t}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const t=ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ga.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,D2.get())};t()}}Ga.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="pendingRedirect",Uc=new Map;class O2 extends NT{constructor(t,i,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,a),this.eventId=null}async execute(){let t=Uc.get(this.auth._key());if(!t){try{const a=await x2(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(i){t=()=>Promise.reject(i)}Uc.set(this.auth._key(),t)}return this.bypassAuthState||Uc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function x2(r,t){const i=U2(t),a=V2(r);if(!await a._isAvailable())return!1;const l=await a._get(i)==="true";return await a._remove(i),l}function M2(r,t){Uc.set(r._key(),t)}function V2(r){return is(r._redirectPersistence)}function U2(r){return Vc(N2,r.config.apiKey,r.name)}async function k2(r,t,i=!1){if(ei(r.app))return Promise.reject(nr(r));const a=Sh(r),l=w2(a,t),d=await new O2(a,l,i).execute();return d&&!i&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=600*1e3;class P2{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(i=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!z2(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!OT(t)){const a=t.error.code?.split("auth/")[1]||"internal-error";i.onError(Oi(this.auth,a))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const a=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=L2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wv(t))}saveEventToCache(t){this.cachedEventUids.add(Wv(t)),this.lastProcessedEventTime=Date.now()}}function Wv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function OT({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function z2(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(r,t={}){return ho(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,q2=/^https?/;async function H2(r){if(r.config.emulator)return;const{authorizedDomains:t}=await j2(r);for(const i of t)try{if(F2(i))return}catch{}os(r,"unauthorized-domain")}function F2(r){const t=dm(),{protocol:i,hostname:a}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&a===""?i==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===a}if(!q2.test(i))return!1;if(B2.test(r))return a===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=new Fl(3e4,6e4);function t0(){const r=xi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let i=0;i<r.CP.length;i++)r.CP[i]=null}}function Q2(r){return new Promise((t,i)=>{function a(){t0(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{t0(),i(Oi(r,"network-request-failed"))},timeout:G2.get()})}if(xi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(xi().gapi?.load)a();else{const l=XC("iframefcb");return xi()[l]=()=>{gapi.load?a():i(Oi(r,"network-request-failed"))},YC(`${KC()}?onload=${l}`).catch(c=>i(c))}}).catch(t=>{throw kc=null,t})}let kc=null;function Y2(r){return kc=kc||Q2(r),kc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=new Fl(5e3,15e3),X2="__/auth/iframe",$2="emulator/auth/iframe",Z2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},J2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W2(r){const t=r.config;Tt(t.authDomain,r,"auth-domain-config-required");const i=t.emulator?Jm(t,$2):`https://${r.config.authDomain}/${X2}`,a={apiKey:t.apiKey,appName:r.name,v:ao},l=J2.get(r.config.apiHost);l&&(a.eid=l);const c=r._getFrameworks();return c.length&&(a.fw=c.join(",")),`${i}?${Pl(a).slice(1)}`}async function tI(r){const t=await Y2(r),i=xi().gapi;return Tt(i,r,"internal-error"),t.open({where:document.body,url:W2(r),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z2,dontclear:!0},a=>new Promise(async(l,c)=>{await a.restyle({setHideOnLeave:!1});const d=Oi(r,"network-request-failed"),g=xi().setTimeout(()=>{c(d)},K2.get());function _(){xi().clearTimeout(g),l(a)}a.ping(_).then(_,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nI=500,iI=600,sI="_blank",rI="http://localhost";class e0{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aI(r,t,i,a=nI,l=iI){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const _={...eI,width:a.toString(),height:l.toString(),top:c,left:d},y=sn().toLowerCase();i&&(g=hT(y)?sI:i),uT(y)&&(t=t||rI,_.scrollbars="yes");const T=Object.entries(_).reduce((C,[B,$])=>`${C}${B}=${$},`,"");if(zC(y)&&g!=="_self")return oI(t||"",g),new e0(null);const b=window.open(t||"",g,T);Tt(b,r,"popup-blocked");try{b.focus()}catch{}return new e0(b)}function oI(r,t){const i=document.createElement("a");i.href=r,i.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="__/auth/handler",uI="emulator/auth/handler",cI=encodeURIComponent("fac");async function n0(r,t,i,a,l,c){Tt(r.config.authDomain,r,"auth-domain-config-required"),Tt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:i,redirectUrl:a,v:ao,eventId:l};if(t instanceof ET){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",Xb(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,b]of Object.entries({}))d[T]=b}if(t instanceof Gl){const T=t.getScopes().filter(b=>b!=="");T.length>0&&(d.scopes=T.join(","))}r.tenantId&&(d.tid=r.tenantId);const g=d;for(const T of Object.keys(g))g[T]===void 0&&delete g[T];const _=await r._getAppCheckToken(),y=_?`#${cI}=${encodeURIComponent(_)}`:"";return`${hI(r)}?${Pl(g).slice(1)}${y}`}function hI({config:r}){return r.emulator?Jm(r,uI):`https://${r.authDomain}/${lI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="webStorageSupport";class fI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wT,this._completeRedirectFn=k2,this._overrideRedirectResult=M2}async _openPopup(t,i,a,l){ls(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await n0(t,i,a,dm(),l);return aI(t,c,ng())}async _openRedirect(t,i,a,l){await this._originValidation(t);const c=await n0(t,i,a,dm(),l);return g2(c),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:c}=this.eventManagers[i];return l?Promise.resolve(l):(ls(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(t);return this.eventManagers[i]={promise:a},a.catch(()=>{delete this.eventManagers[i]}),a}async initAndGetManager(t){const i=await tI(t),a=new P2(t);return i.register("authEvent",l=>(Tt(l?.authEvent,t,"invalid-auth-event"),{status:a.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=i,a}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(Bd,{type:Bd},l=>{const c=l?.[0]?.[Bd];c!==void 0&&i(!!c),os(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=H2(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return pT()||cT()||tg()}}const dI=fI;var i0="@firebase/auth",s0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(a=>{t(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pI(r){Za(new Kr("auth",(t,{options:i})=>{const a=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=a.options;Tt(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const _={apiKey:d,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yT(r)},y=new GC(a,l,c,_);return ZC(y,i),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,a)=>{t.getProvider("auth-internal").initialize()})),Za(new Kr("auth-internal",t=>{const i=Sh(t.getProvider("auth").getImmediate());return(a=>new mI(a))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ws(i0,s0,gI(r)),Ws(i0,s0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=300,_I=f0("authIdTokenMaxAge")||yI;let r0=null;const vI=r=>async t=>{const i=t&&await t.getIdTokenResult(),a=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(a&&a>_I)return;const l=i?.token;r0!==l&&(r0=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function EI(r=_0()){const t=vm(r,"auth");if(t.isInitialized())return t.getImmediate();const i=$C(r,{popupRedirectResolver:dI,persistence:[A2,f2,wT]}),a=f0("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const d=vI(c.toString());l2(i,d,()=>d(i.currentUser)),o2(i,g=>d(g))}}const l=c0("auth");return l&&JC(i,`http://${l}`),i}function TI(){return document.getElementsByTagName("head")?.[0]??document}QC({loadJS(r){return new Promise((t,i)=>{const a=document.createElement("script");a.setAttribute("src",r),a.onload=t,a.onerror=l=>{const c=Oi("internal-error");c.customData=l,i(c)},a.type="text/javascript",a.charset="UTF-8",TI().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pI("Browser");const SI={apiKey:"AIzaSyDp8cwTIgUmrklSYBoZfd1YhwKcm-TBaS0",authDomain:"board-a22f4.firebaseapp.com",projectId:"board-a22f4",storageBucket:"board-a22f4.firebasestorage.app",messagingSenderId:"629074346855",appId:"1:629074346855:web:519aa9f67c1fe416f425c2",measurementId:"G-57FP4QZTJ6"};let qd,tn,Cl;try{qd=y0(SI),tn=oC(qd),Cl=EI(qd),u1("debug")}catch(r){console.error("Firebase initialization error:",r),tn=null,Cl=null}const Hd="default-app-id",bI="91965",AI=["425 California","101 Mission","425 Market","180 Montgomery","360 Spear","1019 Market","@220 Montgomery","Sutro","201 Mission","111 Pine","501 2nd","@360 Spear","420 23rd","101 Mission","@350 Spear"],wI=["#000000","#FFFFFF","#FF0000"],RI=["#FFFFFF","#008000","#0000FF","#000000","#FFA500"],CI="#22C55E",II="#FFFFFF",DI="#3B82F6",NI="#FFFFFF",sg=r=>{const t=new Date(r),i=t.getDay(),a=t.getDate()-i;return new Date(t.setDate(a))},OI=r=>{const t=new Date(r),i=sg(t),a=i.getFullYear(),l=new Date(a,0,1),c=(i-l)/864e5,d=Math.ceil((c+l.getDay()+1)/7);return`${a}-W${String(d).padStart(2,"0")}`},xT=r=>{const t={weekday:"short",month:"numeric",day:"numeric"};return new Intl.DateTimeFormat("en-US",t).format(r).replace(",","").toUpperCase()},MT=r=>Array(7).fill(null).map((t,i)=>{const a=new Date(r);return a.setDate(a.getDate()+i),a}),xI=()=>{const[r,t]=Et.useState(null),[i,a]=Et.useState(()=>{try{const T=localStorage.getItem("scheduleUser");return T?JSON.parse(T):null}catch{return null}}),[l,c]=Et.useState(!1);Et.useEffect(()=>{if(!Cl){console.error("Auth is not initialized."),c(!0);return}const T=async()=>{try{await i2(Cl)}catch(C){console.error("Error during authentication:",C)}},b=u2(Cl,C=>{t(C),c(!0),C||(localStorage.removeItem("scheduleUser"),a(null))});return T(),()=>b()},[]);const d=Et.useMemo(()=>i?.hasAccess===!0,[i]),g=Et.useMemo(()=>i?.initials||"??",[i]),_=Et.useMemo(()=>r?.uid||null,[r]);return{user:r,userId:_,userInfo:i,hasAccess:d,initials:g,isAuthReady:l,signUp:async(T,b,C)=>{if(C.trim()!==bI)return{success:!1,error:"Invalid access code."};if(!_)return{success:!1,error:"Authentication not ready."};const B=T.trim()[0]||"",$=b.trim()[0]||"",W={firstName:T,lastName:b,initials:`${B}${$}`.toUpperCase(),hasAccess:!0,userId:_};try{return localStorage.setItem("scheduleUser",JSON.stringify(W)),a(W),{success:!0,error:null}}catch(J){return console.error("Error saving user info:",J),{success:!1,error:"Could not save user data."}}}}},wh=r=>{const t=Et.useRef(null);return Et.useEffect(()=>{const i=a=>{t.current&&!t.current.contains(a.target)&&r()};return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[r]),t},MI=({onPrevWeek:r,onNextWeek:t,onToday:i,onOpenCalendar:a,onSignUp:l,userInfo:c,hasAccess:d})=>V.jsxs("header",{className:"mb-4 p-4 bg-black border border-white rounded-lg shadow flex flex-col md:flex-row justify-between items-center",children:[V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("button",{onClick:r,className:"px-3 py-2 bg-gray-800 border border-white text-white rounded-md hover:bg-gray-700",children:V.jsx(VT,{})}),V.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-800 border border-white text-white rounded-md hover:bg-gray-700 text-sm font-medium",children:"Today"}),V.jsx("button",{onClick:t,className:"px-3 py-2 bg-gray-800 border border-white text-white rounded-md hover:bg-gray-700",children:V.jsx(UT,{})}),V.jsx("button",{onClick:a,className:"px-3 py-2 bg-gray-800 border border-white text-white rounded-md hover:bg-gray-700",children:V.jsx(GI,{})})]}),V.jsx("div",{className:"flex items-center gap-4 mt-2 md:mt-0",children:d&&c?V.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-600 text-white rounded-full font-bold border-2 border-white",children:c.initials}):V.jsx("button",{onClick:l,className:"px-4 py-2 bg-blue-600 border border-white text-white rounded-md hover:bg-blue-500 text-sm font-medium",children:"Sign Up"})})]}),VI=({shift:r,onContextMenu:t,onDoubleClick:i})=>{const{site:a,startTime:l,endTime:c,initials:d,bgColor:g,fontColor:_,comments:y}=r,T=g||"#FFFFFF",b=_||"#000000",C={color:a.startsWith("@")?"#FF0000":b},B=y&&y.length>0;return V.jsx("div",{onContextMenu:$=>t($,r),onDoubleClick:()=>i(r),className:"p-2 rounded-md cursor-pointer select-none mb-2 border border-gray-600",style:{backgroundColor:T,color:b,borderRight:B?"3px solid #FFA500":"1px solid #4B5563"},children:V.jsxs("div",{className:"flex justify-between items-center",children:[V.jsxs("span",{className:"font-mono font-bold text-sm",style:C,children:[a," ",l,"-",c]}),V.jsx("span",{className:"font-mono font-bold text-sm ml-2 flex-shrink-0",style:{color:b},children:d})]})})},UI=({day:r,shifts:t,onContextMenu:i,onDoubleClick:a})=>{const l=Et.useMemo(()=>[...t].sort((c,d)=>{const g=c.startTime||"0000",_=d.startTime||"0000";return g.localeCompare(_)}),[t]);return V.jsxs("div",{className:"flex-1 min-w-[200px] md:min-w-[220px]",children:[V.jsx("div",{className:"text-center p-3 sticky top-0 bg-black z-10",children:V.jsx("div",{className:"font-bold text-white text-sm",children:xT(r.date)})}),V.jsx("div",{className:"p-2 h-full",children:l.map(c=>V.jsx(VI,{shift:c,onContextMenu:i,onDoubleClick:a},c.id))})]})},kI=({menuState:r,onClose:t,onEdit:i,onDelete:a,onComplete:l,onOps:c,onColor:d,onComment:g,onCopy:_})=>{const y=wh(t);return r.visible?V.jsx("div",{ref:y,className:"absolute z-50 w-48 bg-gray-900 border border-white rounded-md shadow-lg",style:{top:r.y,left:r.x},children:V.jsxs("ul",{className:"py-1 text-sm text-gray-200",children:[V.jsx("li",{onClick:l,className:"px-4 py-2 hover:bg-gray-700 cursor-pointer",children:"Complete"}),V.jsx("li",{onClick:c,className:"px-4 py-2 hover:bg-gray-700 cursor-pointer",children:"OPS"}),V.jsx("li",{onClick:g,className:"px-4 py-2 hover:bg-gray-700 cursor-pointer",children:"Comment"}),V.jsx("li",{onClick:d,className:"px-4 py-2 hover:bg-gray-700 cursor-pointer",children:"Change Colors"}),V.jsx("li",{className:"border-t border-gray-700 my-1"}),V.jsx("li",{onClick:_,className:"px-4 py-2 hover:bg-gray-700 cursor-pointer",children:"Copy Shift"}),V.jsx("li",{onClick:i,className:"px-4 py-2 hover:bg-gray-700 cursor-pointer",children:"Edit Shift"}),V.jsx("li",{onClick:a,className:"px-4 py-2 hover:bg-gray-700 text-red-400 cursor-pointer",children:"Delete Shift"})]})}):null},LI=({menuState:r,onClose:t,onPaste:i})=>{const a=wh(t);return r.visible?V.jsx("div",{ref:a,className:"absolute z-50 w-48 bg-gray-900 border border-white rounded-md shadow-lg",style:{top:r.y,left:r.x},children:V.jsx("ul",{className:"py-1 text-sm text-gray-200",children:V.jsx("li",{onClick:i,className:"px-4 py-2 hover:bg-gray-700 cursor-pointer",children:"Paste Shift"})})}):null},Wr=({children:r,onClose:t})=>{const i=wh(t);return V.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-75",children:V.jsx("div",{ref:i,className:"bg-black border border-white p-6 rounded-lg shadow-xl w-full max-w-md",children:r})})},PI=({day:r,weekId:t,onClose:i,firestore:a,userId:l,appId:c})=>{const[d,g]=Et.useState(""),[_,y]=Et.useState(""),[T,b]=Et.useState(""),[C,B]=Et.useState([]),[$,W]=Et.useState(!1),[J,lt]=Et.useState(""),_t=wh(()=>{W(!1)}),dt=gt=>{const I=gt.target.value;g(I),B(I?AI.filter(A=>A.toLowerCase().includes(I.toLowerCase())):[])},Nt=gt=>{g(gt),B([]),W(!1)},$t=async gt=>{if(gt.preventDefault(),!d||!_||!T){lt("All fields are required.");return}if(_.length!==4||T.length!==4){lt("Time must be in HHMM format.");return}if(!a){lt("Database not connected.");return}lt("");const I={id:crypto.randomUUID(),site:d,startTime:_,endTime:T,initials:"",bgColor:"#FFFFFF",fontColor:"#000000",comments:[]},R=Fr(a,"schedule-weeks",t);try{const M=await $E(R);if(M.exists()){const N=M.data().days,U=N.findIndex(w=>w.date===r.date.toISOString().split("T")[0]);if(U>-1){const w=[...N];w[U].shifts.push(I),await qv(R,{days:w})}else{console.warn("Day index not found, adding shift to first day.");const w=[...N];w[0].shifts.push(I),await qv(R,{days:w})}}else{const N=MT(sg(r.date)).map(U=>({date:U.toISOString().split("T")[0],shifts:U.toISOString().split("T")[0]===r.date.toISOString().split("T")[0]?[I]:[],notes:[]}));await El(R,{days:N})}i()}catch(M){console.error("Error adding shift:",M),lt("Failed to add shift. Please try again.")}};return V.jsxs(Wr,{onClose:i,children:[V.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Add New Shift"}),V.jsxs("form",{onSubmit:$t,className:"space-y-4",children:[V.jsxs("div",{className:"relative",ref:_t,children:[V.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"Site Name"}),V.jsx("input",{type:"text",placeholder:"Start typing to search...",value:d,onChange:dt,onFocus:()=>W(!0),className:"w-full p-2 bg-black border border-gray-400 text-white rounded-md text-sm"}),$&&C.length>0&&V.jsx("div",{className:"absolute z-10 w-full bg-black border border-white rounded-md shadow-lg max-h-48 overflow-y-auto",children:C.map((gt,I)=>V.jsx("div",{onMouseDown:A=>{A.stopPropagation(),Nt(gt)},className:"p-2 text-sm text-gray-200 hover:bg-gray-800 cursor-pointer",children:gt},`${gt}-${I}`))})]}),V.jsxs("div",{className:"flex gap-4",children:[V.jsxs("div",{className:"w-1/2",children:[V.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"Start (HHMM)"}),V.jsx("input",{type:"text",placeholder:"HHMM",value:_,onChange:gt=>y(gt.target.value),maxLength:"4",className:"w-full p-2 bg-black border border-gray-400 text-white rounded-md text-sm font-mono"})]}),V.jsxs("div",{className:"w-1/2",children:[V.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"End (HHMM)"}),V.jsx("input",{type:"text",placeholder:"HHMM",value:T,onChange:gt=>b(gt.target.value),maxLength:"4",className:"w-full p-2 bg-black border border-gray-400 text-white rounded-md text-sm font-mono"})]})]}),J&&V.jsx("p",{className:"text-red-400 text-sm",children:J}),V.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[V.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 text-sm font-medium",children:"Cancel"}),V.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-500 text-sm font-medium",children:"Add Shift"})]})]})]})},zI=({shift:r,day:t,weekId:i,onClose:a,onUpdateShift:l})=>{const[c,d]=Et.useState(r.site),[g,_]=Et.useState(r.startTime),[y,T]=Et.useState(r.endTime),[b,C]=Et.useState(r.initials),[B,$]=Et.useState(""),W=J=>{if(J.preventDefault(),!c||!g||!y){$("Site and times are required.");return}if(g.length!==4||y.length!==4){$("Time must be in HHMM format.");return}$("");const lt={...r,site:c,startTime:g,endTime:y,initials:b||""};l(t,lt),a()};return V.jsxs(Wr,{onClose:a,children:[V.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Edit Shift"}),V.jsxs("form",{onSubmit:W,className:"space-y-4",children:[V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"Site Name"}),V.jsx("input",{type:"text",value:c,onChange:J=>d(J.target.value),className:"w-full p-2 bg-black border border-gray-400 text-white rounded-md text-sm"})]}),V.jsxs("div",{className:"flex gap-4",children:[V.jsxs("div",{className:"w-1/2",children:[V.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"Start (HHMM)"}),V.jsx("input",{type:"text",value:g,onChange:J=>_(J.target.value),maxLength:"4",className:"w-full p-2 bg-black border border-gray-400 text-white rounded-md text-sm font-mono"})]}),V.jsxs("div",{className:"w-1/2",children:[V.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"End (HHMM)"}),V.jsx("input",{type:"text",value:y,onChange:J=>T(J.target.value),maxLength:"4",className:"w-full p-2 bg-black border border-gray-400 text-white rounded-md text-sm font-mono"})]})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"Initials (Optional)"}),V.jsx("input",{type:"text",value:b,onChange:J=>C(J.target.value),maxLength:"4",className:"w-full p-2 bg-black border border-gray-400 text-white rounded-md text-sm font-mono"})]}),B&&V.jsx("p",{className:"text-red-400 text-sm",children:B}),V.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[V.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 text-sm font-medium",children:"Cancel"}),V.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-500 text-sm font-medium",children:"Save Changes"})]})]})]})},jI=({shift:r,day:t,onClose:i,onUpdateShift:a})=>{const[l,c]=Et.useState(r.fontColor||"#000000"),[d,g]=Et.useState(r.bgColor||"#FFFFFF"),_=()=>{const T={...r,fontColor:l,bgColor:d};a(t,T),i()},y=({title:T,colors:b,selected:C,onChange:B})=>V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:T}),V.jsx("div",{className:"flex gap-2",children:b.map($=>V.jsx("button",{type:"button",onClick:()=>B($),className:`w-8 h-8 rounded-full border-2 ${C===$?"border-white":"border-gray-600"}`,style:{backgroundColor:$}},$))})]});return V.jsxs(Wr,{onClose:i,children:[V.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Change Colors"}),V.jsxs("div",{className:"space-y-4",children:[V.jsx(y,{title:"Font Color",colors:wI,selected:l,onChange:c}),V.jsx(y,{title:"Fill Color",colors:RI,selected:d,onChange:g}),V.jsx("div",{className:"mt-6 p-2 rounded-md",style:{backgroundColor:d},children:V.jsxs("span",{className:"font-mono font-bold text-sm",style:{color:l},children:[r.site," ",r.startTime,"-",r.endTime]})})]}),V.jsxs("div",{className:"flex justify-end gap-3 pt-6",children:[V.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 text-sm font-medium",children:"Cancel"}),V.jsx("button",{type:"button",onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-500 text-sm font-medium",children:"Save Colors"})]})]})},BI=({currentDate:r,onClose:t,onDateSelect:i})=>{const[a,l]=Et.useState(new Date(r)),c=new Date(a.getFullYear(),a.getMonth(),1),d=new Date(a.getFullYear(),a.getMonth()+1,0),g=c.getDay(),_=d.getDate(),y=Array(g).fill(null),T=Array.from({length:_},(B,$)=>$+1),b=B=>{l(new Date(a.getFullYear(),a.getMonth()+B,1))},C=B=>{const $=new Date(a.getFullYear(),a.getMonth(),B);i($),t()};return V.jsx(Wr,{onClose:t,children:V.jsxs("div",{className:"w-full",children:[V.jsxs("div",{className:"flex justify-between items-center mb-4",children:[V.jsx("button",{onClick:()=>b(-1),className:"p-2 text-white hover:bg-gray-700 rounded-full",children:V.jsx(VT,{})}),V.jsx("h4",{className:"text-lg font-semibold text-white",children:a.toLocaleString("default",{month:"long",year:"numeric"})}),V.jsx("button",{onClick:()=>b(1),className:"p-2 text-white hover:bg-gray-700 rounded-full",children:V.jsx(UT,{})})]}),V.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center text-sm text-gray-400 mb-2",children:[V.jsx("span",{children:"S"}),V.jsx("span",{children:"M"}),V.jsx("span",{children:"T"}),V.jsx("span",{children:"W"}),V.jsx("span",{children:"T"}),V.jsx("span",{children:"F"}),V.jsx("span",{children:"S"})]}),V.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[y.map((B,$)=>V.jsx("div",{},`blank-${$}`)),T.map(B=>V.jsx("button",{onClick:()=>C(B),className:"p-2 text-center text-white rounded-full hover:bg-blue-600",children:B},B))]})]})})},qI=({onClose:r,onSignUp:t})=>{const[i,a]=Et.useState(""),[l,c]=Et.useState(""),[d,g]=Et.useState(""),[_,y]=Et.useState(""),T=async b=>{if(b.preventDefault(),y(""),!i||!l||!d){y("All fields are required.");return}const C=await t(i,l,d);C.success?r():y(C.error)};return V.jsxs(Wr,{onClose:r,children:[V.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Create Account"}),V.jsxs("form",{onSubmit:T,className:"space-y-4",children:[V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"First Name"}),V.jsx("input",{type:"text",value:i,onChange:b=>a(b.target.value),className:"w-full p-2 bg-black border border-gray-400 text-white rounded-md text-sm"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"Last Name"}),V.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),className:"w-full p-2 bg-black border border-gray-400 text-white rounded-md text-sm"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"Access Code"}),V.jsx("input",{type:"password",value:d,onChange:b=>g(b.target.value),className:"w-full p-2 bg-black border border-gray-400 text-white rounded-md text-sm"})]}),_&&V.jsx("p",{className:"text-red-400 text-sm",children:_}),V.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[V.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 text-sm font-medium",children:"Cancel"}),V.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-500 text-sm font-medium",children:"Sign Up"})]})]})]})},HI=({shift:r,day:t,onClose:i,onUpdateShift:a,hasAccess:l,userInfo:c})=>{const[d,g]=Et.useState(""),_=r.comments||[],y=Et.useRef(null),T=()=>{y.current?.scrollIntoView({behavior:"smooth"})};Et.useEffect(T,[_]);const b=C=>{if(C.preventDefault(),!d.trim())return;const B={id:crypto.randomUUID(),user:`${c.firstName} ${c.lastName} (${c.initials})`,text:d,date:new Date().toISOString()},$={...r,comments:[..._,B]};a(t,$),g("")};return V.jsxs(Wr,{onClose:i,children:[V.jsxs("h3",{className:"text-xl font-semibold text-white mb-4",children:["Comments for ",r.site]}),V.jsxs("div",{className:"space-y-4",children:[V.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-3 bg-gray-900 p-3 rounded-md border border-gray-700",children:[_.length>0&&_.map(C=>V.jsxs("div",{className:"text-sm",children:[V.jsxs("div",{className:"flex justify-between items-center",children:[V.jsx("span",{className:"font-semibold text-blue-400",children:C.user}),V.jsx("span",{className:"text-xs text-gray-500",children:new Date(C.date).toLocaleString()})]}),V.jsx("p",{className:"text-gray-200 whitespace-pre-wrap",children:C.text})]},C.id)),V.jsx("div",{ref:y})]}),l&&V.jsxs("form",{onSubmit:b,className:"flex flex-col gap-2",children:[V.jsx("textarea",{rows:"3",value:d,onChange:C=>g(C.target.value),placeholder:"Add your comment...",className:"w-full p-2 bg-black border border-gray-400 text-white rounded-md text-sm"}),V.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-500 text-sm font-medium self-end",children:"Add Comment"})]}),!l&&V.jsx("div",{className:"flex justify-end",children:V.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 text-sm font-medium",children:"Close"})})]})]})},FI=({day:r,notes:t,onClose:i,onUpdateDayNotes:a,hasAccess:l,userInfo:c})=>{const[d,g]=Et.useState(""),_=t||[],y=Et.useRef(null),T=()=>{y.current?.scrollIntoView({behavior:"smooth"})};Et.useEffect(T,[_]);const b=C=>{if(C.preventDefault(),!d.trim())return;const B={id:crypto.randomUUID(),user:`${c.firstName} ${c.lastName} (${c.initials})`,text:d,date:new Date().toISOString()};a(r,[..._,B]),g("")};return V.jsxs(Wr,{onClose:i,children:[V.jsxs("h3",{className:"text-xl font-semibold text-white mb-4",children:["Notes for ",xT(r.date)]}),V.jsxs("div",{className:"space-y-4",children:[V.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-3 bg-gray-900 p-3 rounded-md border border-gray-700",children:[_.length>0&&_.map(C=>V.jsxs("div",{className:"text-sm",children:[V.jsxs("div",{className:"flex justify-between items-center",children:[V.jsx("span",{className:"font-semibold text-blue-400",children:C.user}),V.jsx("span",{className:"text-xs text-gray-500",children:new Date(C.date).toLocaleString()})]}),V.jsx("p",{className:"text-gray-200 whitespace-pre-wrap",children:C.text})]},C.id)),V.jsx("div",{ref:y})]}),l&&V.jsxs("form",{onSubmit:b,className:"flex flex-col gap-2",children:[V.jsx("textarea",{rows:"3",value:d,onChange:C=>g(C.target.value),placeholder:"Add a new note...",className:"w-full p-2 bg-black border border-gray-400 text-white rounded-md text-sm"}),V.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-500 text-sm font-medium self-end",children:"Add Note"})]}),!l&&V.jsx("div",{className:"flex justify-end",children:V.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 text-sm font-medium",children:"Close"})})]})]})},VT=()=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),UT=()=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),GI=()=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),QI=()=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})});function YI(){const[r,t]=Et.useState(new Date),[i,a]=Et.useState({days:[]}),[l,c]=Et.useState(!0),[d,g]=Et.useState(!1),[_,y]=Et.useState(null),[T,b]=Et.useState({visible:!1,x:0,y:0,day:null,shift:null}),[C,B]=Et.useState(!1),[$,W]=Et.useState(null),[J,lt]=Et.useState({visible:!1,x:0,y:0,day:null}),{userId:_t,userInfo:dt,hasAccess:Nt,initials:$t,isAuthReady:gt,signUp:I}=xI(),A=Et.useMemo(()=>OI(r),[r]),R=Et.useMemo(()=>{const et=sg(r);return MT(et).map(rt=>({date:rt,dateString:rt.toISOString().split("T")[0]}))},[r]),M=`/artifacts/${Hd}/public/data/schedule-weeks`;Et.useEffect(()=>{if(!gt||!_t)return;if(!tn){console.error("Firestore is not initialized."),B(!0),c(!1);return}c(!0);const et=Fr(tn,M,A),rt=TC(et,Rt=>{if(Rt.exists()){const Ut=Rt.data(),oe=R.map(Ze=>{const Kt=Ut.days.find(yn=>yn.date===Ze.dateString);return{date:Ze.date,shifts:Kt?Kt.shifts:[],notes:Kt?Kt.notes:[]}});a({days:oe})}else{const Ut=R.map(oe=>({date:oe.date,shifts:[],notes:[]}));a({days:Ut})}c(!1)},Rt=>{console.error("Error fetching week data:",Rt),B(!0),c(!1)});return()=>rt()},[A,gt,_t,tn,Hd,M,R]);const N=async()=>{if(!tn)return[];const et=Fr(tn,M,A),rt=await $E(et);return rt.exists()?rt.data().days:R.map(Rt=>({date:Rt.dateString,shifts:[],notes:[]}))},U=async(et,rt)=>{if(!tn){console.error("Cannot update shift, DB not connected.");return}const Rt=et.date.toISOString().split("T")[0],Ut=await N(),oe=Ut.findIndex(yn=>yn.date===Rt);if(oe===-1)return;Ut[oe].shifts=Ut[oe].shifts||[];const Ze=Ut[oe].shifts.findIndex(yn=>yn.id===rt.id);Ze>-1&&(Ut[oe].shifts[Ze]=rt);const Kt=Fr(tn,M,A);await El(Kt,{days:Ut},{merge:!0}),O()},w=async(et,rt)=>{if(!tn){console.error("Cannot delete shift, DB not connected.");return}const Rt=et.date.toISOString().split("T")[0],Ut=await N(),oe=Ut.findIndex(Kt=>Kt.date===Rt);if(oe===-1)return;Ut[oe].shifts=(Ut[oe].shifts||[]).filter(Kt=>Kt.id!==rt.id);const Ze=Fr(tn,M,A);await El(Ze,{days:Ut},{merge:!0}),O()},re=async()=>{const{day:et}=J;if(!tn||!et||!$){console.error("Cannot paste shift, DB, day, or clipboard missing.");return}const rt={...$,id:crypto.randomUUID()},Rt=et.date.toISOString().split("T")[0],Ut=await N(),oe=Ut.findIndex(Kt=>Kt.date===Rt);if(oe===-1)return;Ut[oe].shifts=Ut[oe].shifts||[],Ut[oe].shifts.push(rt);const Ze=Fr(tn,M,A);await El(Ze,{days:Ut},{merge:!0}),lt({visible:!1})},ye=async(et,rt)=>{if(!tn){console.error("Cannot update notes, DB not connected.");return}const Rt=et.date.toISOString().split("T")[0],Ut=await N(),oe=Ut.findIndex(Kt=>Kt.date===Rt);if(oe===-1)return;Ut[oe].notes=rt;const Ze=Fr(tn,M,A);await El(Ze,{days:Ut},{merge:!0})},F=()=>{t(et=>new Date(et.setDate(et.getDate()-7)))},nt=()=>{t(et=>new Date(et.setDate(et.getDate()+7)))},ht=()=>{t(new Date)},Bt=et=>{t(et),O()},Ot=et=>{y(et),g(!0)},O=()=>{g(!1),y(null),b({visible:!1}),lt({visible:!1})},Y=et=>{Nt&&Ot(V.jsx(PI,{day:et,weekId:A,onClose:O,firestore:tn,userId:_t,appId:Hd}))},it=(et,rt)=>{Ot(V.jsx(zI,{shift:rt,day:et,weekId:A,onClose:O,onUpdateShift:U}))},st=(et,rt)=>{Ot(V.jsx(jI,{shift:rt,day:et,onClose:O,onUpdateShift:U}))},vt=()=>{Ot(V.jsx(BI,{currentDate:r,onClose:O,onDateSelect:Bt}))},wt=()=>{Ot(V.jsx(qI,{onClose:O,onSignUp:I}))},xt=(et,rt)=>{Ot(V.jsx(HI,{shift:rt,day:et,onClose:O,onUpdateShift:U,hasAccess:Nt,userInfo:dt}))},_e=(et,rt)=>{Ot(V.jsx(FI,{day:et,notes:rt,onClose:O,onUpdateDayNotes:ye,hasAccess:Nt,userInfo:dt}))},ae=(et,rt,Rt)=>{et.preventDefault(),Nt&&(lt({visible:!1}),b({visible:!0,x:et.pageX,y:et.pageY,day:rt,shift:Rt}))},Ui=()=>{const{day:et,shift:rt}=T;et&&rt&&it(et,rt),b({visible:!1})},cs=()=>{const{day:et,shift:rt}=T;et&&rt&&st(et,rt),b({visible:!1})},hs=()=>{const{day:et,shift:rt}=T;et&&rt&&U(et,{...rt,bgColor:CI,fontColor:II,initials:rt.initials||$t}),b({visible:!1})},fs=()=>{const{day:et,shift:rt}=T;et&&rt&&U(et,{...rt,bgColor:DI,fontColor:NI}),b({visible:!1})},In=()=>{const{day:et,shift:rt}=T;et&&rt&&xt(et,rt),b({visible:!1})},dr=()=>{const{shift:et}=T;et&&W(et),b({visible:!1})},ki=(et,rt)=>{et.preventDefault(),!(!$||!Nt)&&(b({visible:!1}),lt({visible:!0,x:et.pageX,y:et.pageY,day:rt}))},mr=(et,rt)=>{xt(et,rt)};return gt?C?V.jsx("div",{className:"bg-black min-h-screen flex items-center justify-center text-red-500 p-8",children:V.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg border border-red-500",children:[V.jsx("h2",{className:"text-xl font-bold mb-4",children:"Database Error"}),V.jsx("p",{children:"Could not connect to the scheduling database."}),V.jsx("p",{children:"Please check the console and ensure Firebase is set up correctly."})]})}):V.jsxs("div",{className:"p-4 md:p-6 bg-black min-h-screen font-sans text-gray-100",onClick:()=>{b({visible:!1}),lt({visible:!1})},children:[V.jsx(MI,{onPrevWeek:F,onNextWeek:nt,onToday:ht,onOpenCalendar:vt,onSignUp:wt,userInfo:dt,hasAccess:Nt}),V.jsx("div",{className:"overflow-x-auto pb-4",children:V.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(7, minmax(25vw, 1fr))"},children:l?V.jsx("div",{className:"text-white col-span-7 text-center p-10",children:"Loading Week Data..."}):i.days.map(et=>{const rt=et.notes&&et.notes.length>0;return V.jsxs("div",{className:"",children:[V.jsx(UI,{day:et,shifts:et.shifts,onContextMenu:(Rt,Ut)=>ae(Rt,et,Ut),onDoubleClick:Rt=>mr(et,Rt)}),V.jsxs("div",{className:"p-2 flex items-center gap-2",children:[Nt&&V.jsx("button",{onClick:()=>Y(et),onContextMenu:Rt=>ki(Rt,et),className:"flex-grow py-2 text-center text-gray-400 font-bold text-lg rounded-md hover:bg-white hover:text-black transition-colors duration-150",children:"+"}),V.jsx("button",{onClick:()=>_e(et,et.notes),className:`p-2 rounded-md hover:bg-gray-800 ${rt?"border border-orange-500":"border border-transparent"}`,"aria-label":"View Day Notes",children:V.jsx(QI,{})})]})]},et.date.toISOString())})})}),d&&_,V.jsx(kI,{menuState:T,onClose:()=>b({visible:!1}),onEdit:Ui,onDelete:w,onComplete:hs,onOps:fs,onColor:cs,onComment:In,onCopy:dr}),V.jsx(LI,{menuState:J,onClose:()=>lt({visible:!1}),onPaste:re})]}):V.jsx("div",{className:"bg-black min-h-screen flex items-center justify-center text-white",children:"Loading Authentication..."})}bb.createRoot(document.getElementById("root")).render(V.jsx(gb.StrictMode,{children:V.jsx(YI,{})}));
